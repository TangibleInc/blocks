var he=Object.defineProperty;var d=(j,N)=>he(j,"name",{value:N,configurable:!0});(function(){"use strict";(function(){const t={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,t);return}}catch(e){}globalThis.process={env:t}})();var j=Object.defineProperty,N=d((t,e)=>j(t,"name",{value:e,configurable:!0}),"l$2");class E{constructor(e){this.conditionsMap=e||[],this.getPreviousLevels=this.getPreviousLevels.bind(this),this.getCondition=this.getCondition.bind(this)}evaluateConditions(e,n){let o=!0;if(!e||!Array.isArray(e))return o;for(const i of e){const r=this.getCondition(i);if(!this.evaluateCondition(r,n))return!1}return o}getCondition(e){var n;const o=e.split("-"),i=parseInt(o[0]),r=parseInt(o[1]);return{number:i,level:r,current:(n=this.conditionsMap[i])==null?void 0:n[r],previousLevels:this.getPreviousLevels(i,r)}}getPreviousLevels(e,n){if(n===0)return[];let o=0;const i=[];for(;o<n;)i.push(this.conditionsMap[e][o]),o++;return i}extractComparisons(e){const n=[];for(const o in e)if(!(o==="compare"||o.slice(0,8)==="compare_"||o==="value"||o.slice(0,6)==="value_")){if(o==="control"||o.slice(0,8)==="control_"){const i=e[o],[r,a=0]=o.split("_");n.push({field:i,value:e[`value${a?"_"+a:""}`],compare:e[`compare${a?"_"+a:""}`]});continue}n.push({field:o,value:e[o]})}return n}evaluateCondition(e,n){let o=!0;for(const r of e.previousLevels){const a=this.extractComparisons(r);for(const{field:u,value:l,compare:s}of a){const c=n(u);if(this.compare(c,l,s))return!1}}const i=this.extractComparisons(e.current);for(const{field:r,value:a,compare:u}of i){const l=n(r);if(!this.compare(l,a,u))return!1}return o}compare(e,n,o="is"){let i=!1;switch(o){case"is":case"equal":case"not":default:i=e===n,o==="not"&&(i=!i);break}return i}}d(E,"u$1"),N(E,"ControlVisibility");var M=Object.defineProperty,y=d((t,e)=>M(t,"name",{value:e,configurable:!0}),"t");const w=jQuery,B=y((t,e,n)=>{const o=new E(n),i=e.value.models,r=t.find(".elementor-repeater-fields");i.forEach((a,u)=>{var l;const s=w(r[u]),c=a.attributes,p=a.controls,b=y(f=>{var v;return(v=c["tangible_control_"+f])!=null?v:void 0},"getValue");for(const f in c){const v=s.find(`.elementor-control-${f}`);if(!v)continue;const _=(l=p[f].tangible_conditions)!=null?l:[],O=o.evaluateConditions(_,b);v[O?"show":"hide"]()}})},"setVisibility"),C=y(()=>h.callback?h.callback():!1,"refresh"),V=new MutationObserver(t=>t.forEach(C)),Q=y(()=>{document.querySelectorAll(".elementor-repeater-fields-wrapper").forEach(t=>V.observe(t,{childList:!0})),w(".elementor-repeater-fields elementor-control input").on("keyup change",C),w(".elementor-repeater-fields elementor-control select").on("select2:select",C)},"init"),W=y(()=>{V.disconnect(),w(".elementor-repeater-fields elementor-control input").off("keyup change",C),w(".elementor-repeater-fields elementor-control select").off("select2:select",C)},"clear"),h={setVisibility:B,init:Q,clear:W,callback:!1};var q=Object.defineProperty,D=d((t,e)=>q(t,"name",{value:e,configurable:!0}),"o$1");const F=jQuery,J=D(t=>{if(!t.content||!t.content.conditions||t.content.conditions!=="default-tab-workaround")return;const e=document.querySelector('.elementor-component-tab:not([data-tab="content"])');F(e).trigger("click")},"maybeInitTabsWorkaround");var z=Object.defineProperty,g=d((t,e)=>z(t,"name",{value:e,configurable:!0}),"l");const{Tangible:R}=window,{prefix:k,visibility:G}=R.blockConfig,m=jQuery,{conditions:S,tabs:H,sections:K}=G,U=g(t=>{const e=t.attributes.widgetType;if(!e.startsWith(k.slug))return;const n=e.slice(k.slug.length),o=X(n);let i=H[n]||{},r=K[n]||{};Array.isArray(i)&&(i={}),Array.isArray(r)&&(r={});const a=new E(S[n].general),u=g(()=>t.get("settings").attributes,"getElementorSettings"),l=g(()=>{m(".elementor-control-type-section").off("click",l),m(".elementor-control input").off("keyup change",l),m(".elementor-control select").off("select2:select",l),m(".elementor-component-tab").off("click",l),h.clear(),Z({controls:o,visibility:a,elementorSettings:u(),tabs:i,sections:r,blockId:n}),m(".elementor-control-type-section").on("click",l),m(".elementor-control input").on("keyup change",l),m(".elementor-control select").on("select2:select",l),m(".elementor-component-tab").on("click",l),h.init()},"refresh");J(i),h.callback=l,l()},"widgetVisibility"),X=g(t=>{const e=k.slug+t,n=elementor.widgetsCache[e].controls,o={};for(const i in n)!i.startsWith(k.control)||(o[i]=n[i]);return o},"getBlockControls"),Y=g(t=>m("#elementor-controls").find(`[data-setting='${t}']`),"element"),Z=g(({controls:t,visibility:e,elementorSettings:n,tabs:o,sections:i,blockId:r})=>{var a;const u=ee(t,n),l=g(s=>u[s]?u[s].value:void 0,"getFieldValue");for(const s of Object.keys(o)){const c=o[s],p=c.conditions==="default-tab-workaround"?!1:e.evaluateConditions(c.conditions,l),b=m(`.elementor-tab-control-${s}`);b.hasClass("elementor-active")||b[p?"show":"hide"]()}for(const s of Object.keys(i)){const c=i[s],p=e.evaluateConditions(c.conditions,l),b=m(`.elementor-control-tangible_section_${s}`);b.hasClass("elementor-open")||b[p?"show":"hide"]()}for(const s in u){const c=u[s],p=e.evaluateConditions(c.conditions,l),b=m(`.elementor-control-${c.dataName}`);b[p?"show":"hide"]();const f=(a=S[r].repeater[s])!=null?a:!1;!f||setTimeout(()=>h.setVisibility(b,c,f))}},"setVisibility"),ee=g((t,e)=>{const n={};for(const o in t){const i={value:te(e[o],t[o]),dataName:o,name:o.slice(k.control.length)};t[o].tangible_conditions&&(i.conditions=t[o].tangible_conditions),n[i.name]=i}return n},"getControlSettings"),te=g((t,e)=>{if(e.type!=="number"&&e.type!=="switcher")return t;if(e.type==="number")return t&&t.toString();const n=Y(e.name);return n.length===0?t:n.is(":checked")?e.return_value:e.return_off},"getValue");jQuery(()=>{elementor.hooks.addAction("panel/open_editor/widget",(t,e)=>{e.attributes.elType==="widget"&&U(e)})});var ne=Object.defineProperty,oe=d((t,e)=>ne(t,"name",{value:e,configurable:!0}),"i$1");const ie=oe(t=>wp.element.createElement("div",{id:"tangible-logic-root",className:"tangible-logic-open"},wp.element.createElement("div",{className:"tangible-logic-modal"},wp.element.createElement("div",{className:"tangible-logic-header"},wp.element.createElement("div",{className:"tangible-logic-title"},t.title?t.title:""),wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button has-icon",type:"button","aria-label":"Close dialog",onClick:t.cancel},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),wp.element.createElement("div",{className:"tangible-logic-rule-group"},t.children),wp.element.createElement("div",{className:"tangible-logic-actions tangible-logic-clear"},wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button is-tertiary",type:"button",onClick:t.cancel},"Cancel"),wp.element.createElement("button",{id:"logic-button-add-logic",className:"tangible-components-button is-primary",type:"button",onClick:t.submit},"Save")))),"Modal");var P=Object.defineProperty,A=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,L=d((t,e,n)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"e$1"),ae=d((t,e)=>{for(var n in e||(e={}))le.call(e,n)&&L(t,n,e[n]);if(A)for(var n of A(e))re.call(e,n)&&L(t,n,e[n]);return t},"s$1"),se=d((t,e)=>P(t,"name",{value:e,configurable:!0}),"y");const ce=se((t,e,n,o)=>tangibleFields(ae({onChange:i=>e(Array.isArray(i)||typeof i=="object"?JSON.stringify(i):i),value:n},o)),"getControl");var ue=Object.defineProperty,$=d((t,e)=>ue(t,"name",{value:e,configurable:!0}),"e");const me=$(t=>{const{config:e,field:n,builder:o,initialValue:i}=t,r=e.popup,[a,u]=wp.element.useState(o==="beaver-builder"),[l=i,s]=wp.element.useState(),[c=i,p]=wp.element.useState(),b=$(I=>(r||p(I),s(I)),"save");wp.element.useEffect(()=>t.save(c),[c]),wp.element.useEffect(()=>r&&a&&s(c),[a]);const f=wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${e.type}`},ce(e,b,c,n));if(!r)return f;const v=$(()=>u(!1),"cancel"),_=$(()=>{u(!1),p(l)},"submit"),O=o!=="beaver-builder"&&wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${o}`},o==="elementor"&&wp.element.createElement("label",{className:"elementor-control-title"},n.label),wp.element.createElement("button",{onClick:()=>u(!a),class:"components-button is-secondary tangible-control-btn"},"Open Settings"));return a?wp.element.createElement(wp.element.Fragment,null,O,wp.element.createElement(ie,{submit:_,cancel:v,title:n.label},f)):O},"Control");var be=Object.defineProperty,de=d((t,e)=>be(t,"name",{value:e,configurable:!0}),"o");const{wp:x,Tangible:pe}=window,{render:fe,unmountComponentAtNode:ge}=x.element,{blockConfig:{controls:T}}=pe;jQuery(window).on("elementor:init",()=>{for(const t in T)ve(T[t])});const ve=de(t=>{const e=elementor.modules.controls.BaseData.extend({onReady:function(){const n=this.ui.contentEditable.prevObject[0].getElementsByClassName(`tangible-${t.prefixed_type}`)[0],o=JSON.parse(n.getAttribute("data-field")),i=this.saveValue.bind(this);fe(x.element.createElement(me,{config:t,field:o,initialValue:this.ui.input.val(),builder:"elementor",save:i}),n)},saveValue:function(n){this.ui.input.val(n),this.setValue(this.ui.input.val())},onBeforeDestroy:function(){this.saveValue(this.ui.input.val());const n=this.ui.contentEditable.prevObject[0];ge(n)}});elementor.addControlView(t.prefixed_type,e)},"initControl")})();
//# sourceMappingURL=elementor-integration.min.js.map
