var en=Object.defineProperty;var b=(W,q)=>en(W,"name",{value:q,configurable:!0});(function(){"use strict";(function(){const e={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,e);return}}catch(t){}globalThis.process={env:e}})();var W=Object.defineProperty,q=b((e,t)=>W(e,"name",{value:t,configurable:!0}),"l$7");class B{constructor(t){this.conditionsMap=t||[],this.getPreviousLevels=this.getPreviousLevels.bind(this),this.getCondition=this.getCondition.bind(this)}evaluateConditions(t,l){let n=!0;if(!t||!Array.isArray(t))return n;for(const i of t){const m=this.getCondition(i);if(!this.evaluateCondition(m,l))return!1}return n}getCondition(t){const l=t.split("-"),n=parseInt(l[0]),i=parseInt(l[1]);return{number:n,level:i,current:this.conditionsMap[n][i],previousLevels:this.getPreviousLevels(n,i)}}getPreviousLevels(t,l){if(l===0)return[];let n=0;const i=[];for(;n<l;)i.push(this.conditionsMap[t][n]),n++;return i}extractComparisons(t){const l=[];for(const n in t)if(!(n==="compare"||n.slice(0,8)==="compare_"||n==="value"||n.slice(0,6)==="value_")){if(n==="control"||n.slice(0,8)==="control_"){const i=t[n],[m,r=0]=n.split("_");l.push({field:i,value:t[`value${r?"_"+r:""}`],compare:t[`compare${r?"_"+r:""}`]});continue}l.push({field:n,value:t[n]})}return l}evaluateCondition(t,l){let n=!0;for(const m of t.previousLevels){const r=this.extractComparisons(m);for(const{field:o,value:d,compare:v}of r){const a=l(o);if(this.compare(a,d,v))return!1}}const i=this.extractComparisons(t.current);for(const{field:m,value:r,compare:o}of i){const d=l(m);if(!this.compare(d,r,o))return!1}return n}compare(t,l,n="is"){let i=!1;switch(n){case"is":case"equal":case"not":default:i=t===l,n==="not"&&(i=!i);break}return i}}b(B,"u$7"),q(B,"ControlVisibility");var We=Object.defineProperty,T=b((e,t)=>We(e,"name",{value:t,configurable:!0}),"e$2");const qe=T(e=>/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(e)||/^([A-Fa-f0-9]{3,4}){1,2}$/.test(e),"isHex"),ze=T((e,t)=>{const l=Math.floor((e.length-1)/3),n=Ke(e.slice(1),l),[i,m,r,o]=n.map(Xe);return`rgba(${i}, ${m}, ${r}, ${Ye(o)})`},"hexToRGBA"),Ke=T((e,t)=>e.match(new RegExp(`.{${t}}`,"g")),"getChunksFromString"),Xe=T(e=>parseInt(e.repeat(2/e.length),16),"convertHexUnitTo256"),Ye=T(e=>typeof e!="undefined"?parseFloat(e/255).toFixed(2):1,"getAlphafloat");var Ze=Object.defineProperty,et=b((e,t)=>Ze(e,"name",{value:t,configurable:!0}),"n$5");const{wp:V}=window,{components:{BaseControl:tt,ColorPicker:lt},element:{useEffect:nt}}=V,at=et(e=>{const t=e.value===""&&e.defaultValue!==!1?qe(e.defaultValue)?ze(e.defaultValue):e.defaultValue:e.value;return nt(()=>e.onChange(t),[]),V.element.createElement(tt,{className:e.className},V.element.createElement("div",null,V.element.createElement("p",null,e.label),V.element.createElement(lt,{style:{display:"block",marginTop:"10px"},color:t,onChangeComplete:l=>{const n=e.alpha===!1?`rgb(${l.rgb.r}, ${l.rgb.g}, ${l.rgb.b})`:`rgba(${l.rgb.r}, ${l.rgb.g}, ${l.rgb.b}, ${l.rgb.a})`;e.onChange(n)},disableAlpha:e.alpha===!1||e.alpha==="false"})))},"Color");var rt=Object.defineProperty,ot=b((e,t)=>rt(e,"name",{value:t,configurable:!0}),"u$6");const{wp:I}=window,{components:{BaseControl:it,__experimentalBoxControl:ct,SelectControl:mt},element:{useEffect:st,useState:Y}}=I,ut=ot(e=>{const[t,l]=Y(e.value),[n,i]=Y(e.value.unit?e.value.unit:e.defaultUnit),m=e.multipleValues!=="false"?e.className:`${e.className} ${e.className}-single-value`,r=[];for(let o in e.units)r.push({value:e.units[o],label:e.units[o]});return st(()=>{const o={top:t.top?t.top.replace(/[^0-9]/g,""):"",right:t.right?t.right.replace(/[^0-9]/g,""):"",bottom:t.bottom?t.bottom.replace(/[^0-9]/g,""):"",left:t.left?t.left.replace(/[^0-9]/g,""):"",unit:n};e.onChange(o)},[t,n]),I.element.createElement(it,{className:m},I.element.createElement(ct,{label:e.label,values:e.multipleValues!=="false"?t:{top:t.top},units:[{value:"px",label:"px"}],onChange:o=>l(o),sides:e.multipleValues!=="false"?[]:["top"]}),I.element.createElement(mt,{onChange:o=>i(o),value:n,label:"Unit",options:r}))},"Dimension");var Z=Object.defineProperty,pt=Object.defineProperties,dt=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,te=b((e,t,l)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"l$4"),le=b((e,t)=>{for(var l in t||(t={}))bt.call(t,l)&&te(e,l,t[l]);if(ee)for(var l of ee(t))vt.call(t,l)&&te(e,l,t[l]);return e},"n$3"),gt=b((e,t)=>pt(e,dt(t)),"v$3"),yt=b((e,t)=>Z(e,"name",{value:t,configurable:!0}),"i$9");const{wp:ne}=window,{element:{useEffect:ft,useState:Et}}=ne,$t=yt(e=>{const[t,l]=Et(e.value?e.value:0);return ft(()=>{e.onChange(t)},[t]),ne.element.createElement("input",gt(le(le({type:"number",value:t},e.min&&{min:e.min}),e.max&&{max:e.max}),{onChange:n=>{l(n.target.value!==""?parseInt(n.target.value):0)}}))},"Number");var ae=Object.defineProperty,re=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,oe=b((e,t,l)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"c$2"),_t=b((e,t)=>{for(var l in t||(t={}))ht.call(t,l)&&oe(e,l,t[l]);if(re)for(var l of re(t))wt.call(t,l)&&oe(e,l,t[l]);return e},"d$4"),Ct=b((e,t)=>ae(e,"name",{value:t,configurable:!0}),"p$5");const Nt=Ct((e,t)=>{switch(t.type){case"add":return[...e,_t({},t.structure)];case"remove":return[...e.slice(0,t.item),...e.slice(t.item+1)];case"update":return e[t.item][t.control]=t.value,[...e];case"clear":return[];default:return e}},"reducer");var xt=Object.defineProperty,z=b((e,t)=>xt(e,"name",{value:t,configurable:!0}),"s$7");const{wp:$}=window,{components:{Button:L,ButtonGroup:ie,Card:Ot,CardBody:kt,CardHeader:Pt,CardFooter:jt},element:{useState:St,useReducer:Tt,useEffect:Vt,useContext:Ft}}=$,Dt=z(e=>{var t;const[l,n]=Tt(Nt,e.value),[i,m]=St(!1),{conditions:r}=Ft(Ue),o=new B((t=r.repeater[e.name])!=null?t:[]),d=z((a,c)=>o.evaluateConditions(a,u=>v(u,c)),"isVisible"),v=z((a,c)=>Number.isInteger(l[c][a])?l[c][a].toString():l[c][a],"getFieldValue");return Vt(()=>e.onChange(l),[l]),$.element.createElement($.element.Fragment,null,l.map((a,c)=>$.element.createElement(Ot,null,$.element.createElement(Pt,null,$.element.createElement("strong",null,"Item ",c+1)),i===c&&e.controls.map(u=>{var f,C;return d((f=u.conditions)!=null?f:[],c)?$.element.createElement(kt,null,Je(u,(C=a[u.name])!=null?C:"",p=>n({type:"update",item:c,control:u.name,value:p[u.name]}))):""}),$.element.createElement(jt,null,$.element.createElement(ie,null,$.element.createElement(L,{onClick:()=>m(c!==i?c:!1),variant:"secondary"},i!==c?"Edit":"Close"),$.element.createElement(L,{onClick:()=>n({type:"remove",item:c}),variant:"secondary",isDestructive:!0},"Delete"))))),$.element.createElement(ie,{style:{display:"flex",marginTop:"10px",justifyContent:"right"}},$.element.createElement(L,{onClick:()=>n({type:"add",controls:e.controls,structure:e.structure}),variant:"secondary"},"Add"),$.element.createElement(L,{onClick:()=>n({type:"clear"}),variant:"secondary",isDestructive:!0},"Clear")))},"Repeater");var At=Object.defineProperty,Rt=b((e,t)=>At(e,"name",{value:t,configurable:!0}),"u$5");const{wp:ce}=window,{element:{useEffect:Bt,useRef:It,useState:Lt}}=ce,Mt=Rt(e=>{const t=It(null),[l,n]=Lt(e.value);return Bt(()=>{tinyMCE.init({target:t.current,setup:function(i){i.on("input",function(m){e.updateVal(i.getContent())}),i.on("ExecCommand",function(m){e.updateVal(i.getContent())})}})},[]),ce.element.createElement("textarea",{ref:t},l)},"TextArea");var Gt=Object.defineProperty,Jt=b((e,t)=>Gt(e,"name",{value:t,configurable:!0}),"i$7");const Ut=Jt(e=>wp.element.createElement("div",{id:"tangible-logic-root",className:"tangible-logic-open"},wp.element.createElement("div",{className:"tangible-logic-modal"},wp.element.createElement("div",{className:"tangible-logic-header"},wp.element.createElement("div",{className:"tangible-logic-title"},e.title?e.title:""),wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button has-icon",type:"button","aria-label":"Close dialog",onClick:e.cancel},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),wp.element.createElement("div",{className:"tangible-logic-rule-group"},e.children),wp.element.createElement("div",{className:"tangible-logic-actions tangible-logic-clear"},wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button is-tertiary",type:"button",onClick:e.cancel},"Cancel"),wp.element.createElement("button",{id:"logic-button-add-logic",className:"tangible-components-button is-primary",type:"button",onClick:e.submit},"Save")))),"Modal");var Qt=Object.defineProperty,Ht=b((e,t)=>Qt(e,"name",{value:t,configurable:!0}),"n$2");const{wp:me}=window,{useState:Wt,useEffect:qt}=me.element,zt=Ht(e=>{const[t,l]=Wt(e.initialValue);return qt(()=>e.handler(t),[t]),me.element.createElement("input",{type:"text",value:t,onChange:n=>l(n.target.value)})},"Text");var se=Object.defineProperty,ue=Object.getOwnPropertySymbols,Kt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,pe=b((e,t,l)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"a$4"),Yt=b((e,t)=>{for(var l in t||(t={}))Kt.call(t,l)&&pe(e,l,t[l]);if(ue)for(var l of ue(t))Xt.call(t,l)&&pe(e,l,t[l]);return e},"f$2"),Zt=b((e,t)=>se(e,"name",{value:t,configurable:!0}),"g$4");const{jQuery:el}=window,P=Zt(({labelForEmptyValue:e="",options:t=[],value:l="",onChange:n,multiSelect:i,style:m})=>{const r=wp.element.useRef();if(wp.element.useEffect(()=>{if(!r.current)return;const o=el(r.current);r.current.$el=o,n(l),o.tangibleSelect({minimumResultsForSearch:5}),i&&(o.val(l),o.trigger("change")),o.on("change",function(v){if(!i&&!r.current._silentChange){n(v.target.value);return}if(!r.current||r.current._silentChange)return;const a=o.select2("data").map(c=>c.id);n(a)});const d=r.current.select2=o.data("select2");return()=>{d&&d.destroy()}},[]),r.current&&r.current.$el)if(i){const o=r.current.$el.val();l.length!==o.length&&t.length&&setImmediate(function(){!r.current||!r.current.$el||(r.current.$el.val(l),r.current.$el.trigger("change"))})}else r.current.value!==l&&(r.current._silentChange=!0,r.current.$el.val(l),r.current.$el.trigger("change"),setImmediate(function(){r.current._silentChange=!1}));return wp.element.createElement("select",{ref:r,autoComplete:"off",multiple:i,style:Yt({display:"none",width:"160px"},m)},e&&wp.element.createElement("option",{value:"",disabled:!0,selected:l==null},e),t.map((o,d)=>wp.element.createElement("option",{key:`option-${d}`,value:o.value,selected:o.value===l},o.label)))},"Select");var tl=Object.defineProperty,ll=b((e,t)=>tl(e,"name",{value:t,configurable:!0}),"a$3");const nl=ll(({getData:e,setData:t,includeOrder:l,includeOrderBy:n})=>{const i=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"order"},"Order"),wp.element.createElement(P,{labelForEmptyValue:"Choose Order",options:[{label:"ASC",value:"asc"},{label:"DESC",value:"desc"}],value:e("order"),style:{width:"100%"},onChange:d=>t("order",d)}))),m=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby"},"Order by"),wp.element.createElement(P,{labelForEmptyValue:"Order by",options:[{label:"Title",value:"title"},{label:"ID",value:"id"},{label:"Author",value:"author"},{label:"Name",value:"name"},{label:"Type",value:"type"},{label:"Date",value:"date"},{label:"Modified",value:"modified"},{label:"Random",value:"random"},{label:"Comment count",value:"comment_count"},{label:"Relevance",value:"relevance"},{label:"Menu",value:"menu"},{label:"Custom value",value:"meta_value"},{label:"Custom value number",value:"meta_value_num"}],value:e("orderby"),style:{width:"100%"},onChange:d=>t("orderby",d)}))),r=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field"},"Order by custom field"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",name:"orderby-field",id:"orderby_field",onChange:d=>t("orderby_field",d.target.value),placeholder:"Enter field key",value:e("orderby_field")}))),o=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field_number"},"Order by custom field with numeric value"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",id:"orderby_field_number",name:"orderby-field-number",onChange:d=>t("orderby_field_number",d.target.value),placeholder:"Enter field key",value:e("orderby_field_number")})));return wp.element.createElement("div",{className:"tangible-logic-rule"},l&&i,n&&m,e("orderby")==="meta_value"&&r,e("orderby")==="meta_value_num"&&o)},"Order");var al=Object.defineProperty,rl=b((e,t)=>al(e,"name",{value:t,configurable:!0}),"p$3");const{useState:de,useEffect:be}=wp.element,ol=rl(({initialLoopType:e,initialType:t,setData:l,fields:n})=>{const[i,m]=de(e||"post"),[r,o]=de(t);be(()=>l("loopType",i),[i]),be(()=>l("type",r),[r]);const d=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label"},"Content type"),wp.element.createElement(P,{labelForEmptyValue:"Choose a Type",options:[{label:"Post",value:"post"}],value:i,onChange:a=>m(a),style:{width:"100%"}}))),v=i==="post"?wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"post_type"},"Fields"),wp.element.createElement(P,{labelForEmptyValue:"Choose Fields",value:r?r.split(","):["null"],options:n,multiSelect:!0,style:{width:"100%"},onChange:a=>a=="null"?o(""):o(a.toString())}))):"";return wp.element.createElement("div",{className:"tangible-logic-rule"},d,v)},"Type");var ve=Object.defineProperty,il=Object.defineProperties,cl=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,ml=Object.prototype.hasOwnProperty,sl=Object.prototype.propertyIsEnumerable,ye=b((e,t,l)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"h$3"),fe=b((e,t)=>{for(var l in t||(t={}))ml.call(t,l)&&ye(e,l,t[l]);if(ge)for(var l of ge(t))sl.call(t,l)&&ye(e,l,t[l]);return e},"u$3"),Ee=b((e,t)=>il(e,cl(t)),"b$1"),F=b((e,t)=>ve(e,"name",{value:t,configurable:!0}),"m$5");const{Tangible:ul,wp:E}=window,{useState:$e,useEffect:pl}=E.element,{allTaxonomies:he={}}=ul.postQueryControlData,dl=F(({value:e,initialData:t,save:l,showBtn:n,remove:i})=>{const m=e===1,r=Object.keys(he),[o,d]=$e(t);pl(()=>{l(o)},[o]);const v=F(y=>{const x=he[y];if(x==null||x.length===0)return[];let S=[];return x.forEach(He=>{S.push({label:He.name,value:He.slug})}),S},"getTerms"),a=F(y=>o.hasOwnProperty(y)?o[y]===""?null:o[y]:null,"getParam"),c=F(y=>{C(x=>[]),y.length>0&&C(x=>y)},"updateTerms"),u=F((y,x)=>d(S=>Ee(fe({},S),{[y]:x})),"updateParam"),[f,C]=$e(o.hasOwnProperty("taxonomy")?v(o.taxonomy):[]),p=E.element.createElement("div",{className:"tangible-components-control"},E.element.createElement("div",{className:"tangible-components-control__field"},E.element.createElement("label",{className:"tangible-components-control__label"},"Taxonomy ",!m&&e),E.element.createElement(P,{style:{width:"100%"},labelForEmptyValue:`Taxonomy ${m?"":e}`,options:r.map(y=>({label:y,value:y})),value:a("taxonomy"),onChange:y=>{u("terms",""),u("taxonomy",y);const x=v(y);c(x)}}))),j=E.element.createElement("div",{className:"tangible-components-control"},E.element.createElement("div",{className:"tangible-components-control__field"},E.element.createElement("label",{className:"tangible-components-control__label"},"Compare ",!m&&e),E.element.createElement(P,{style:{width:"100%"},labelForEmptyValue:`Compare ${m?"":e}`,options:[{label:"In",value:"in"},{label:"Not",value:"not"},{label:"And",value:"and"},{label:"Exists",value:"exists"},{label:"Not exists",value:"not exists"}],value:o.taxonomy_compare,onChange:y=>u("taxonomy_compare",y)}))),g=a("terms"),k=E.element.createElement("div",{className:"tangible-components-control"},E.element.createElement("div",{className:"tangible-components-control__field"},E.element.createElement("label",{className:"tangible-components-control__label"},"Term ",!m&&e),E.element.createElement(P,{style:{width:"100%"},labelForEmptyValue:`Terms ${m?"":e}`,multiSelect:!0,options:f,value:g?g.split(","):["null"],onChange:y=>d(x=>{let S="";return y!="null"&&(S=y.toString()),Ee(fe({},x),{terms:S})})})));return E.element.createElement("div",{className:"tangible-logic-rule"},p,j,k,n&&E.element.createElement("button",{id:"logic-button-rule",className:"tangible-components-button is-secondary",type:"button",onClick:i},"Remove"))},"QueryGroup");var bl=Object.defineProperty,M=b((e,t)=>bl(e,"name",{value:t,configurable:!0}),"s$3");const{wp:h}=window,{useState:we,useEffect:_e}=h.element,Ce=3,Ne=M(({initialData:e,save:t})=>{const[l,n]=we([]),[i,m]=we("");_e(()=>{if(!e)return;const a=JSON.parse(e),c=[];if(a.taxonomy_relation&&m(a.taxonomy_relation),!a.taxonomy)return;let u="",f=1;for(;a[`taxonomy${u}`]&&f<=Ce&&(u=f!==1?`_${f}`:"",!!a[`taxonomy${u}`]);)c.push({taxonomy:a[`taxonomy${u}`],terms:a[`terms${u}`],taxonomy_compare:a[`taxonomy_compare${u}`]}),f++;n(c)},[]),_e(()=>{const a={};i&&(a.taxonomy_relation=i);for(let c=0;c<l.length;c++){const u=c!==0?`_${c+1}`:"";a[`taxonomy${u}`]=l[c].taxonomy,a[`terms${u}`]=l[c].terms,a[`taxonomy_compare${u}`]=l[c].taxonomy_compare}t(a)},[l,i]);const r=h.element.createElement("div",{className:"tangible-logic-rule tangible-logic-clear"},h.element.createElement("div",{className:"tangible-components-control"},h.element.createElement("div",{className:"tangible-components-control__field"},h.element.createElement("label",{className:"tangible-components-control__label"},"Relation"),h.element.createElement(P,{style:{width:"100%"},labelForEmptyValue:"Choose Relation",options:[{label:"And",value:"and"},{label:"Or",value:"or"}],value:i,onChange:a=>m(a)})))),o=M(()=>{n([...l,{taxonomy:"",terms:"",taxonomy_compare:""}])},"addRow"),d=M((a,c)=>{l[a]=c,n([...l])},"saveRow"),v=M(a=>{n([...l.slice(0,a),...l.slice(a+1)])},"removeRow");return h.element.createElement("div",{className:"tangible-logic-rule-group-box-bordered"},l.length>1&&h.element.createElement("div",{className:"tangible-logic-taxonomy-group"},r),h.element.createElement("div",{className:"tangible-logic-taxonomy-group"},l.length>0&&l.map((a,c)=>h.element.createElement(dl,{key:c+JSON.stringify(a),value:c+1,initialData:a,showBtn:!0,save:u=>d(c,u),remove:()=>v(c)}))),l.length<Ce&&h.element.createElement("div",{className:"tangible-logic-group-actions"},h.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:o},"Add taxonomy filter"),h.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:()=>n([])},"Remove")))},"Taxonomy");var xe=Object.defineProperty,vl=Object.defineProperties,gl=Object.getOwnPropertyDescriptors,Oe=Object.getOwnPropertySymbols,yl=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,ke=b((e,t,l)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"g$3"),Pe=b((e,t)=>{for(var l in t||(t={}))yl.call(t,l)&&ke(e,l,t[l]);if(Oe)for(var l of Oe(t))fl.call(t,l)&&ke(e,l,t[l]);return e},"y$1"),je=b((e,t)=>vl(e,gl(t)),"m$4"),G=b((e,t)=>xe(e,"name",{value:t,configurable:!0}),"u$2");const{Tangible:El,wp:_}=window,{useState:$l,useEffect:Se}=_.element,{allPostTypes:Te={}}=El.postQueryControlData||{},hl=G(({initialData:e,save:t,fields:l=[]})=>{const n=l.replace(/\s+/g,"").split(","),i=G(a=>{try{return JSON.parse(a)}catch(c){return{}}},"parseData"),[m,r]=$l(i(e));Se(()=>r(i(e)),[e]),Se(()=>{t(m)},[m]);const o=G(a=>m[a]&&m[a]!==""?m[a]:null,"getData"),d=G((a,c)=>r(u=>a!=="orderby"?je(Pe({},u),{[a]:c}):(c!=="meta_value"&&u.orderby_field&&delete u.orderby_field,c!=="meta_value_num"&&u.orderby_field_number&&delete u.orderby_field_number,je(Pe({},u),{[a]:c}))),"updateArgs"),v=_.element.createElement(Ne,{initialData:m.hasOwnProperty("taxonomies")?JSON.stringify(m.taxonomies):"{}",save:a=>d("taxonomies",a)});return _.element.createElement(_.element.Fragment,null,(n.includes("order")||n.includes("orderby"))&&_.element.createElement("div",{className:"tangible-logic-rule-group-box"},_.element.createElement("h4",{style:{fontWeight:"600"}},"Order"),_.element.createElement(nl,{getData:o,setData:d,includeOrder:n.includes("order"),includeOrderBy:n.includes("orderby")})),n.includes("type")&&_.element.createElement("div",{className:"tangible-logic-rule-group-box"},_.element.createElement("h4",{style:{fontWeight:"600"}},"Type"),_.element.createElement(ol,{initialLoopType:o("loopType")!==null?o("loopType"):"post",initialType:o("type"),setData:d,fields:Object.keys(Te).map(a=>({label:Te[a],value:a}))})),n.includes("taxonomy")&&_.element.createElement("div",{className:"tangible-logic-rule-group-box"},_.element.createElement("h4",{style:{fontWeight:"600"}},"Filter by Taxonomy"),v))},"PostQuery");var wl=Object.defineProperty,K=b((e,t)=>wl(e,"name",{value:t,configurable:!0}),"i$3");const{wp:N}=window,{element:{useEffect:J,useState:U}}=N,{ajax:_l}=window.Tangible,Cl=K(({handler:e,initialValue:t,fields:l=[]})=>{const[n,i]=U(t?JSON.parse(t):[]),[m,r]=U(""),[o,d]=U([]),[v,a]=U(!1),c="tangible-block-editor-control-ajax-select",u=l.multiple&&l.multiple==="true";J(()=>{u&&!Array.isArray(n)&&i([n])}),J(()=>{const g={search:m,field:l};_l(l.ajax_action_name,g).then(k=>d(k)).catch(k=>console.error(k))},[m]),J(()=>e(JSON.stringify(n)),[n]),J(()=>{v===!1&&r("")},[v]);const f=K(g=>{i(u?[...n,g]:[g])},"saveValue"),C=K(g=>{const k=n.filter(y=>y.value!==g.value);i([...k])},"removeValue"),p=Array.isArray(n)?n.map(g=>g.value):[],j=N.element.createElement("span",{className:"dashicons dashicons-no-alt"});return N.element.createElement("div",{className:v?`${c} is-open`:c},u&&Array.isArray(n)?N.element.createElement("ul",{className:c+"-choice"},n.map(g=>N.element.createElement("li",{id:g.name},N.element.createElement("button",{onClick:()=>C(g)},j)," ",N.element.createElement("span",null,g.label)," "))):"",N.element.createElement("input",{type:"text",className:c+"-input",onFocus:()=>a(!0),onBlur:()=>a(!1),onChange:g=>{r(g.target.value)},placeholder:l.placeholder?l.placeholder:"Select",value:!v&&!u&&n[0]?n[0].label:m}),v&&N.element.createElement("ul",{class:c+"-ul"},o?o.map(g=>u&&p.includes(g.value)?"":N.element.createElement("li",{id:g.name,onMouseDown:()=>f(g)},g.label!==""?g.label:N.element.createElement("i",null,"Untitled"))):""))},"AjaxSelect");var Ve=Object.defineProperty,Fe=Object.getOwnPropertySymbols,Nl=Object.prototype.hasOwnProperty,xl=Object.prototype.propertyIsEnumerable,De=b((e,t,l)=>t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"a$1"),Ae=b((e,t)=>{for(var l in t||(t={}))Nl.call(t,l)&&De(e,l,t[l]);if(Fe)for(var l of Fe(t))xl.call(t,l)&&De(e,l,t[l]);return e},"s$1"),Ol=b((e,t)=>Ve(e,"name",{value:t,configurable:!0}),"m$2");const kl=Ol((e,t,l,n)=>{switch(e.type){case"post_query":return wp.element.createElement(hl,{save:r=>t(JSON.stringify(r)),initialData:l,fields:n.include_fields?n.include_fields:"type, order, orderby"});case"taxonomy":return wp.element.createElement(Ne,Ae({save:r=>t(JSON.stringify(r)),initialData:l},n));case"select2":const i=n.multiple&&n.multiple==="true",m=typeof l=="string"&&i?l!==""?l.split(","):[]:l!==""?l:null;return wp.element.createElement(P,{labelForEmptyValue:"Choose...",options:n.options?Object.keys(n.options).map(r=>({value:r,label:n.options[r]})):[],onChange:r=>t(r!==null?Array.isArray(r)?r.join(","):r:""),multiSelect:i,value:m,style:{width:"100%"}});case"ajax_select":return wp.element.createElement(Cl,{handler:t,initialValue:l,fields:n});default:return wp.element.createElement(zt,Ae({handler:t,initialValue:l},n))}},"getControl");var Pl=Object.defineProperty,Q=b((e,t)=>Pl(e,"name",{value:t,configurable:!0}),"l");const{useState:X,useEffect:Re}=wp.element,jl=Q(e=>{const{config:t,field:l,builder:n,initialValue:i}=e,m=t.popup,[r,o]=X(n==="beaver-builder"),[d=i,v]=X(),[a=i,c]=X(),u=Q(k=>(m||c(k),v(k)),"save");Re(()=>e.save(a),[a]),Re(()=>{m&&r&&v(a)},[r]);const f={display:"flex",marginBottom:"10px"},C=wp.element.createElement(wp.element.Fragment,null,n==="elementor"&&!m?wp.element.createElement("label",{className:"elementor-control-title",style:f},l.label):"",wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${t.type}`},kl(t,u,a,l)));if(!m)return C;const p=Q(()=>o(!1),"cancel"),j=Q(()=>{o(!1),c(d)},"submit"),g=n!=="beaver-builder"?wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${n}`},n==="elementor"?wp.element.createElement("label",{className:"elementor-control-title",style:f},l.label):"",wp.element.createElement("button",{onClick:()=>o(!r),className:"components-button is-secondary tangible-control-btn"},"Open Settings")):"";return r?wp.element.createElement(wp.element.Fragment,null,g,wp.element.createElement(Ut,{submit:j,cancel:p,title:l.label},C)):g},"Control");var Sl=Object.defineProperty,Be=b((e,t)=>Sl(e,"name",{value:t,configurable:!0}),"g$1");const{wp:s,Tangible:Tl}=window,{components:{BaseControl:O,Button:D,ButtonGroup:Vl,DatePicker:Fl,GradientPicker:Dl,__experimentalGradientPicker:Al,Icon:A,SelectControl:Rl,TextControl:Bl,ToggleControl:Il},blockEditor:{MediaUpload:Ie,MediaUploadCheck:Le}}=s,{blockConfig:{controls:Me}}=Tl,Ge=Be(e=>({id:e.id,url:e.url}),"extractMediaFields"),Je=Be((e,t,l)=>{var n,i,m;const r=typeof e.default!="undefined"?e.default:!1,o=`tangible-block-editor-control-${e.type}`;switch(e.type){case"text":return s.element.createElement(Bl,{className:o,label:e.label,value:t,onChange:p=>l({[e.name]:p})});case"select":const d=Object.keys((n=e.options)!=null?n:[]).map(p=>({value:p,label:e.options[p]}));return s.element.createElement(Rl,{className:e.multiple?o+"-multiple":o,label:e.label,value:t!==""||!r?t:r,options:d,multiple:e.multiple,onChange:p=>l({[e.name]:p})});case"date":return s.element.createElement(O,{label:e.label,className:o},s.element.createElement(Fl,{currentDate:t?new Date(t):new Date,onChange:p=>l({[e.name]:p}),onMonthPreviewed:()=>!0}));case"color":return s.element.createElement(at,{label:e.label,value:t,defaultValue:r,alpha:e.alpha,onChange:p=>l({[e.name]:p}),className:o});case"align":return t===""&&r&&l({[e.name]:r}),s.element.createElement(O,{label:e.label,className:o},s.element.createElement(Vl,{style:{display:"block",marginTop:"10px"}},s.element.createElement(D,{variant:"secondary",onClick:()=>l({[e.name]:"left"})},s.element.createElement(A,{icon:"editor-alignleft"})),s.element.createElement(D,{variant:"secondary",onClick:()=>l({[e.name]:"center"})},s.element.createElement(A,{icon:"editor-aligncenter"})),s.element.createElement(D,{variant:"secondary",onClick:()=>l({[e.name]:"right"})},s.element.createElement(A,{icon:"editor-alignright"}))));case"image":return s.element.createElement(O,{className:o},s.element.createElement(Le,null,s.element.createElement(Ie,{onSelect:p=>l({[e.name]:Ge(p)}),allowedTypes:["image"],value:t,render:({open:p})=>s.element.createElement("div",null,s.element.createElement("p",null,e.label),s.element.createElement("img",{src:t.url,style:{width:"150px"}}),s.element.createElement(D,{isSecondary:!0,onClick:p,style:{display:"block",marginTop:"10px"}},s.element.createElement(A,{icon:"upload"}),"  Open Media Library"))})));case"editor":return s.element.createElement(O,{className:o},s.element.createElement("div",null,s.element.createElement("p",null,e.label),s.element.createElement(Mt,{value:t,updateVal:p=>l({[e.name]:p})})));case"switch":const v=e.hasOwnProperty("value_on")?e.value_on:"on",a=e.hasOwnProperty("value_off")?e.value_off:"off",c=e.hasOwnProperty("label_on")?e.label_on:"On",u=e.hasOwnProperty("label_off")?e.label_off:"Off";return s.element.createElement(O,{className:o},s.element.createElement(Il,{label:e.label,help:t===v?c:u,checked:t===v,onChange:p=>l({[e.name]:p?v:a})}));case"dimension":return s.element.createElement(ut,{className:o,value:t,label:e.label,units:e.units?e.units.replace(/ /g,"").split(","):"",defaultUnit:e.default_unit?e.default_unit:"px",onChange:p=>l({[e.name]:p}),multipleValues:e.multiple_values?e.multiple_values:!0});case"gallery":const f=[];return t&&t.forEach((p,j)=>{f[j]=p.id?p.id:p}),s.element.createElement(O,{className:o},s.element.createElement(Le,null,s.element.createElement(Ie,{onSelect:p=>l({[e.name]:p.map(Ge)}),allowedTypes:["image"],value:f,gallery:!0,multiple:!0,render:({open:p})=>s.element.createElement("div",null,s.element.createElement("p",null,e.label),s.element.createElement(D,{isSecondary:!0,onClick:p,style:{display:"block",marginTop:"10px"}},s.element.createElement(A,{icon:"upload"}),"  Open Media Library"))})));case"number":return s.element.createElement(O,{className:o},s.element.createElement("div",null,s.element.createElement("p",null,e.label),s.element.createElement($t,{className:o,value:t,min:e.min?e.min:!1,max:e.max?e.max:!1,onChange:p=>l({[e.name]:p})})));case"gradient":let C=Al||Dl;return s.element.createElement(O,{className:o},s.element.createElement("p",null,e.label),s.element.createElement(C,{value:t,onChange:p=>l({[e.name]:p}),gradients:[{name:"Vivid cyan blue to vivid purple",gradient:"linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)",slug:"vivid-cyan-blue-to-vivid-purple"},{name:"Light green cyan to vivid green cyan",gradient:"linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)",slug:"light-green-cyan-to-vivid-green-cyan"},{name:"Luminous vivid amber to luminous vivid orange",gradient:"linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)",slug:"luminous-vivid-amber-to-luminous-vivid-orange"}]}));case"repeater":return s.element.createElement(O,{className:o},s.element.createElement("p",null,e.label),s.element.createElement(Dt,{name:e.name,value:Array.isArray(t)?t:[],onChange:p=>l({[e.name]:p}),controls:(i=e.controls)!=null?i:[],structure:(m=e.item_structure)!=null?m:[]}))}if(Me[e.type]){const d=Me[e.type];return s.element.createElement(O,{label:e.label,className:o},s.element.createElement(jl,{config:d,initialValue:t,builder:"gutenberg",field:e,save:v=>l({[e.name]:v})}))}},"getField");var Ll=Object.defineProperty,H=b((e,t)=>Ll(e,"name",{value:t,configurable:!0}),"o");const{wp:w,Tangible:Ml}=window,{blockEditor:{InspectorControls:Gl},blocks:{registerBlockType:Jl},components:{Panel:Ul,PanelBody:Ql,PanelRow:Hl},element:{useState:Wl,createContext:ql},i18n:{__:tn},serverSideRender:zl}=w,{blockConfig:R,moduleLoader:Kl,ServerSideRender:Xl=zl}=Ml,Ue=ql(),Yl=H(e=>{const t=`${R.package}/${e.universal_id?"block-"+e.universal_id:e.name}`;Jl(t,{title:e.label,description:e.description?e.description:"",category:R.category,sections:e.sections,icon:R.icon,edit(l){const{block_id:n}=l.attributes,[i,m]=Wl(e.tabs[0]),r=R.conditions[e.universal_id?e.universal_id:e.content_id],o=new B(r.general),d=H(a=>Number.isInteger(l.attributes[a])?l.attributes[a].toString():l.attributes[a],"getFieldValue"),v=H(a=>o.evaluateConditions(a,d),"isVisible");return n||l.setAttributes({block_id:l.clientId}),l.attributes.current_post_id||l.setAttributes({current_post_id:R.current_post_id}),w.element.createElement(w.element.Fragment,null,w.element.createElement(Gl,null,e.tabs.length>1&&w.element.createElement("div",{className:"tangible-block-editor-tabs"},e.tabs.map(a=>(a.name===i.name||v(a.conditions))&&w.element.createElement("div",{key:`tab-${a.name}`,className:"tangible-block-editor-tab components-button edit-post-sidebar__panel-tab"+(a.name===i.name?" is-active":""),onClick:()=>m(a)},w.element.createElement("p",null,a.label==="default"?"Content":a.label)))),w.element.createElement(Ue.Provider,{value:{id:n,conditions:r}},i.sections.map((a,c)=>v(a.conditions)&&w.element.createElement(Ul,{key:`${a.name}-panel-${c}`,className:"tangible-block-editor-section"},w.element.createElement(Ql,{title:a.label,initialOpen:c===0},a.fields.map(u=>v(u.conditions)&&w.element.createElement(Hl,null,Je(u,l.attributes[u.name],l.setAttributes)))))))),w.element.createElement(Xl,{block:t,attributes:l.attributes,httpMethod:"POST",EmptyResponsePlaceholder:Qe,LoadingResponsePlaceholder:Qe,onFetchResponseRendered:a=>{Kl(a)}}))},save(){return null}})},"createBlock"),Qe=H(()=>w.element.createElement("div",{className:"tangible-loop-block"},"\xA0"),"EmptyLoopBlock"),{blocks:Zl}=window.Tangible;Zl.map(e=>Yl(e))})();
//# sourceMappingURL=gutenberg-integration.min.js.map
