var Hl=Object.defineProperty;var b=(H,W)=>Hl(H,"name",{value:W,configurable:!0});(function(){"use strict";(function(){const e={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,e);return}}catch(t){}globalThis.process={env:e}})();var H=Object.defineProperty,W=b((e,t)=>H(e,"name",{value:t,configurable:!0}),"l$7");class q{constructor(t){this.conditionsMap=t||[],this.getPreviousLevels=this.getPreviousLevels.bind(this),this.getCondition=this.getCondition.bind(this)}evaluateConditions(t,l){let n=!0;if(!t||!Array.isArray(t))return n;for(const r of t){const i=this.getCondition(r);if(!this.evaluateCondition(i,l))return!1}return n}getCondition(t){const l=t.split("-"),n=parseInt(l[0]),r=parseInt(l[1]);return{number:n,level:r,current:this.conditionsMap[n][r],previousLevels:this.getPreviousLevels(n,r)}}getPreviousLevels(t,l){if(l===0)return[];let n=0;const r=[];for(;n<l;)r.push(this.conditionsMap[t][n]),n++;return r}extractComparisons(t){const l=[];for(const n in t)if(!(n==="compare"||n.slice(0,8)==="compare_"||n==="value"||n.slice(0,6)==="value_")){if(n==="control"||n.slice(0,8)==="control_"){const r=t[n],[i,a=0]=n.split("_");l.push({field:r,value:t[`value${a?"_"+a:""}`],compare:t[`compare${a?"_"+a:""}`]});continue}l.push({field:n,value:t[n]})}return l}evaluateCondition(t,l){let n=!0;for(const i of t.previousLevels){const a=this.extractComparisons(i);for(const{field:o,value:u,compare:s}of a){const c=l(o);if(this.compare(c,u,s))return!1}}const r=this.extractComparisons(t.current);for(const{field:i,value:a,compare:o}of r){const u=l(i);if(!this.compare(u,a,o))return!1}return n}compare(t,l,n="is"){let r=!1;switch(n){case"is":case"equal":case"not":default:r=t===l,n==="not"&&(r=!r);break}return r}}b(q,"u$8"),W(q,"ControlVisibility");var Ge=Object.defineProperty,S=b((e,t)=>Ge(e,"name",{value:t,configurable:!0}),"e$1");const Je=S(e=>/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(e)||/^([A-Fa-f0-9]{3,4}){1,2}$/.test(e),"isHex"),Ue=S((e,t)=>{const l=Math.floor((e.length-1)/3),n=Qe(e.slice(1),l),[r,i,a,o]=n.map(He);return`rgba(${r}, ${i}, ${a}, ${We(o)})`},"hexToRGBA"),Qe=S((e,t)=>e.match(new RegExp(`.{${t}}`,"g")),"getChunksFromString"),He=S(e=>parseInt(e.repeat(2/e.length),16),"convertHexUnitTo256"),We=S(e=>typeof e!="undefined"?parseFloat(e/255).toFixed(2):1,"getAlphafloat");var qe=Object.defineProperty,ze=b((e,t)=>qe(e,"name",{value:t,configurable:!0}),"n$5");const{wp:T}=window,{components:{BaseControl:Ke,ColorPicker:Xe},element:{useEffect:Ye}}=T,Ze=ze(e=>{const t=e.value===""&&e.defaultValue!==!1?Je(e.defaultValue)?Ue(e.defaultValue):e.defaultValue:e.value;return Ye(()=>e.onChange(t),[]),T.element.createElement(Ke,{className:e.className},T.element.createElement("div",null,T.element.createElement("p",null,e.label),T.element.createElement(Xe,{style:{display:"block",marginTop:"10px"},color:t,onChangeComplete:l=>{const n=e.alpha===!1?`rgb(${l.rgb.r}, ${l.rgb.g}, ${l.rgb.b})`:`rgba(${l.rgb.r}, ${l.rgb.g}, ${l.rgb.b}, ${l.rgb.a})`;e.onChange(n)},disableAlpha:e.alpha===!1||e.alpha==="false"})))},"Color");var et=Object.defineProperty,tt=b((e,t)=>et(e,"name",{value:t,configurable:!0}),"u$7");const{wp:B}=window,{components:{BaseControl:lt,__experimentalBoxControl:nt,SelectControl:at},element:{useEffect:rt,useState:X}}=B,ot=tt(e=>{const[t,l]=X(e.value),[n,r]=X(e.value.unit?e.value.unit:e.defaultUnit),i=e.multipleValues!=="false"?e.className:`${e.className} ${e.className}-single-value`,a=[];for(let o in e.units)a.push({value:e.units[o],label:e.units[o]});return rt(()=>{const o={top:t.top?t.top.replace(/[^0-9]/g,""):"",right:t.right?t.right.replace(/[^0-9]/g,""):"",bottom:t.bottom?t.bottom.replace(/[^0-9]/g,""):"",left:t.left?t.left.replace(/[^0-9]/g,""):"",unit:n};e.onChange(o)},[t,n]),B.element.createElement(lt,{className:i},B.element.createElement(nt,{label:e.label,values:e.multipleValues!=="false"?t:{top:t.top},units:[{value:"px",label:"px"}],onChange:o=>l(o),sides:e.multipleValues!=="false"?[]:["top"]}),B.element.createElement(at,{onChange:o=>r(o),value:n,label:"Unit",options:a}))},"Dimension");var Y=Object.defineProperty,ct=Object.defineProperties,it=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,mt=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,ee=b((e,t,l)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"l$4"),te=b((e,t)=>{for(var l in t||(t={}))mt.call(t,l)&&ee(e,l,t[l]);if(Z)for(var l of Z(t))st.call(t,l)&&ee(e,l,t[l]);return e},"n$3"),ut=b((e,t)=>ct(e,it(t)),"v$3"),pt=b((e,t)=>Y(e,"name",{value:t,configurable:!0}),"i$a");const{wp:le}=window,{element:{useEffect:dt,useState:bt}}=le,gt=pt(e=>{const[t,l]=bt(e.value?e.value:0);return dt(()=>{e.onChange(t)},[t]),le.element.createElement("input",ut(te(te({type:"number",value:t},e.min&&{min:e.min}),e.max&&{max:e.max}),{onChange:n=>{l(n.target.value!==""?parseInt(n.target.value):0)}}))},"Number");var vt=Object.defineProperty,yt=b((e,t)=>vt(e,"name",{value:t,configurable:!0}),"l$3");const ft=yt((e,t)=>{var l;switch(t.type){case"add":const n={};for(const r of t.controls)n[r.name]=(l=r.default)!=null?l:"";return[...e,n];case"remove":return[...e.slice(0,t.item),...e.slice(t.item+1)];case"update":return e[t.item][t.control]=t.value,[...e];case"clear":return[];default:return e}},"reducer");var Et=Object.defineProperty,ht=b((e,t)=>Et(e,"name",{value:t,configurable:!0}),"u$6");const{wp:E}=window,{components:{Button:L,ButtonGroup:ne,Card:$t,CardBody:wt,CardHeader:_t,CardFooter:Ct},element:{useState:Nt,useReducer:xt,useEffect:Ot}}=E,kt=ht(e=>{const[t,l]=xt(ft,e.value),[n,r]=Nt(!1);return Ot(()=>e.onChange([...t]),[t]),E.element.createElement(E.element.Fragment,null,t.map((i,a)=>E.element.createElement($t,null,E.element.createElement(_t,null,E.element.createElement("strong",null,"Item ",a+1)),n===a&&e.controls.map(o=>{var u;return E.element.createElement(wt,null,Le(o,(u=i[o.name])!=null?u:"",s=>l({type:"update",item:a,control:o.name,value:s[o.name]})))}),E.element.createElement(Ct,null,E.element.createElement(ne,null,E.element.createElement(L,{variant:"secondary",onClick:()=>r(a!==n?a:!1)},n!==a?"Edit":"Close"),E.element.createElement(L,{variant:"secondary",onClick:()=>l({type:"remove",item:a}),isDestructive:!0},"Delete"))))),E.element.createElement(ne,{style:{display:"flex",marginTop:"10px",justifyContent:"right"}},E.element.createElement(L,{variant:"secondary",onClick:()=>l({type:"add",controls:e.controls})},"Add"),E.element.createElement(L,{variant:"secondary",onClick:()=>l({type:"clear"}),isDestructive:!0},"Clear")))},"Repeater");var Pt=Object.defineProperty,jt=b((e,t)=>Pt(e,"name",{value:t,configurable:!0}),"u$5");const{wp:ae}=window,{element:{useEffect:St,useRef:Tt,useState:Ft}}=ae,Vt=jt(e=>{const t=Tt(null),[l,n]=Ft(e.value);return St(()=>{tinyMCE.init({target:t.current,setup:function(r){r.on("input",function(i){e.updateVal(r.getContent())}),r.on("ExecCommand",function(i){e.updateVal(r.getContent())})}})},[]),ae.element.createElement("textarea",{ref:t},l)},"TextArea");var Dt=Object.defineProperty,At=b((e,t)=>Dt(e,"name",{value:t,configurable:!0}),"i$7");const Rt=At(e=>wp.element.createElement("div",{id:"tangible-logic-root",className:"tangible-logic-open"},wp.element.createElement("div",{className:"tangible-logic-modal"},wp.element.createElement("div",{className:"tangible-logic-header"},wp.element.createElement("div",{className:"tangible-logic-title"},e.title?e.title:""),wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button has-icon",type:"button","aria-label":"Close dialog",onClick:e.cancel},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),wp.element.createElement("div",{className:"tangible-logic-rule-group"},e.children),wp.element.createElement("div",{className:"tangible-logic-actions tangible-logic-clear"},wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button is-tertiary",type:"button",onClick:e.cancel},"Cancel"),wp.element.createElement("button",{id:"logic-button-add-logic",className:"tangible-components-button is-primary",type:"button",onClick:e.submit},"Save")))),"Modal");var Bt=Object.defineProperty,Lt=b((e,t)=>Bt(e,"name",{value:t,configurable:!0}),"n$2");const{wp:re}=window,{useState:It,useEffect:Mt}=re.element,Gt=Lt(e=>{const[t,l]=It(e.initialValue);return Mt(()=>e.handler(t),[t]),re.element.createElement("input",{type:"text",value:t,onChange:n=>l(n.target.value)})},"Text");var oe=Object.defineProperty,ce=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable,ie=b((e,t,l)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"a$4"),Qt=b((e,t)=>{for(var l in t||(t={}))Jt.call(t,l)&&ie(e,l,t[l]);if(ce)for(var l of ce(t))Ut.call(t,l)&&ie(e,l,t[l]);return e},"f$2"),Ht=b((e,t)=>oe(e,"name",{value:t,configurable:!0}),"g$3");const{jQuery:Wt}=window,k=Ht(({labelForEmptyValue:e="",options:t=[],value:l="",onChange:n,multiSelect:r,style:i})=>{const a=wp.element.useRef();if(wp.element.useEffect(()=>{if(!a.current)return;const o=Wt(a.current);a.current.$el=o,n(l),o.tangibleSelect({minimumResultsForSearch:5}),r&&(o.val(l),o.trigger("change")),o.on("change",function(s){if(!r&&!a.current._silentChange){n(s.target.value);return}if(!a.current||a.current._silentChange)return;const c=o.select2("data").map(p=>p.id);n(c)});const u=a.current.select2=o.data("select2");return()=>{u&&u.destroy()}},[]),a.current&&a.current.$el)if(r){const o=a.current.$el.val();l.length!==o.length&&t.length&&setImmediate(function(){!a.current||!a.current.$el||(a.current.$el.val(l),a.current.$el.trigger("change"))})}else a.current.value!==l&&(a.current._silentChange=!0,a.current.$el.val(l),a.current.$el.trigger("change"),setImmediate(function(){a.current._silentChange=!1}));return wp.element.createElement("select",{ref:a,autoComplete:"off",multiple:r,style:Qt({display:"none",width:"160px"},i)},e&&wp.element.createElement("option",{value:"",disabled:!0,selected:l==null},e),t.map((o,u)=>wp.element.createElement("option",{key:`option-${u}`,value:o.value,selected:o.value===l},o.label)))},"Select");var qt=Object.defineProperty,zt=b((e,t)=>qt(e,"name",{value:t,configurable:!0}),"a$3");const Kt=zt(({getData:e,setData:t,includeOrder:l,includeOrderBy:n})=>{const r=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"order"},"Order"),wp.element.createElement(k,{labelForEmptyValue:"Choose Order",options:[{label:"ASC",value:"asc"},{label:"DESC",value:"desc"}],value:e("order"),style:{width:"100%"},onChange:u=>t("order",u)}))),i=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby"},"Order by"),wp.element.createElement(k,{labelForEmptyValue:"Order by",options:[{label:"Title",value:"title"},{label:"ID",value:"id"},{label:"Author",value:"author"},{label:"Name",value:"name"},{label:"Type",value:"type"},{label:"Date",value:"date"},{label:"Modified",value:"modified"},{label:"Random",value:"random"},{label:"Comment count",value:"comment_count"},{label:"Relevance",value:"relevance"},{label:"Menu",value:"menu"},{label:"Custom value",value:"meta_value"},{label:"Custom value number",value:"meta_value_num"}],value:e("orderby"),style:{width:"100%"},onChange:u=>t("orderby",u)}))),a=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field"},"Order by custom field"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",name:"orderby-field",id:"orderby_field",onChange:u=>t("orderby_field",u.target.value),placeholder:"Enter field key",value:e("orderby_field")}))),o=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field_number"},"Order by custom field with numeric value"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",id:"orderby_field_number",name:"orderby-field-number",onChange:u=>t("orderby_field_number",u.target.value),placeholder:"Enter field key",value:e("orderby_field_number")})));return wp.element.createElement("div",{className:"tangible-logic-rule"},l&&r,n&&i,e("orderby")==="meta_value"&&a,e("orderby")==="meta_value_num"&&o)},"Order");var Xt=Object.defineProperty,Yt=b((e,t)=>Xt(e,"name",{value:t,configurable:!0}),"p$3");const{useState:me,useEffect:se}=wp.element,Zt=Yt(({initialLoopType:e,initialType:t,setData:l,fields:n})=>{const[r,i]=me(e||"post"),[a,o]=me(t);se(()=>l("loopType",r),[r]),se(()=>l("type",a),[a]);const u=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label"},"Content type"),wp.element.createElement(k,{labelForEmptyValue:"Choose a Type",options:[{label:"Post",value:"post"}],value:r,onChange:c=>i(c),style:{width:"100%"}}))),s=r==="post"?wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"post_type"},"Fields"),wp.element.createElement(k,{labelForEmptyValue:"Choose Fields",value:a?a.split(","):["null"],options:n,multiSelect:!0,style:{width:"100%"},onChange:c=>c=="null"?o(""):o(c.toString())}))):"";return wp.element.createElement("div",{className:"tangible-logic-rule"},u,s)},"Type");var ue=Object.defineProperty,el=Object.defineProperties,tl=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,ll=Object.prototype.hasOwnProperty,nl=Object.prototype.propertyIsEnumerable,de=b((e,t,l)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"h$3"),be=b((e,t)=>{for(var l in t||(t={}))ll.call(t,l)&&de(e,l,t[l]);if(pe)for(var l of pe(t))nl.call(t,l)&&de(e,l,t[l]);return e},"u$3"),ge=b((e,t)=>el(e,tl(t)),"b$1"),F=b((e,t)=>ue(e,"name",{value:t,configurable:!0}),"m$4");const{Tangible:al,wp:f}=window,{useState:ve,useEffect:rl}=f.element,{allTaxonomies:ye={}}=al.postQueryControlData,ol=F(({value:e,initialData:t,save:l,showBtn:n,remove:r})=>{const i=e===1,a=Object.keys(ye),[o,u]=ve(t);rl(()=>{l(o)},[o]);const s=F(y=>{const N=ye[y];if(N==null||N.length===0)return[];let j=[];return N.forEach(Me=>{j.push({label:Me.name,value:Me.slug})}),j},"getTerms"),c=F(y=>o.hasOwnProperty(y)?o[y]===""?null:o[y]:null,"getParam"),p=F(y=>{d(N=>[]),y.length>0&&d(N=>y)},"updateTerms"),g=F((y,N)=>u(j=>ge(be({},j),{[y]:N})),"updateParam"),[$,d]=ve(o.hasOwnProperty("taxonomy")?s(o.taxonomy):[]),P=f.element.createElement("div",{className:"tangible-components-control"},f.element.createElement("div",{className:"tangible-components-control__field"},f.element.createElement("label",{className:"tangible-components-control__label"},"Taxonomy ",!i&&e),f.element.createElement(k,{style:{width:"100%"},labelForEmptyValue:`Taxonomy ${i?"":e}`,options:a.map(y=>({label:y,value:y})),value:c("taxonomy"),onChange:y=>{g("terms",""),g("taxonomy",y);const N=s(y);p(N)}}))),R=f.element.createElement("div",{className:"tangible-components-control"},f.element.createElement("div",{className:"tangible-components-control__field"},f.element.createElement("label",{className:"tangible-components-control__label"},"Compare ",!i&&e),f.element.createElement(k,{style:{width:"100%"},labelForEmptyValue:`Compare ${i?"":e}`,options:[{label:"In",value:"in"},{label:"Not",value:"not"},{label:"And",value:"and"},{label:"Exists",value:"exists"},{label:"Not exists",value:"not exists"}],value:o.taxonomy_compare,onChange:y=>g("taxonomy_compare",y)}))),v=c("terms"),O=f.element.createElement("div",{className:"tangible-components-control"},f.element.createElement("div",{className:"tangible-components-control__field"},f.element.createElement("label",{className:"tangible-components-control__label"},"Term ",!i&&e),f.element.createElement(k,{style:{width:"100%"},labelForEmptyValue:`Terms ${i?"":e}`,multiSelect:!0,options:$,value:v?v.split(","):["null"],onChange:y=>u(N=>{let j="";return y!="null"&&(j=y.toString()),ge(be({},N),{terms:j})})})));return f.element.createElement("div",{className:"tangible-logic-rule"},P,R,O,n&&f.element.createElement("button",{id:"logic-button-rule",className:"tangible-components-button is-secondary",type:"button",onClick:r},"Remove"))},"QueryGroup");var cl=Object.defineProperty,I=b((e,t)=>cl(e,"name",{value:t,configurable:!0}),"s$3");const{wp:h}=window,{useState:fe,useEffect:Ee}=h.element,he=3,$e=I(({initialData:e,save:t})=>{const[l,n]=fe([]),[r,i]=fe("");Ee(()=>{if(!e)return;const c=JSON.parse(e),p=[];if(c.taxonomy_relation&&i(c.taxonomy_relation),!c.taxonomy)return;let g="",$=1;for(;c[`taxonomy${g}`]&&$<=he&&(g=$!==1?`_${$}`:"",!!c[`taxonomy${g}`]);)p.push({taxonomy:c[`taxonomy${g}`],terms:c[`terms${g}`],taxonomy_compare:c[`taxonomy_compare${g}`]}),$++;n(p)},[]),Ee(()=>{const c={};r&&(c.taxonomy_relation=r);for(let p=0;p<l.length;p++){const g=p!==0?`_${p+1}`:"";c[`taxonomy${g}`]=l[p].taxonomy,c[`terms${g}`]=l[p].terms,c[`taxonomy_compare${g}`]=l[p].taxonomy_compare}t(c)},[l,r]);const a=h.element.createElement("div",{className:"tangible-logic-rule tangible-logic-clear"},h.element.createElement("div",{className:"tangible-components-control"},h.element.createElement("div",{className:"tangible-components-control__field"},h.element.createElement("label",{className:"tangible-components-control__label"},"Relation"),h.element.createElement(k,{style:{width:"100%"},labelForEmptyValue:"Choose Relation",options:[{label:"And",value:"and"},{label:"Or",value:"or"}],value:r,onChange:c=>i(c)})))),o=I(()=>{n([...l,{taxonomy:"",terms:"",taxonomy_compare:""}])},"addRow"),u=I((c,p)=>{l[c]=p,n([...l])},"saveRow"),s=I(c=>{n([...l.slice(0,c),...l.slice(c+1)])},"removeRow");return h.element.createElement("div",{className:"tangible-logic-rule-group-box-bordered"},l.length>1&&h.element.createElement("div",{className:"tangible-logic-taxonomy-group"},a),h.element.createElement("div",{className:"tangible-logic-taxonomy-group"},l.length>0&&l.map((c,p)=>h.element.createElement(ol,{key:p+JSON.stringify(c),value:p+1,initialData:c,showBtn:!0,save:g=>u(p,g),remove:()=>s(p)}))),l.length<he&&h.element.createElement("div",{className:"tangible-logic-group-actions"},h.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:o},"Add taxonomy filter"),h.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:()=>n([])},"Remove")))},"Taxonomy");var we=Object.defineProperty,il=Object.defineProperties,ml=Object.getOwnPropertyDescriptors,_e=Object.getOwnPropertySymbols,sl=Object.prototype.hasOwnProperty,ul=Object.prototype.propertyIsEnumerable,Ce=b((e,t,l)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"g$2"),Ne=b((e,t)=>{for(var l in t||(t={}))sl.call(t,l)&&Ce(e,l,t[l]);if(_e)for(var l of _e(t))ul.call(t,l)&&Ce(e,l,t[l]);return e},"y$1"),xe=b((e,t)=>il(e,ml(t)),"m$3"),M=b((e,t)=>we(e,"name",{value:t,configurable:!0}),"u$2");const{Tangible:pl,wp:w}=window,{useState:dl,useEffect:Oe}=w.element,{allPostTypes:ke={}}=pl.postQueryControlData||{},bl=M(({initialData:e,save:t,fields:l=[]})=>{const n=l.replace(/\s+/g,"").split(","),r=M(c=>{try{return JSON.parse(c)}catch(p){return{}}},"parseData"),[i,a]=dl(r(e));Oe(()=>a(r(e)),[e]),Oe(()=>{t(i)},[i]);const o=M(c=>i[c]&&i[c]!==""?i[c]:null,"getData"),u=M((c,p)=>a(g=>c!=="orderby"?xe(Ne({},g),{[c]:p}):(p!=="meta_value"&&g.orderby_field&&delete g.orderby_field,p!=="meta_value_num"&&g.orderby_field_number&&delete g.orderby_field_number,xe(Ne({},g),{[c]:p}))),"updateArgs"),s=w.element.createElement($e,{initialData:i.hasOwnProperty("taxonomies")?JSON.stringify(i.taxonomies):"{}",save:c=>u("taxonomies",c)});return w.element.createElement(w.element.Fragment,null,(n.includes("order")||n.includes("orderby"))&&w.element.createElement("div",{className:"tangible-logic-rule-group-box"},w.element.createElement("h4",{style:{fontWeight:"600"}},"Order"),w.element.createElement(Kt,{getData:o,setData:u,includeOrder:n.includes("order"),includeOrderBy:n.includes("orderby")})),n.includes("type")&&w.element.createElement("div",{className:"tangible-logic-rule-group-box"},w.element.createElement("h4",{style:{fontWeight:"600"}},"Type"),w.element.createElement(Zt,{initialLoopType:o("loopType")!==null?o("loopType"):"post",initialType:o("type"),setData:u,fields:Object.keys(ke).map(c=>({label:ke[c],value:c}))})),n.includes("taxonomy")&&w.element.createElement("div",{className:"tangible-logic-rule-group-box"},w.element.createElement("h4",{style:{fontWeight:"600"}},"Filter by Taxonomy"),s))},"PostQuery");var gl=Object.defineProperty,z=b((e,t)=>gl(e,"name",{value:t,configurable:!0}),"i$3");const{wp:C}=window,{element:{useEffect:G,useState:J}}=C,{ajax:vl}=window.Tangible,yl=z(({handler:e,initialValue:t,fields:l=[]})=>{const[n,r]=J(t?JSON.parse(t):[]),[i,a]=J(""),[o,u]=J([]),[s,c]=J(!1),p="tangible-block-editor-control-ajax-select",g=l.multiple&&l.multiple==="true";G(()=>{g&&!Array.isArray(n)&&r([n])}),G(()=>{const v={search:i,field:l};vl(l.ajax_action_name,v).then(O=>u(O)).catch(O=>console.error(O))},[i]),G(()=>e(JSON.stringify(n)),[n]),G(()=>{s===!1&&a("")},[s]);const $=z(v=>{r(g?[...n,v]:[v])},"saveValue"),d=z(v=>{const O=n.filter(y=>y.value!==v.value);r([...O])},"removeValue"),P=Array.isArray(n)?n.map(v=>v.value):[],R=C.element.createElement("span",{className:"dashicons dashicons-no-alt"});return C.element.createElement("div",{className:s?`${p} is-open`:p},g&&Array.isArray(n)?C.element.createElement("ul",{className:p+"-choice"},n.map(v=>C.element.createElement("li",{id:v.name},C.element.createElement("button",{onClick:()=>d(v)},R)," ",C.element.createElement("span",null,v.label)," "))):"",C.element.createElement("input",{type:"text",className:p+"-input",onFocus:()=>c(!0),onBlur:()=>c(!1),onChange:v=>{a(v.target.value)},placeholder:l.placeholder?l.placeholder:"Select",value:!s&&!g&&n[0]?n[0].label:i}),s&&C.element.createElement("ul",{class:p+"-ul"},o?o.map(v=>g&&P.includes(v.value)?"":C.element.createElement("li",{id:v.name,onMouseDown:()=>$(v)},v.label!==""?v.label:C.element.createElement("i",null,"Untitled"))):""))},"AjaxSelect");var Pe=Object.defineProperty,je=Object.getOwnPropertySymbols,fl=Object.prototype.hasOwnProperty,El=Object.prototype.propertyIsEnumerable,Se=b((e,t,l)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,"a$1"),Te=b((e,t)=>{for(var l in t||(t={}))fl.call(t,l)&&Se(e,l,t[l]);if(je)for(var l of je(t))El.call(t,l)&&Se(e,l,t[l]);return e},"s$1"),hl=b((e,t)=>Pe(e,"name",{value:t,configurable:!0}),"m$1");const $l=hl((e,t,l,n)=>{switch(e.type){case"post_query":return wp.element.createElement(bl,{save:a=>t(JSON.stringify(a)),initialData:l,fields:n.include_fields?n.include_fields:"type, order, orderby"});case"taxonomy":return wp.element.createElement($e,Te({save:a=>t(JSON.stringify(a)),initialData:l},n));case"select2":const r=n.multiple&&n.multiple==="true",i=typeof l=="string"&&r?l!==""?l.split(","):[]:l!==""?l:null;return wp.element.createElement(k,{labelForEmptyValue:"Choose...",options:n.options?Object.keys(n.options).map(a=>({value:a,label:n.options[a]})):[],onChange:a=>t(a!==null?Array.isArray(a)?a.join(","):a:""),multiSelect:r,value:i,style:{width:"100%"}});case"ajax_select":return wp.element.createElement(yl,{handler:t,initialValue:l,fields:n});default:return wp.element.createElement(Gt,Te({handler:t,initialValue:l},n))}},"getControl");var wl=Object.defineProperty,U=b((e,t)=>wl(e,"name",{value:t,configurable:!0}),"l");const{useState:K,useEffect:Fe}=wp.element,_l=U(e=>{const{config:t,field:l,builder:n,initialValue:r}=e,i=t.popup,[a,o]=K(n==="beaver-builder"),[u=r,s]=K(),[c=r,p]=K(),g=U(O=>(i||p(O),s(O)),"save");Fe(()=>e.save(c),[c]),Fe(()=>{i&&a&&s(c)},[a]);const $={display:"flex",marginBottom:"10px"},d=wp.element.createElement(wp.element.Fragment,null,n==="elementor"&&!i?wp.element.createElement("label",{className:"elementor-control-title",style:$},l.label):"",wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${t.type}`},$l(t,g,c,l)));if(!i)return d;const P=U(()=>o(!1),"cancel"),R=U(()=>{o(!1),p(u)},"submit"),v=n!=="beaver-builder"?wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${n}`},n==="elementor"?wp.element.createElement("label",{className:"elementor-control-title",style:$},l.label):"",wp.element.createElement("button",{onClick:()=>o(!a),className:"components-button is-secondary tangible-control-btn"},"Open Settings")):"";return a?wp.element.createElement(wp.element.Fragment,null,v,wp.element.createElement(Rt,{submit:R,cancel:P,title:l.label},d)):v},"Control");var Cl=Object.defineProperty,Ve=b((e,t)=>Cl(e,"name",{value:t,configurable:!0}),"g");const{wp:m,Tangible:Nl}=window,{components:{BaseControl:x,Button:V,ButtonGroup:xl,DatePicker:Ol,GradientPicker:kl,__experimentalGradientPicker:Pl,Icon:D,SelectControl:jl,TextControl:Sl,ToggleControl:Tl},blockEditor:{MediaUpload:De,MediaUploadCheck:Ae}}=m,{blockConfig:{controls:Re}}=Nl,Be=Ve(e=>({id:e.id,url:e.url}),"extractMediaFields"),Le=Ve((e,t,l)=>{var n,r;const i=typeof e.default!="undefined"?e.default:!1,a=`tangible-block-editor-control-${e.type}`;switch(e.type){case"text":return m.element.createElement(Sl,{className:a,label:e.label,value:t,onChange:d=>l({[e.name]:d})});case"select":const o=Object.keys((n=e.options)!=null?n:[]).map(d=>({value:d,label:e.options[d]}));return m.element.createElement(jl,{className:e.multiple?a+"-multiple":a,label:e.label,value:t!==""||!i?t:i,options:o,multiple:e.multiple,onChange:d=>l({[e.name]:d})});case"date":return m.element.createElement(x,{label:e.label,className:a},m.element.createElement(Ol,{currentDate:t?new Date(t):new Date,onChange:d=>l({[e.name]:d}),onMonthPreviewed:()=>!0}));case"color":return m.element.createElement(Ze,{label:e.label,value:t,defaultValue:i,alpha:e.alpha,onChange:d=>l({[e.name]:d}),className:a});case"align":return t===""&&i&&l({[e.name]:i}),m.element.createElement(x,{label:e.label,className:a},m.element.createElement(xl,{style:{display:"block",marginTop:"10px"}},m.element.createElement(V,{variant:"secondary",onClick:()=>l({[e.name]:"left"})},m.element.createElement(D,{icon:"editor-alignleft"})),m.element.createElement(V,{variant:"secondary",onClick:()=>l({[e.name]:"center"})},m.element.createElement(D,{icon:"editor-aligncenter"})),m.element.createElement(V,{variant:"secondary",onClick:()=>l({[e.name]:"right"})},m.element.createElement(D,{icon:"editor-alignright"}))));case"image":return m.element.createElement(x,{className:a},m.element.createElement(Ae,null,m.element.createElement(De,{onSelect:d=>l({[e.name]:Be(d)}),allowedTypes:["image"],value:t,render:({open:d})=>m.element.createElement("div",null,m.element.createElement("p",null,e.label),m.element.createElement("img",{src:t.url,style:{width:"150px"}}),m.element.createElement(V,{isSecondary:!0,onClick:d,style:{display:"block",marginTop:"10px"}},m.element.createElement(D,{icon:"upload"}),"  Open Media Library"))})));case"editor":return m.element.createElement(x,{className:a},m.element.createElement("div",null,m.element.createElement("p",null,e.label),m.element.createElement(Vt,{value:t,updateVal:d=>l({[e.name]:d})})));case"switch":const u=e.hasOwnProperty("value_on")?e.value_on:"on",s=e.hasOwnProperty("value_off")?e.value_off:"off",c=e.hasOwnProperty("label_on")?e.label_on:"On",p=e.hasOwnProperty("label_off")?e.label_off:"Off";return m.element.createElement(x,{className:a},m.element.createElement(Tl,{label:e.label,help:t===u?c:p,checked:t===u,onChange:d=>l({[e.name]:d?u:s})}));case"dimension":return m.element.createElement(ot,{className:a,value:t,label:e.label,units:e.units?e.units.replace(/ /g,"").split(","):"",defaultUnit:e.default_unit?e.default_unit:"px",onChange:d=>l({[e.name]:d}),multipleValues:e.multiple_values?e.multiple_values:!0});case"gallery":let g=[];return t&&t.forEach((d,P)=>{g[P]=d.id?d.id:d}),m.element.createElement(x,{className:a},m.element.createElement(Ae,null,m.element.createElement(De,{onSelect:d=>l({[e.name]:d.map(Be)}),allowedTypes:["image"],value:g,gallery:!0,multiple:!0,render:({open:d})=>m.element.createElement("div",null,m.element.createElement("p",null,e.label),m.element.createElement(V,{isSecondary:!0,onClick:d,style:{display:"block",marginTop:"10px"}},m.element.createElement(D,{icon:"upload"}),"  Open Media Library"))})));case"number":return m.element.createElement(x,{className:a},m.element.createElement("div",null,m.element.createElement("p",null,e.label),m.element.createElement(gt,{className:a,value:t,min:e.min?e.min:!1,max:e.max?e.max:!1,onChange:d=>l({[e.name]:d})})));case"gradient":let $=Pl||kl;return m.element.createElement(x,{className:a},m.element.createElement("p",null,e.label),m.element.createElement($,{value:t,onChange:d=>l({[e.name]:d}),gradients:[{name:"Vivid cyan blue to vivid purple",gradient:"linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)",slug:"vivid-cyan-blue-to-vivid-purple"},{name:"Light green cyan to vivid green cyan",gradient:"linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)",slug:"light-green-cyan-to-vivid-green-cyan"},{name:"Luminous vivid amber to luminous vivid orange",gradient:"linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)",slug:"luminous-vivid-amber-to-luminous-vivid-orange"}]}));case"repeater":return m.element.createElement(x,{className:a},m.element.createElement("p",null,e.label),m.element.createElement(kt,{value:Array.isArray(t)?t:[],onChange:d=>l({[e.name]:d}),controls:(r=e.controls)!=null?r:[]}))}if(Re[e.type]){const o=Re[e.type];return m.element.createElement(x,{label:e.label,className:a},m.element.createElement(_l,{config:o,initialValue:t,builder:"gutenberg",field:e,save:u=>l({[e.name]:u})}))}},"getField");var Fl=Object.defineProperty,Q=b((e,t)=>Fl(e,"name",{value:t,configurable:!0}),"o");const{wp:_,Tangible:Vl}=window,{blockEditor:{InspectorControls:Dl},blocks:{registerBlockType:Al},components:{Panel:Rl,PanelBody:Bl,PanelRow:Ll},element:{useState:Il},i18n:{__:Wl},serverSideRender:Ml}=_,{blockConfig:A,moduleLoader:Gl,ServerSideRender:Jl=Ml}=Vl,Ul=Q(e=>{const t=`${A.package}/${e.universal_id?"block-"+e.universal_id:e.name}`;Al(t,{title:e.label,description:e.description?e.description:"",category:A.category,sections:e.sections,icon:A.icon,edit(l){const{block_id:n}=l.attributes,[r,i]=Il(e.tabs[0]),a=Q(s=>Number.isInteger(l.attributes[s])?l.attributes[s].toString():l.attributes[s],"getFieldValue"),o=new q(A.conditions[e.universal_id?e.universal_id:e.content_id]),u=Q(s=>o.evaluateConditions(s,a),"isVisible");return n||l.setAttributes({block_id:l.clientId}),l.attributes.current_post_id||l.setAttributes({current_post_id:A.current_post_id}),_.element.createElement(_.element.Fragment,null,_.element.createElement(Dl,null,e.tabs.length>1&&_.element.createElement("div",{className:"tangible-block-editor-tabs"},e.tabs.map(s=>(s.name===r.name||u(s.conditions))&&_.element.createElement("div",{key:`tab-${s.name}`,className:"tangible-block-editor-tab components-button edit-post-sidebar__panel-tab"+(s.name===r.name?" is-active":""),onClick:()=>i(s)},_.element.createElement("p",null,s.label==="default"?"Content":s.label)))),r.sections.map((s,c)=>u(s.conditions)&&_.element.createElement(Rl,{key:`${s.name}-panel-${c}`,className:"tangible-block-editor-section"},_.element.createElement(Bl,{title:s.label,initialOpen:c===0},s.fields.map(p=>u(p.conditions)&&_.element.createElement(Ll,null,Le(p,l.attributes[p.name],l.setAttributes))))))),_.element.createElement(Jl,{block:t,attributes:l.attributes,EmptyResponsePlaceholder:Ie,LoadingResponsePlaceholder:Ie,onFetchResponseRendered:s=>{Gl(s)}}))},save(){return null}})},"createBlock"),Ie=Q(()=>_.element.createElement("div",{className:"tangible-loop-block"},"\xA0"),"EmptyLoopBlock"),{blocks:Ql}=window.Tangible;Ql.map(e=>Ul(e))})();
//# sourceMappingURL=gutenberg-integration.min.js.map
