var Vt=Object.defineProperty;var p=(V,B)=>Vt(V,"name",{value:B,configurable:!0});(function(){"use strict";(function(){const e={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,e);return}}catch(t){}globalThis.process={env:e}})();var V=Object.defineProperty,B=p((e,t)=>V(e,"name",{value:t,configurable:!0}),"l$5");class N{constructor(t){this.conditionsMap=t||[],this.getPreviousLevels=this.getPreviousLevels.bind(this),this.getCondition=this.getCondition.bind(this)}evaluateConditions(t,n){let l=!0;if(!t||!Array.isArray(t))return l;for(const r of t){const m=this.getCondition(r);if(!this.evaluateCondition(m,n))return!1}return l}getCondition(t){var n;const l=t.split("-"),r=parseInt(l[0]),m=parseInt(l[1]);return{number:r,level:m,current:(n=this.conditionsMap[r])==null?void 0:n[m],previousLevels:this.getPreviousLevels(r,m)}}getPreviousLevels(t,n){if(n===0)return[];let l=0;const r=[];for(;l<n;)r.push(this.conditionsMap[t][l]),l++;return r}extractComparisons(t){const n=[];for(const l in t)if(!(l==="compare"||l.slice(0,8)==="compare_"||l==="value"||l.slice(0,6)==="value_")){if(l==="control"||l.slice(0,8)==="control_"){const r=t[l],[m,s=0]=l.split("_");n.push({field:r,value:t[`value${s?"_"+s:""}`],compare:t[`compare${s?"_"+s:""}`]});continue}n.push({field:l,value:t[l]})}return n}evaluateCondition(t,n){let l=!0;for(const m of t.previousLevels){const s=this.extractComparisons(m);for(const{field:o,value:f,compare:d}of s){const c=n(o);if(this.compare(c,f,d))return!1}}const r=this.extractComparisons(t.current);for(const{field:m,value:s,compare:o}of r){const f=n(m);if(!this.compare(f,s,o))return!1}return l}compare(t,n,l="is"){let r=!1;switch(l){case"is":case"equal":case"not":default:r=t===n,l==="not"&&(r=!r);break}return r}}p(N,"u$2"),B(N,"ControlVisibility");var ae=Object.defineProperty,h=p((e,t)=>ae(e,"name",{value:t,configurable:!0}),"e$4");const re=h(e=>/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(e)||/^([A-Fa-f0-9]{3,4}){1,2}$/.test(e),"isHex"),oe=h((e,t)=>{const n=Math.floor((e.length-1)/3),l=ie(e.slice(1),n),[r,m,s,o]=l.map(ce);return`rgba(${r}, ${m}, ${s}, ${se(o)})`},"hexToRGBA"),ie=h((e,t)=>e.match(new RegExp(`.{${t}}`,"g")),"getChunksFromString"),ce=h(e=>parseInt(e.repeat(2/e.length),16),"convertHexUnitTo256"),se=h(e=>typeof e!="undefined"?parseFloat(e/255).toFixed(2):1,"getAlphafloat");var me=Object.defineProperty,ue=p((e,t)=>me(e,"name",{value:t,configurable:!0}),"n$2");const{wp:C}=window,{components:{BaseControl:pe,ColorPicker:de},element:{useEffect:be}}=C,ge=ue(e=>{const t=e.value===""&&e.defaultValue!==!1?re(e.defaultValue)?oe(e.defaultValue):e.defaultValue:e.value;return be(()=>e.onChange(t),[]),C.element.createElement(pe,{className:e.className},C.element.createElement("div",null,C.element.createElement("p",null,e.label),C.element.createElement(de,{style:{display:"block",marginTop:"10px"},color:t,onChangeComplete:n=>{const l=e.alpha===!1?`rgb(${n.rgb.r}, ${n.rgb.g}, ${n.rgb.b})`:`rgba(${n.rgb.r}, ${n.rgb.g}, ${n.rgb.b}, ${n.rgb.a})`;e.onChange(l)},disableAlpha:e.alpha===!1||e.alpha==="false"})))},"Color");var ve=Object.defineProperty,fe=p((e,t)=>ve(e,"name",{value:t,configurable:!0}),"u$1");const{wp:x}=window,{components:{BaseControl:Ee,__experimentalBoxControl:ye,SelectControl:$e},element:{useEffect:he,useState:T}}=x,Ce=fe(e=>{const[t,n]=T(e.value),[l,r]=T(e.value.unit?e.value.unit:e.defaultUnit),m=e.multipleValues!=="false"?e.className:`${e.className} ${e.className}-single-value`,s=[];for(let o in e.units)s.push({value:e.units[o],label:e.units[o]});return he(()=>{const o={top:t.top?t.top.replace(/[^0-9]/g,""):"",right:t.right?t.right.replace(/[^0-9]/g,""):"",bottom:t.bottom?t.bottom.replace(/[^0-9]/g,""):"",left:t.left?t.left.replace(/[^0-9]/g,""):"",unit:l};e.onChange(o)},[t,l]),x.element.createElement(Ee,{className:m},x.element.createElement(ye,{label:e.label,values:e.multipleValues!=="false"?t:{top:t.top},units:[{value:"px",label:"px"}],onChange:o=>n(o),sides:e.multipleValues!=="false"?[]:["top"]}),x.element.createElement($e,{onChange:o=>r(o),value:l,label:"Unit",options:s}))},"Dimension");var L=Object.defineProperty,we=Object.defineProperties,ke=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,M=p((e,t,n)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"l$2"),R=p((e,t)=>{for(var n in t||(t={}))Oe.call(t,n)&&M(e,n,t[n]);if(F)for(var n of F(t))Ne.call(t,n)&&M(e,n,t[n]);return e},"n"),xe=p((e,t)=>we(e,ke(t)),"v"),_e=p((e,t)=>L(e,"name",{value:t,configurable:!0}),"i$6");const{wp:I}=window,{element:{useEffect:Pe,useState:je}}=I,Se=_e(e=>{const[t,n]=je(e.value?e.value:0);return Pe(()=>{e.onChange(t)},[t]),I.element.createElement("input",xe(R(R({type:"number",value:t},e.min&&{min:e.min}),e.max&&{max:e.max}),{onChange:l=>{n(l.target.value!==""?parseInt(l.target.value):0)}}))},"Number");var D=Object.defineProperty,G=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,U=p((e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"c"),Ae=p((e,t)=>{for(var n in t||(t={}))Ve.call(t,n)&&U(e,n,t[n]);if(G)for(var n of G(t))Be.call(t,n)&&U(e,n,t[n]);return e},"d$2"),Te=p((e,t)=>D(e,"name",{value:t,configurable:!0}),"p$2");const Le=Te((e,t)=>{switch(t.type){case"add":return[...e,Ae({},t.structure)];case"remove":return[...e.slice(0,t.item),...e.slice(t.item+1)];case"update":return e[t.item][t.control]=t.value,[...e];case"clear":return[];default:return e}},"reducer");var Fe=Object.defineProperty,A=p((e,t)=>Fe(e,"name",{value:t,configurable:!0}),"s$3");const{wp:g}=window,{components:{Button:_,ButtonGroup:H,Card:Me,CardBody:Re,CardHeader:Ie,CardFooter:De},element:{useState:Ge,useReducer:Ue,useEffect:He,useContext:qe}}=g,ze=A(e=>{var t;const[n,l]=Ue(Le,e.value),[r,m]=Ge(!1),{conditions:s}=qe(te),o=new N((t=s.repeater[e.name])!=null?t:[]),f=A((c,u)=>o.evaluateConditions(c,b=>d(b,u)),"isVisible"),d=A((c,u)=>Number.isInteger(n[u][c])?n[u][c].toString():n[u][c],"getFieldValue");return He(()=>e.onChange(n),[n]),g.element.createElement(g.element.Fragment,null,n.map((c,u)=>g.element.createElement(Me,null,g.element.createElement(Ie,null,g.element.createElement("strong",null,"Item ",u+1)),r===u&&e.controls.map(b=>{var y,$;return f((y=b.conditions)!=null?y:[],u)?g.element.createElement(Re,null,ee(b,($=c[b.name])!=null?$:"",i=>l({type:"update",item:u,control:b.name,value:i[b.name]}))):""}),g.element.createElement(De,null,g.element.createElement(H,null,g.element.createElement(_,{onClick:()=>m(u!==r?u:!1),variant:"secondary"},r!==u?"Edit":"Close"),g.element.createElement(_,{onClick:()=>l({type:"remove",item:u}),variant:"secondary",isDestructive:!0},"Delete"))))),g.element.createElement(H,{style:{display:"flex",marginTop:"10px",justifyContent:"right"}},g.element.createElement(_,{onClick:()=>l({type:"add",controls:e.controls,structure:e.structure}),variant:"secondary"},"Add"),g.element.createElement(_,{onClick:()=>l({type:"clear"}),variant:"secondary",isDestructive:!0},"Clear")))},"Repeater");var Je=Object.defineProperty,Ke=p((e,t)=>Je(e,"name",{value:t,configurable:!0}),"u");const{wp:q}=window,{element:{useEffect:Qe,useRef:We,useState:Xe}}=q,Ye=Ke(e=>{const t=We(null),[n,l]=Xe(e.value);return Qe(()=>{tinyMCE.init({target:t.current,setup:function(r){r.on("input",function(m){e.updateVal(r.getContent())}),r.on("ExecCommand",function(m){e.updateVal(r.getContent())})}})},[]),q.element.createElement("textarea",{ref:t},n)},"TextArea");var Ze=Object.defineProperty,et=p((e,t)=>Ze(e,"name",{value:t,configurable:!0}),"i$4");const tt=et(e=>wp.element.createElement("div",{id:"tangible-logic-root",className:"tangible-logic-open"},wp.element.createElement("div",{className:"tangible-logic-modal"},wp.element.createElement("div",{className:"tangible-logic-header"},wp.element.createElement("div",{className:"tangible-logic-title"},e.title?e.title:""),wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button has-icon",type:"button","aria-label":"Close dialog",onClick:e.cancel},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),wp.element.createElement("div",{className:"tangible-logic-rule-group"},e.children),wp.element.createElement("div",{className:"tangible-logic-actions tangible-logic-clear"},wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button is-tertiary",type:"button",onClick:e.cancel},"Cancel"),wp.element.createElement("button",{id:"logic-button-add-logic",className:"tangible-components-button is-primary",type:"button",onClick:e.submit},"Save")))),"Modal");var z=Object.defineProperty,J=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,K=p((e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"e$1"),at=p((e,t)=>{for(var n in t||(t={}))nt.call(t,n)&&K(e,n,t[n]);if(J)for(var n of J(t))lt.call(t,n)&&K(e,n,t[n]);return e},"s$1"),rt=p((e,t)=>z(e,"name",{value:t,configurable:!0}),"y");const ot=rt((e,t,n,l)=>tangibleFields(at({onChange:r=>t(Array.isArray(r)||typeof r=="object"?JSON.stringify(r):r),value:n},l)),"getControl");var it=Object.defineProperty,P=p((e,t)=>it(e,"name",{value:t,configurable:!0}),"e");const ct=P(e=>{const{config:t,field:n,builder:l,initialValue:r}=e,m=t.popup,[s,o]=wp.element.useState(l==="beaver-builder"),[f=r,d]=wp.element.useState(),[c=r,u]=wp.element.useState(),b=P(le=>(m||u(le),d(le)),"save");wp.element.useEffect(()=>e.save(c),[c]),wp.element.useEffect(()=>m&&s&&d(c),[s]);const y=wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${t.type}`},ot(t,b,c,n));if(!m)return y;const $=P(()=>o(!1),"cancel"),i=P(()=>{o(!1),u(f)},"submit"),S=l!=="beaver-builder"&&wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${l}`},l==="elementor"&&wp.element.createElement("label",{className:"elementor-control-title"},n.label),wp.element.createElement("button",{onClick:()=>o(!s),class:"components-button is-secondary tangible-control-btn"},"Open Settings"));return s?wp.element.createElement(wp.element.Fragment,null,S,wp.element.createElement(tt,{submit:i,cancel:$,title:n.label},y)):S},"Control");var st=Object.defineProperty,Q=p((e,t)=>st(e,"name",{value:t,configurable:!0}),"g$1");const{wp:a,Tangible:mt}=window,{components:{BaseControl:E,Button:w,ButtonGroup:ut,DatePicker:pt,GradientPicker:dt,__experimentalGradientPicker:bt,Icon:k,SelectControl:gt,TextControl:vt,ToggleControl:ft},blockEditor:{MediaUpload:W,MediaUploadCheck:X}}=a,{blockConfig:{controls:Y}}=mt,Z=Q(e=>({id:e.id,url:e.url}),"extractMediaFields"),ee=Q((e,t,n)=>{var l,r,m;const s=typeof e.default!="undefined"?e.default:!1,o=`tangible-block-editor-control-${e.type}`;switch(e.type){case"text":return a.element.createElement(vt,{className:o,label:e.label,value:t,onChange:i=>n({[e.name]:i})});case"select":const f=Object.keys((l=e.options)!=null?l:[]).map(i=>({value:i,label:e.options[i]}));return a.element.createElement(gt,{className:e.multiple?o+"-multiple":o,label:e.label,value:t!==""||!s?t:s,options:f,multiple:e.multiple,onChange:i=>n({[e.name]:i})});case"date":return a.element.createElement(E,{label:e.label,className:o},a.element.createElement(pt,{currentDate:t?new Date(t):new Date,onChange:i=>n({[e.name]:i}),onMonthPreviewed:()=>!0}));case"color":return a.element.createElement(ge,{label:e.label,value:t,defaultValue:s,alpha:e.alpha,onChange:i=>n({[e.name]:i}),className:o});case"align":return t===""&&s&&n({[e.name]:s}),a.element.createElement(E,{label:e.label,className:o},a.element.createElement(ut,{style:{display:"block",marginTop:"10px"}},a.element.createElement(w,{variant:"secondary",onClick:()=>n({[e.name]:"left"})},a.element.createElement(k,{icon:"editor-alignleft"})),a.element.createElement(w,{variant:"secondary",onClick:()=>n({[e.name]:"center"})},a.element.createElement(k,{icon:"editor-aligncenter"})),a.element.createElement(w,{variant:"secondary",onClick:()=>n({[e.name]:"right"})},a.element.createElement(k,{icon:"editor-alignright"}))));case"image":return a.element.createElement(E,{className:o},a.element.createElement(X,null,a.element.createElement(W,{onSelect:i=>n({[e.name]:Z(i)}),allowedTypes:["image"],value:t,render:({open:i})=>a.element.createElement("div",null,a.element.createElement("p",null,e.label),a.element.createElement("img",{src:t.url,style:{width:"150px"}}),a.element.createElement(w,{isSecondary:!0,onClick:i,style:{display:"block",marginTop:"10px"}},a.element.createElement(k,{icon:"upload"}),"  Open Media Library"))})));case"editor":return a.element.createElement(E,{className:o},a.element.createElement("div",null,a.element.createElement("p",null,e.label),a.element.createElement(Ye,{value:t,updateVal:i=>n({[e.name]:i})})));case"switch":const d=e.hasOwnProperty("value_on")?e.value_on:"on",c=e.hasOwnProperty("value_off")?e.value_off:"off",u=e.hasOwnProperty("label_on")?e.label_on:"On",b=e.hasOwnProperty("label_off")?e.label_off:"Off";return a.element.createElement(E,{className:o},a.element.createElement(ft,{label:e.label,help:t===d?u:b,checked:t===d,onChange:i=>n({[e.name]:i?d:c})}));case"dimension":return a.element.createElement(Ce,{className:o,value:t,label:e.label,units:e.units?e.units.replace(/ /g,"").split(","):"",defaultUnit:e.default_unit?e.default_unit:"px",onChange:i=>n({[e.name]:i}),multipleValues:e.multiple_values?e.multiple_values:!0});case"gallery":const y=[];return t&&t.forEach((i,S)=>{y[S]=i.id?i.id:i}),a.element.createElement(E,{className:o},a.element.createElement(X,null,a.element.createElement(W,{onSelect:i=>n({[e.name]:i.map(Z)}),allowedTypes:["image"],value:y,gallery:!0,multiple:!0,render:({open:i})=>a.element.createElement("div",null,a.element.createElement("p",null,e.label),a.element.createElement(w,{isSecondary:!0,onClick:i,style:{display:"block",marginTop:"10px"}},a.element.createElement(k,{icon:"upload"}),"  Open Media Library"))})));case"number":return a.element.createElement(E,{className:o},a.element.createElement("div",null,a.element.createElement("p",null,e.label),a.element.createElement(Se,{className:o,value:t,min:e.min?e.min:!1,max:e.max?e.max:!1,onChange:i=>n({[e.name]:i})})));case"gradient":let $=bt||dt;return a.element.createElement(E,{className:o},a.element.createElement("p",null,e.label),a.element.createElement($,{value:t,onChange:i=>n({[e.name]:i}),gradients:[{name:"Vivid cyan blue to vivid purple",gradient:"linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)",slug:"vivid-cyan-blue-to-vivid-purple"},{name:"Light green cyan to vivid green cyan",gradient:"linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)",slug:"light-green-cyan-to-vivid-green-cyan"},{name:"Luminous vivid amber to luminous vivid orange",gradient:"linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)",slug:"luminous-vivid-amber-to-luminous-vivid-orange"}]}));case"repeater":return a.element.createElement(E,{className:o},a.element.createElement("p",null,e.label),a.element.createElement(ze,{name:e.name,value:Array.isArray(t)?t:[],onChange:i=>n({[e.name]:i}),controls:(r=e.controls)!=null?r:[],structure:(m=e.item_structure)!=null?m:[]}))}if(Y[e.type]){const f=Y[e.type];return a.element.createElement(E,{label:e.label,className:o},a.element.createElement(ct,{config:f,initialValue:t,builder:"gutenberg",field:e,save:d=>n({[e.name]:d})}))}},"getField");var Et=Object.defineProperty,j=p((e,t)=>Et(e,"name",{value:t,configurable:!0}),"o");const{wp:v,Tangible:yt}=window,{blockEditor:{InspectorControls:$t},blocks:{registerBlockType:ht},components:{Panel:Ct,PanelBody:wt,PanelRow:kt},element:{useState:Ot,createContext:Nt},i18n:{__:Bt},serverSideRender:xt}=v,{blockConfig:O,moduleLoader:_t,ServerSideRender:Pt=xt}=yt,te=Nt(),jt=j(e=>{const t=`${O.package}/${e.universal_id?"block-"+e.universal_id:e.name}`;ht(t,{title:e.label,description:e.description?e.description:"",category:O.category,sections:e.sections,icon:O.icon,edit(n){const{block_id:l}=n.attributes,[r,m]=Ot(e.tabs[0]),s=O.conditions[e.universal_id?e.universal_id:e.content_id],o=new N(s.general),f=j(c=>Number.isInteger(n.attributes[c])?n.attributes[c].toString():n.attributes[c],"getFieldValue"),d=j(c=>o.evaluateConditions(c,f),"isVisible");return l||n.setAttributes({block_id:n.clientId}),n.attributes.current_post_id||n.setAttributes({current_post_id:O.current_post_id}),v.element.createElement(v.element.Fragment,null,v.element.createElement($t,null,e.tabs.length>1&&v.element.createElement("div",{className:"tangible-block-editor-tabs"},e.tabs.map(c=>(c.name===r.name||d(c.conditions))&&v.element.createElement("div",{key:`tab-${c.name}`,className:"tangible-block-editor-tab components-button edit-post-sidebar__panel-tab"+(c.name===r.name?" is-active":""),onClick:()=>m(c)},v.element.createElement("p",null,c.label==="default"?"Content":c.label)))),v.element.createElement(te.Provider,{value:{id:l,conditions:s}},r.sections.map((c,u)=>d(c.conditions)&&v.element.createElement(Ct,{key:`${c.name}-panel-${u}`,className:"tangible-block-editor-section"},v.element.createElement(wt,{title:c.label,initialOpen:u===0},c.fields.map(b=>d(b.conditions)&&v.element.createElement(kt,null,ee(b,n.attributes[b.name],n.setAttributes)))))))),v.element.createElement(Pt,{block:t,attributes:n.attributes,httpMethod:"POST",EmptyResponsePlaceholder:ne,LoadingResponsePlaceholder:ne,onFetchResponseRendered:c=>{_t(c)}}))},save(){return null}})},"createBlock"),ne=j(()=>v.element.createElement("div",{className:"tangible-loop-block"},"\xA0"),"EmptyLoopBlock"),{blocks:St}=window.Tangible;St.map(e=>jt(e))})();
//# sourceMappingURL=gutenberg-integration.min.js.map
