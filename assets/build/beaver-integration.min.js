var Mt=Object.defineProperty;var p=(I,Q)=>Mt(I,"name",{value:Q,configurable:!0});(function(){"use strict";(function(){const t={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,t);return}}catch(e){}globalThis.process={env:t}})();var I=Object.defineProperty,Q=p((t,e)=>I(t,"name",{value:e,configurable:!0}),"l$4");class F{constructor(e){this.conditionsMap=e||[],this.getPreviousLevels=this.getPreviousLevels.bind(this),this.getCondition=this.getCondition.bind(this)}evaluateConditions(e,n){let l=!0;if(!e||!Array.isArray(e))return l;for(const r of e){const i=this.getCondition(r);if(!this.evaluateCondition(i,n))return!1}return l}getCondition(e){const n=e.split("-"),l=parseInt(n[0]),r=parseInt(n[1]);return{number:l,level:r,current:this.conditionsMap[l][r],previousLevels:this.getPreviousLevels(l,r)}}getPreviousLevels(e,n){if(n===0)return[];let l=0;const r=[];for(;l<n;)r.push(this.conditionsMap[e][l]),l++;return r}extractComparisons(e){const n=[];for(const l in e)if(!(l==="compare"||l.slice(0,8)==="compare_"||l==="value"||l.slice(0,6)==="value_")){if(l==="control"||l.slice(0,8)==="control_"){const r=e[l],[i,a=0]=l.split("_");n.push({field:r,value:e[`value${a?"_"+a:""}`],compare:e[`compare${a?"_"+a:""}`]});continue}n.push({field:l,value:e[l]})}return n}evaluateCondition(e,n){let l=!0;for(const i of e.previousLevels){const a=this.extractComparisons(i);for(const{field:o,value:c,compare:d}of a){const s=n(o);if(this.compare(s,c,d))return!1}}const r=this.extractComparisons(e.current);for(const{field:i,value:a,compare:o}of r){const c=n(i);if(!this.compare(c,a,o))return!1}return l}compare(e,n,l="is"){let r=!1;switch(l){case"is":case"equal":case"not":default:r=e===n,l==="not"&&(r=!r);break}return r}}p(F,"u$7"),Q(F,"ControlVisibility");var Fe=Object.defineProperty,T=p((t,e)=>Fe(t,"name",{value:e,configurable:!0}),"a$7");const A=jQuery,X=T((t,e)=>{e(),t.find("select").on("change",e),t.find("input").on("change",e),t.find("input[type=text], input[type=number]").on("input",e);const n=t.find(".fl-editor-field");n.each(l=>{const r=K(n[l]);r&&r.on("change",e)})},"onFormChange"),z=T((t,e)=>{const n=t.find("select, input, .fl-editor-field"),l={};return n.each(r=>{const i=Te(n[r]);!i||(i.conditions=e[i.name]||!1,i.element=n[r],l[i.name]=i)}),l},"getFormFields"),Te=T(t=>{switch(t.tagName){case"SELECT":if(t.multiple)return t.name!==""?{name:t.name,value:A(t).val().join(",")}:!1;case"INPUT":return t.name!==""?{name:t.name,value:A(t).val()}:!1;case"DIV":const e=A(t).attr("data-name"),n=K(t);return{name:e,value:n.getContent()}}return!1},"getFormField"),K=T(t=>{const e=A(t).find(".wp-editor-tabs button").attr("data-wp-editor-id");return window.tinyMCE?window.tinyMCE.get(e):!1},"getEditor");var Ae=Object.defineProperty,O=p((t,e)=>Ae(t,"name",{value:e,configurable:!0}),"r$2");const Y=jQuery,Ve=O(t=>{FLBuilder.addHook("settings-form-init",()=>{const e=O((l,r)=>De(t,r),"init"),n=O(()=>{FLBuilder.removeHook("didCompleteAJAX",e),FLBuilder.removeHook("didHideLightbox",n)},"clear");FLBuilder.addHook("didCompleteAJAX",e),FLBuilder.addHook("didHideLightbox",n)})},"init"),De=O((t,e)=>{var n,l,r,i;if(!e.fl_builder_data)return;const a=(n=e.fl_builder_data.form)!=null?n:"";(l=e.settings)!=null;const o=`_tangible_repeater_${t.blockId}_`;if(!a.startsWith(o))return;const c=a.replace(o,""),d=(i=((r=t.conditions.repeater)!=null?r:{})[c])!=null?i:!1;if(!d)return;const s=new F(d),m=Y(`form[data-form-id=${a}]`);!m||X(m,()=>Le(m,t,s,c))},"initVisibility"),Le=O((t,e,n,l)=>{var r;const i=z(t,(r=e.repeaters[l])!=null?r:{}),a=O(o=>i[o]?i[o].value:void 0,"getValue");for(const o in i){const c=i[o];if(!c.conditions||!c.conditions.length)continue;const d=n.evaluateConditions(c.conditions,a);Y(c.element).closest(".fl-field")[d?"show":"hide"]()}},"setVisibility");var Be=Object.defineProperty,R=p((t,e)=>Be(t,"name",{value:e,configurable:!0}),"l$3");const J=jQuery,Me=R(t=>{const e=new F(t.conditions.general);X(t.form,()=>Ie(t,e)),Ve(t)},"init"),Ie=R((t,e)=>{const n=t.getTabSettings(),l=t.getSectionSettings(),r=z(t.form,t.fields),i=R(a=>r[a]?r[a].value:void 0,"getFieldValue");for(const a in n){const o=n[a];if(!o.conditions||!o.conditions.length)continue;const c=e.evaluateConditions(o.conditions,i),d=J(o.element);d.hasClass("fl-active")||d[c?"show":"hide"]()}for(const a in l){const o=l[a];if(!o.conditions||!o.conditions.length)continue;const c=e.evaluateConditions(o.conditions,i);J(o.element)[c?"show":"hide"]()}for(const a in r){const o=r[a];if(!o.conditions||!o.conditions.length)continue;const c=e.evaluateConditions(o.conditions,i);J(o.element).closest(".fl-field")[c?"show":"hide"]()}},"setVisibility");var Qe=Object.defineProperty,Re=p((t,e)=>Qe(t,"name",{value:e,configurable:!0}),"g$4");const{blockConfig:{slug:Je,visibility:x}}=Tangible,He=jQuery,We=Re(t=>{const e=Je+t;FLBuilder.registerModuleHelper(e,{init(){this.bindMethods(),this.form=He(".fl-builder-settings"),this.blockId=t,this.tabs=x.tabs[t]||{},this.sections=x.sections[t]||{},this.fields=x.fields[t]||{},this.repeaters=x.repeaters[t]||{},this.conditions=x.conditions[t]||{},!(!Object.keys(this.tabs).length&&!Object.keys(this.sections).length&&!Object.keys(this.fields).length)&&Me(this)},bindMethods(){this.getTabSettings=this.getTabSettings.bind(this),this.getSectionSettings=this.getSectionSettings.bind(this)},getTabSettings(){const n={},l=this.form.find(".fl-builder-settings-tabs a");return l.each(r=>{const i=l[r],a=i.getAttribute("href").replace("#fl-builder-settings-tab-","");if(!a)return;const o={name:a};o.conditions=this.tabs[o.name]||!1,o.element=i,n[o.name]=o}),n},getSectionSettings(){const n={},l=this.form.find(".fl-builder-settings-section");return l.each(r=>{const i=l[r],a=i.getAttribute("id").replace("fl-builder-settings-section-","");if(!a)return;const o={name:a};o.conditions=this.sections[o.name]||!1,o.element=i,n[o.name]=o}),n}})},"initModule"),{blockConfig:qe}=window.Tangible,{fields:Ge}=qe.visibility;jQuery(()=>{for(const t in Ge)We(t)});var Ue=Object.defineProperty,Xe=p((t,e)=>Ue(t,"name",{value:e,configurable:!0}),"i$5");const ze=Xe(t=>wp.element.createElement("div",{id:"tangible-logic-root",className:"tangible-logic-open"},wp.element.createElement("div",{className:"tangible-logic-modal"},wp.element.createElement("div",{className:"tangible-logic-header"},wp.element.createElement("div",{className:"tangible-logic-title"},t.title?t.title:""),wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button has-icon",type:"button","aria-label":"Close dialog",onClick:t.cancel},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),wp.element.createElement("div",{className:"tangible-logic-rule-group"},t.children),wp.element.createElement("div",{className:"tangible-logic-actions tangible-logic-clear"},wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button is-tertiary",type:"button",onClick:t.cancel},"Cancel"),wp.element.createElement("button",{id:"logic-button-add-logic",className:"tangible-components-button is-primary",type:"button",onClick:t.submit},"Save")))),"Modal");var Ke=Object.defineProperty,Ye=p((t,e)=>Ke(t,"name",{value:e,configurable:!0}),"n$2");const{wp:Z}=window,{useState:Ze,useEffect:et}=Z.element,tt=Ye(t=>{const[e,n]=Ze(t.initialValue);return et(()=>t.handler(e),[e]),Z.element.createElement("input",{type:"text",value:e,onChange:l=>n(l.target.value)})},"Text");var ee=Object.defineProperty,te=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,ne=p((t,e,n)=>e in t?ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"a$3"),at=p((t,e)=>{for(var n in e||(e={}))nt.call(e,n)&&ne(t,n,e[n]);if(te)for(var n of te(e))lt.call(e,n)&&ne(t,n,e[n]);return t},"f$1"),ot=p((t,e)=>ee(t,"name",{value:e,configurable:!0}),"g$3");const{jQuery:rt}=window,$=ot(({labelForEmptyValue:t="",options:e=[],value:n="",onChange:l,multiSelect:r,style:i})=>{const a=wp.element.useRef();if(wp.element.useEffect(()=>{if(!a.current)return;const o=rt(a.current);a.current.$el=o,l(n),o.tangibleSelect({minimumResultsForSearch:5}),r&&(o.val(n),o.trigger("change")),o.on("change",function(d){if(!r&&!a.current._silentChange){l(d.target.value);return}if(!a.current||a.current._silentChange)return;const s=o.select2("data").map(m=>m.id);l(s)});const c=a.current.select2=o.data("select2");return()=>{c&&c.destroy()}},[]),a.current&&a.current.$el)if(r){const o=a.current.$el.val();n.length!==o.length&&e.length&&setImmediate(function(){!a.current||!a.current.$el||(a.current.$el.val(n),a.current.$el.trigger("change"))})}else a.current.value!==n&&(a.current._silentChange=!0,a.current.$el.val(n),a.current.$el.trigger("change"),setImmediate(function(){a.current._silentChange=!1}));return wp.element.createElement("select",{ref:a,autoComplete:"off",multiple:r,style:at({display:"none",width:"160px"},i)},t&&wp.element.createElement("option",{value:"",disabled:!0,selected:n==null},t),e.map((o,c)=>wp.element.createElement("option",{key:`option-${c}`,value:o.value,selected:o.value===n},o.label)))},"Select");var it=Object.defineProperty,st=p((t,e)=>it(t,"name",{value:e,configurable:!0}),"a$2");const ct=st(({getData:t,setData:e,includeOrder:n,includeOrderBy:l})=>{const r=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"order"},"Order"),wp.element.createElement($,{labelForEmptyValue:"Choose Order",options:[{label:"ASC",value:"asc"},{label:"DESC",value:"desc"}],value:t("order"),style:{width:"100%"},onChange:c=>e("order",c)}))),i=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby"},"Order by"),wp.element.createElement($,{labelForEmptyValue:"Order by",options:[{label:"Title",value:"title"},{label:"ID",value:"id"},{label:"Author",value:"author"},{label:"Name",value:"name"},{label:"Type",value:"type"},{label:"Date",value:"date"},{label:"Modified",value:"modified"},{label:"Random",value:"random"},{label:"Comment count",value:"comment_count"},{label:"Relevance",value:"relevance"},{label:"Menu",value:"menu"},{label:"Custom value",value:"meta_value"},{label:"Custom value number",value:"meta_value_num"}],value:t("orderby"),style:{width:"100%"},onChange:c=>e("orderby",c)}))),a=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field"},"Order by custom field"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",name:"orderby-field",id:"orderby_field",onChange:c=>e("orderby_field",c.target.value),placeholder:"Enter field key",value:t("orderby_field")}))),o=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field_number"},"Order by custom field with numeric value"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",id:"orderby_field_number",name:"orderby-field-number",onChange:c=>e("orderby_field_number",c.target.value),placeholder:"Enter field key",value:t("orderby_field_number")})));return wp.element.createElement("div",{className:"tangible-logic-rule"},n&&r,l&&i,t("orderby")==="meta_value"&&a,t("orderby")==="meta_value_num"&&o)},"Order");var mt=Object.defineProperty,ut=p((t,e)=>mt(t,"name",{value:e,configurable:!0}),"p$3");const{useState:le,useEffect:ae}=wp.element,dt=ut(({initialLoopType:t,initialType:e,setData:n,fields:l})=>{const[r,i]=le(t||"post"),[a,o]=le(e);ae(()=>n("loopType",r),[r]),ae(()=>n("type",a),[a]);const c=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label"},"Content type"),wp.element.createElement($,{labelForEmptyValue:"Choose a Type",options:[{label:"Post",value:"post"}],value:r,onChange:s=>i(s),style:{width:"100%"}}))),d=r==="post"?wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"post_type"},"Fields"),wp.element.createElement($,{labelForEmptyValue:"Choose Fields",value:a?a.split(","):["null"],options:l,multiSelect:!0,style:{width:"100%"},onChange:s=>s=="null"?o(""):o(s.toString())}))):"";return wp.element.createElement("div",{className:"tangible-logic-rule"},c,d)},"Type");var oe=Object.defineProperty,pt=Object.defineProperties,bt=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,ie=p((t,e,n)=>e in t?oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"h$1"),se=p((t,e)=>{for(var n in e||(e={}))gt.call(e,n)&&ie(t,n,e[n]);if(re)for(var n of re(e))vt.call(e,n)&&ie(t,n,e[n]);return t},"u$4"),ce=p((t,e)=>pt(t,bt(e)),"b$2"),j=p((t,e)=>oe(t,"name",{value:e,configurable:!0}),"m$3");const{Tangible:ft,wp:v}=window,{useState:me,useEffect:yt}=v.element,{allTaxonomies:ue={}}=ft.postQueryControlData,ht=j(({value:t,initialData:e,save:n,showBtn:l,remove:r})=>{const i=t===1,a=Object.keys(ue),[o,c]=me(e);yt(()=>{n(o)},[o]);const d=j(g=>{const E=ue[g];if(E==null||E.length===0)return[];let C=[];return E.forEach(ke=>{C.push({label:ke.name,value:ke.slug})}),C},"getTerms"),s=j(g=>o.hasOwnProperty(g)?o[g]===""?null:o[g]:null,"getParam"),m=j(g=>{N(E=>[]),g.length>0&&N(E=>g)},"updateTerms"),u=j((g,E)=>c(C=>ce(se({},C),{[g]:E})),"updateParam"),[w,N]=me(o.hasOwnProperty("taxonomy")?d(o.taxonomy):[]),P=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Taxonomy ",!i&&t),v.element.createElement($,{style:{width:"100%"},labelForEmptyValue:`Taxonomy ${i?"":t}`,options:a.map(g=>({label:g,value:g})),value:s("taxonomy"),onChange:g=>{u("terms",""),u("taxonomy",g);const E=d(g);m(E)}}))),k=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Compare ",!i&&t),v.element.createElement($,{style:{width:"100%"},labelForEmptyValue:`Compare ${i?"":t}`,options:[{label:"In",value:"in"},{label:"Not",value:"not"},{label:"And",value:"and"},{label:"Exists",value:"exists"},{label:"Not exists",value:"not exists"}],value:o.taxonomy_compare,onChange:g=>u("taxonomy_compare",g)}))),b=s("terms"),_=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Term ",!i&&t),v.element.createElement($,{style:{width:"100%"},labelForEmptyValue:`Terms ${i?"":t}`,multiSelect:!0,options:w,value:b?b.split(","):["null"],onChange:g=>c(E=>{let C="";return g!="null"&&(C=g.toString()),ce(se({},E),{terms:C})})})));return v.element.createElement("div",{className:"tangible-logic-rule"},P,k,_,l&&v.element.createElement("button",{id:"logic-button-rule",className:"tangible-components-button is-secondary",type:"button",onClick:r},"Remove"))},"QueryGroup");var wt=Object.defineProperty,V=p((t,e)=>wt(t,"name",{value:e,configurable:!0}),"s$2");const{wp:f}=window,{useState:de,useEffect:pe}=f.element,be=3,ge=V(({initialData:t,save:e})=>{const[n,l]=de([]),[r,i]=de("");pe(()=>{if(!t)return;const s=JSON.parse(t),m=[];if(s.taxonomy_relation&&i(s.taxonomy_relation),!s.taxonomy)return;let u="",w=1;for(;s[`taxonomy${u}`]&&w<=be&&(u=w!==1?`_${w}`:"",!!s[`taxonomy${u}`]);)m.push({taxonomy:s[`taxonomy${u}`],terms:s[`terms${u}`],taxonomy_compare:s[`taxonomy_compare${u}`]}),w++;l(m)},[]),pe(()=>{const s={};r&&(s.taxonomy_relation=r);for(let m=0;m<n.length;m++){const u=m!==0?`_${m+1}`:"";s[`taxonomy${u}`]=n[m].taxonomy,s[`terms${u}`]=n[m].terms,s[`taxonomy_compare${u}`]=n[m].taxonomy_compare}e(s)},[n,r]);const a=f.element.createElement("div",{className:"tangible-logic-rule tangible-logic-clear"},f.element.createElement("div",{className:"tangible-components-control"},f.element.createElement("div",{className:"tangible-components-control__field"},f.element.createElement("label",{className:"tangible-components-control__label"},"Relation"),f.element.createElement($,{style:{width:"100%"},labelForEmptyValue:"Choose Relation",options:[{label:"And",value:"and"},{label:"Or",value:"or"}],value:r,onChange:s=>i(s)})))),o=V(()=>{l([...n,{taxonomy:"",terms:"",taxonomy_compare:""}])},"addRow"),c=V((s,m)=>{n[s]=m,l([...n])},"saveRow"),d=V(s=>{l([...n.slice(0,s),...n.slice(s+1)])},"removeRow");return f.element.createElement("div",{className:"tangible-logic-rule-group-box-bordered"},n.length>1&&f.element.createElement("div",{className:"tangible-logic-taxonomy-group"},a),f.element.createElement("div",{className:"tangible-logic-taxonomy-group"},n.length>0&&n.map((s,m)=>f.element.createElement(ht,{key:m+JSON.stringify(s),value:m+1,initialData:s,showBtn:!0,save:u=>c(m,u),remove:()=>d(m)}))),n.length<be&&f.element.createElement("div",{className:"tangible-logic-group-actions"},f.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:o},"Add taxonomy filter"),f.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:()=>l([])},"Remove")))},"Taxonomy");var ve=Object.defineProperty,Et=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,ye=p((t,e,n)=>e in t?ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"g$2"),he=p((t,e)=>{for(var n in e||(e={}))$t.call(e,n)&&ye(t,n,e[n]);if(fe)for(var n of fe(e))Nt.call(e,n)&&ye(t,n,e[n]);return t},"y$1"),we=p((t,e)=>Et(t,_t(e)),"m$2"),D=p((t,e)=>ve(t,"name",{value:e,configurable:!0}),"u$3");const{Tangible:Ct,wp:y}=window,{useState:Ot,useEffect:Ee}=y.element,{allPostTypes:_e={}}=Ct.postQueryControlData||{},xt=D(({initialData:t,save:e,fields:n=[]})=>{const l=n.replace(/\s+/g,"").split(","),r=D(s=>{try{return JSON.parse(s)}catch(m){return{}}},"parseData"),[i,a]=Ot(r(t));Ee(()=>a(r(t)),[t]),Ee(()=>{e(i)},[i]);const o=D(s=>i[s]&&i[s]!==""?i[s]:null,"getData"),c=D((s,m)=>a(u=>s!=="orderby"?we(he({},u),{[s]:m}):(m!=="meta_value"&&u.orderby_field&&delete u.orderby_field,m!=="meta_value_num"&&u.orderby_field_number&&delete u.orderby_field_number,we(he({},u),{[s]:m}))),"updateArgs"),d=y.element.createElement(ge,{initialData:i.hasOwnProperty("taxonomies")?JSON.stringify(i.taxonomies):"{}",save:s=>c("taxonomies",s)});return y.element.createElement(y.element.Fragment,null,(l.includes("order")||l.includes("orderby"))&&y.element.createElement("div",{className:"tangible-logic-rule-group-box"},y.element.createElement("h4",{style:{fontWeight:"600"}},"Order"),y.element.createElement(ct,{getData:o,setData:c,includeOrder:l.includes("order"),includeOrderBy:l.includes("orderby")})),l.includes("type")&&y.element.createElement("div",{className:"tangible-logic-rule-group-box"},y.element.createElement("h4",{style:{fontWeight:"600"}},"Type"),y.element.createElement(dt,{initialLoopType:o("loopType")!==null?o("loopType"):"post",initialType:o("type"),setData:c,fields:Object.keys(_e).map(s=>({label:_e[s],value:s}))})),l.includes("taxonomy")&&y.element.createElement("div",{className:"tangible-logic-rule-group-box"},y.element.createElement("h4",{style:{fontWeight:"600"}},"Filter by Taxonomy"),d))},"PostQuery");var jt=Object.defineProperty,H=p((t,e)=>jt(t,"name",{value:e,configurable:!0}),"i$1");const{wp:h}=window,{element:{useEffect:L,useState:B}}=h,{ajax:St}=window.Tangible,Pt=H(({handler:t,initialValue:e,fields:n=[]})=>{const[l,r]=B(e?JSON.parse(e):[]),[i,a]=B(""),[o,c]=B([]),[d,s]=B(!1),m="tangible-block-editor-control-ajax-select",u=n.multiple&&n.multiple==="true";L(()=>{u&&!Array.isArray(l)&&r([l])}),L(()=>{const b={search:i,field:n};St(n.ajax_action_name,b).then(_=>c(_)).catch(_=>console.error(_))},[i]),L(()=>t(JSON.stringify(l)),[l]),L(()=>{d===!1&&a("")},[d]);const w=H(b=>{r(u?[...l,b]:[b])},"saveValue"),N=H(b=>{const _=l.filter(g=>g.value!==b.value);r([..._])},"removeValue"),P=Array.isArray(l)?l.map(b=>b.value):[],k=h.element.createElement("span",{className:"dashicons dashicons-no-alt"});return h.element.createElement("div",{className:d?`${m} is-open`:m},u&&Array.isArray(l)?h.element.createElement("ul",{className:m+"-choice"},l.map(b=>h.element.createElement("li",{id:b.name},h.element.createElement("button",{onClick:()=>N(b)},k)," ",h.element.createElement("span",null,b.label)," "))):"",h.element.createElement("input",{type:"text",className:m+"-input",onFocus:()=>s(!0),onBlur:()=>s(!1),onChange:b=>{a(b.target.value)},placeholder:n.placeholder?n.placeholder:"Select",value:!d&&!u&&l[0]?l[0].label:i}),d&&h.element.createElement("ul",{class:m+"-ul"},o?o.map(b=>u&&P.includes(b.value)?"":h.element.createElement("li",{id:b.name,onMouseDown:()=>w(b)},b.label!==""?b.label:h.element.createElement("i",null,"Untitled"))):""))},"AjaxSelect");var $e=Object.defineProperty,Ne=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable,Ce=p((t,e,n)=>e in t?$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"a"),Oe=p((t,e)=>{for(var n in e||(e={}))kt.call(e,n)&&Ce(t,n,e[n]);if(Ne)for(var n of Ne(e))Ft.call(e,n)&&Ce(t,n,e[n]);return t},"s"),Tt=p((t,e)=>$e(t,"name",{value:e,configurable:!0}),"m");const At=Tt((t,e,n,l)=>{switch(t.type){case"post_query":return wp.element.createElement(xt,{save:a=>e(JSON.stringify(a)),initialData:n,fields:l.include_fields?l.include_fields:"type, order, orderby"});case"taxonomy":return wp.element.createElement(ge,Oe({save:a=>e(JSON.stringify(a)),initialData:n},l));case"select2":const r=l.multiple&&l.multiple==="true",i=typeof n=="string"&&r?n!==""?n.split(","):[]:n!==""?n:null;return wp.element.createElement($,{labelForEmptyValue:"Choose...",options:l.options?Object.keys(l.options).map(a=>({value:a,label:l.options[a]})):[],onChange:a=>e(a!==null?Array.isArray(a)?a.join(","):a:""),multiSelect:r,value:i,style:{width:"100%"}});case"ajax_select":return wp.element.createElement(Pt,{handler:e,initialValue:n,fields:l});default:return wp.element.createElement(tt,Oe({handler:e,initialValue:n},l))}},"getControl");var Vt=Object.defineProperty,M=p((t,e)=>Vt(t,"name",{value:e,configurable:!0}),"l$1");const{useState:W,useEffect:xe}=wp.element,Dt=M(t=>{const{config:e,field:n,builder:l,initialValue:r}=t,i=e.popup,[a,o]=W(l==="beaver-builder"),[c=r,d]=W(),[s=r,m]=W(),u=M(_=>(i||m(_),d(_)),"save");xe(()=>t.save(s),[s]),xe(()=>{i&&a&&d(s)},[a]);const w={display:"flex",marginBottom:"10px"},N=wp.element.createElement(wp.element.Fragment,null,l==="elementor"&&!i?wp.element.createElement("label",{className:"elementor-control-title",style:w},n.label):"",wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${e.type}`},At(e,u,s,n)));if(!i)return N;const P=M(()=>o(!1),"cancel"),k=M(()=>{o(!1),m(c)},"submit"),b=l!=="beaver-builder"?wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${l}`},l==="elementor"?wp.element.createElement("label",{className:"elementor-control-title",style:w},n.label):"",wp.element.createElement("button",{onClick:()=>o(!a),className:"components-button is-secondary tangible-control-btn"},"Open Settings")):"";return a?wp.element.createElement(wp.element.Fragment,null,b,wp.element.createElement(ze,{submit:k,cancel:P,title:n.label},N)):b},"Control");var Lt=Object.defineProperty,q=p((t,e)=>Lt(t,"name",{value:e,configurable:!0}),"r");const{render:G,unmountComponentAtNode:U}=wp.element,{blockConfig:{controls:je}}=Tangible,Se=jQuery,S=document;Se(()=>{for(const t in je)Bt(je[t])});const Bt=q(t=>{FLBuilder.addHook("didShowLightbox",()=>{const e=S.getElementsByClassName(`${t.prefixed_type}-container`);if(e.length!==0)for(let n=0;n<e.length;n++){const l=e[n],r=Se(l).next(),i=JSON.parse(l.getAttribute("data-field"));if(!t.popup){G(Pe(t,r,i),l);continue}const a=S.createElement("div");a.setAttribute("class",`${t.prefixed_type}-popup-container`),S.body.append(a);const o=`tangible-block-control-button ${t.prefixed_type}-popup-container`;G(wp.element.createElement("button",{className:o,onClick:q(()=>{U(a),G(Pe(t,r,i),a)},"onClickAction")},"Open Settings"),l)}}),FLBuilder.addHook("settings-lightbox-closed",()=>{const e=S.getElementsByClassName(`tangible-block-control-${t.prefixed_type}-container`);if(e.length===0)return;for(let l=0;l<e.length;l++)U(e[l]);if(!t.popup)return;const n=S.getElementsByClassName(`${t.prefixed_type}-popup-container`);for(let l=0;l<n.length;l++)U(n[l])})},"initControl"),Pe=q((t,e,n)=>wp.element.createElement(Dt,{config:t,initialValue:e.val(),builder:"beaver-builder",field:n,save:l=>{e.val(l),e.trigger("change")}}),"initComponent")})();
//# sourceMappingURL=beaver-integration.min.js.map
