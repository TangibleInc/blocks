var nn=Object.defineProperty;var u=(I,M)=>nn(I,"name",{value:M,configurable:!0});(function(){"use strict";(function(){const t={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,t);return}}catch(e){}globalThis.process={env:t}})();var I=Object.defineProperty,M=u((t,e)=>I(t,"name",{value:e,configurable:!0}),"l$4");let J=u(class{constructor(e){this.conditionsMap=e||[],this.getPreviousLevels=this.getPreviousLevels.bind(this),this.getCondition=this.getCondition.bind(this)}evaluateConditions(e,n){let l=!0;if(!e||!Array.isArray(e))return l;for(const r of e){const i=this.getCondition(r);if(!this.evaluateCondition(i,n))return!1}return l}getCondition(e){var n;const l=e.split("-"),r=parseInt(l[0]),i=parseInt(l[1]);return{number:r,level:i,current:(n=this.conditionsMap[r])==null?void 0:n[i],previousLevels:this.getPreviousLevels(r,i)}}getPreviousLevels(e,n){if(n===0)return[];let l=0;const r=[];for(;l<n;)r.push(this.conditionsMap[e][l]),l++;return r}extractComparisons(e){const n=[];for(const l in e)if(!(l==="compare"||l.slice(0,8)==="compare_"||l==="value"||l.slice(0,6)==="value_")){if(l==="control"||l.slice(0,8)==="control_"){const r=e[l],[i,a=0]=l.split("_");n.push({field:r,value:e[`value${a?"_"+a:""}`],compare:e[`compare${a?"_"+a:""}`]});continue}n.push({field:l,value:e[l]})}return n}evaluateCondition(e,n){let l=!0;for(const i of e.previousLevels){const a=this.extractComparisons(i);for(const{field:o,value:s,compare:d}of a){const c=n(o);if(this.compare(c,s,d))return!1}}const r=this.extractComparisons(e.current);for(const{field:i,value:a,compare:o}of r){const s=n(i);if(!this.compare(s,a,o))return!1}return l}compare(e,n,l="is"){let r=!1;switch(l){case"is":case"equal":case"not":default:r=e===n,l==="not"&&(r=!r);break}return r}},"u");M(J,"ControlVisibility");var De=Object.defineProperty,P=u((t,e)=>De(t,"name",{value:e,configurable:!0}),"a$8");const F=jQuery,U=P((t,e)=>{e(),t.find("select").on("change",e),t.find("input").on("change",e),t.find("input[type=text], input[type=number]").on("input",e);const n=t.find(".fl-editor-field");n.each(l=>{const r=z(n[l]);r&&r.on("change",e)})},"onFormChange"),X=P((t,e)=>{const n=t.find("select, input, .fl-editor-field"),l={};return n.each(r=>{const i=Be(n[r]);i&&(i.conditions=e[i.name]||!1,i.element=n[r],l[i.name]=i)}),l},"getFormFields"),Be=P(t=>{switch(t.tagName){case"SELECT":if(t.multiple)return t.name!==""?{name:t.name,value:F(t).val().join(",")}:!1;case"INPUT":return t.name!==""?{name:t.name,value:F(t).val()}:!1;case"DIV":const e=F(t).attr("data-name"),n=z(t);return{name:e,value:n.getContent()}}return!1},"getFormField"),z=P(t=>{const e=F(t).find(".wp-editor-tabs button").attr("data-wp-editor-id");return window.tinyMCE?window.tinyMCE.get(e):!1},"getEditor");var Ie=Object.defineProperty,j=u((t,e)=>Ie(t,"name",{value:e,configurable:!0}),"r$3");const K=jQuery,Me=j(t=>{FLBuilder.addHook("settings-form-init",()=>{const e=j((l,r)=>Je(t,r),"init"),n=j(()=>{FLBuilder.removeHook("didCompleteAJAX",e),FLBuilder.removeHook("didHideLightbox",n)},"clear");FLBuilder.addHook("didCompleteAJAX",e),FLBuilder.addHook("didHideLightbox",n)})},"init"),Je=j((t,e)=>{var n,l,r,i;if(!e.fl_builder_data)return;const a=(n=e.fl_builder_data.form)!=null?n:"";(l=e.settings)!=null;const o=`_tangible_repeater_${t.blockId}_`;if(!a.startsWith(o))return;const s=a.replace(o,""),d=(i=((r=t.conditions.repeater)!=null?r:{})[s])!=null?i:!1;if(!d)return;const c=new J(d),m=K(`form[data-form-id=${a}]`);m&&U(m,()=>Qe(m,t,c,s))},"initVisibility"),Qe=j((t,e,n,l)=>{var r;const i=X(t,(r=e.repeaters[l])!=null?r:{}),a=j(o=>i[o]?i[o].value:void 0,"getValue");for(const o in i){const s=i[o];if(!s.conditions||!s.conditions.length)continue;const d=n.evaluateConditions(s.conditions,a);K(s.element).closest(".fl-field")[d?"show":"hide"]()}},"setVisibility");var Re=Object.defineProperty,Q=u((t,e)=>Re(t,"name",{value:e,configurable:!0}),"l$3");const R=jQuery,He=Q(t=>{const e=new J(t.conditions.general);U(t.form,()=>We(t,e)),Me(t)},"init"),We=Q((t,e)=>{const n=t.getTabSettings(),l=t.getSectionSettings(),r=X(t.form,t.fields),i=Q(a=>r[a]?r[a].value:void 0,"getFieldValue");for(const a in n){const o=n[a];if(!o.conditions||!o.conditions.length)continue;const s=e.evaluateConditions(o.conditions,i),d=R(o.element);d.hasClass("fl-active")||d[s?"show":"hide"]()}for(const a in l){const o=l[a];if(!o.conditions||!o.conditions.length)continue;const s=e.evaluateConditions(o.conditions,i);R(o.element)[s?"show":"hide"]()}for(const a in r){const o=r[a];if(!o.conditions||!o.conditions.length)continue;const s=e.evaluateConditions(o.conditions,i);R(o.element).closest(".fl-field")[s?"show":"hide"]()}},"setVisibility");var qe=Object.defineProperty,Ge=u((t,e)=>qe(t,"name",{value:e,configurable:!0}),"g$3");const{blockConfig:{slug:Ue,visibility:S}}=Tangible,Xe=jQuery,ze=Ge(t=>{const e=Ue+t;FLBuilder.registerModuleHelper(e,{init(){this.bindMethods(),this.form=Xe(".fl-builder-settings"),this.blockId=t,this.tabs=S.tabs[t]||{},this.sections=S.sections[t]||{},this.fields=S.fields[t]||{},this.repeaters=S.repeaters[t]||{},this.conditions=S.conditions[t]||{},!(!Object.keys(this.tabs).length&&!Object.keys(this.sections).length&&!Object.keys(this.fields).length)&&He(this)},bindMethods(){this.getTabSettings=this.getTabSettings.bind(this),this.getSectionSettings=this.getSectionSettings.bind(this)},getTabSettings(){const n={},l=this.form.find(".fl-builder-settings-tabs a");return l.each(r=>{const i=l[r],a=i.getAttribute("href").replace("#fl-builder-settings-tab-","");if(!a)return;const o={name:a};o.conditions=this.tabs[o.name]||!1,o.element=i,n[o.name]=o}),n},getSectionSettings(){const n={},l=this.form.find(".fl-builder-settings-section");return l.each(r=>{const i=l[r],a=i.getAttribute("id").replace("fl-builder-settings-section-","");if(!a)return;const o={name:a};o.conditions=this.sections[o.name]||!1,o.element=i,n[o.name]=o}),n}})},"initModule"),{blockConfig:Ke}=window.Tangible,{fields:Ye}=Ke.visibility;jQuery(()=>{for(const t in Ye)ze(t)});var Ze=Object.defineProperty,et=u((t,e)=>Ze(t,"name",{value:e,configurable:!0}),"i$5");const Y=et(t=>wp.element.createElement("div",{id:"tangible-logic-root",className:"tangible-logic-open"},wp.element.createElement("div",{className:"tangible-logic-modal"},wp.element.createElement("div",{className:"tangible-logic-header"},wp.element.createElement("div",{className:"tangible-logic-title"},t.title?t.title:""),wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button has-icon",type:"button","aria-label":"Close dialog",onClick:t.cancel},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),wp.element.createElement("div",{className:"tangible-logic-rule-group"},t.children),wp.element.createElement("div",{className:"tangible-logic-actions tangible-logic-clear"},wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button is-tertiary",type:"button",onClick:t.cancel},"Cancel"),wp.element.createElement("button",{id:"logic-button-add-logic",className:"tangible-components-button is-primary",type:"button",onClick:t.submit},"Save")))),"Modal");var Z=Object.defineProperty,tt=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,te=u((t,e,n)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"i$4"),ot=u((t,e)=>{for(var n in e||(e={}))lt.call(e,n)&&te(t,n,e[n]);if(ee)for(var n of ee(e))at.call(e,n)&&te(t,n,e[n]);return t},"y$4"),rt=u((t,e)=>tt(t,nt(e)),"a$5"),it=u((t,e)=>Z(t,"name",{value:e,configurable:!0}),"c$3");const ct=it((t,e,n,l)=>tangibleFields.render(rt(ot({context:l==="gutenberg"?"default":l,onChange:r=>t(Array.isArray(r)||typeof r=="object"?JSON.stringify(r):String(r))},n),{value:e})),"getControl");var st=Object.defineProperty,A=u((t,e)=>st(t,"name",{value:e,configurable:!0}),"e");const mt=A(t=>{const{config:e,field:n,builder:l,initialValue:r}=t,i=e.popup,[a,o]=wp.element.useState(l==="beaver-builder"),[s=r,d]=wp.element.useState(),[c=r,m]=wp.element.useState(),p=A(b=>(i||m(b),d(b)),"save");wp.element.useEffect(()=>t.save(c),[c]),wp.element.useEffect(()=>i&&a&&d(c),[a]);const f=wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${e.type}`},ct(p,c,n,l));if(!i)return f;const N=A(()=>o(!1),"cancel"),O=A(()=>{o(!1),m(s)},"submit"),C=l!=="beaver-builder"&&wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${l}`},l==="elementor"&&wp.element.createElement("label",{className:"elementor-control-title"},n.label),wp.element.createElement("button",{onClick:()=>o(!a),class:"components-button is-secondary tangible-control-btn"},"Open Settings"));return a?wp.element.createElement(wp.element.Fragment,null,C,wp.element.createElement(Y,{submit:O,cancel:N,title:n.label},f)):C},"Control");var ut=Object.defineProperty,pt=u((t,e)=>ut(t,"name",{value:e,configurable:!0}),"n$2");const{wp:ne}=window,{useState:dt,useEffect:bt}=ne.element,gt=pt(t=>{const[e,n]=dt(t.initialValue);return bt(()=>t.handler(e),[e]),ne.element.createElement("input",{type:"text",value:e,onChange:l=>n(l.target.value)})},"Text");var le=Object.defineProperty,ae=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,oe=u((t,e,n)=>e in t?le(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"a$3"),yt=u((t,e)=>{for(var n in e||(e={}))vt.call(e,n)&&oe(t,n,e[n]);if(ae)for(var n of ae(e))ft.call(e,n)&&oe(t,n,e[n]);return t},"f$3"),ht=u((t,e)=>le(t,"name",{value:e,configurable:!0}),"g$1");const{jQuery:wt}=window,_=ht(({labelForEmptyValue:t="",options:e=[],value:n="",onChange:l,multiSelect:r,style:i})=>{const a=wp.element.useRef();if(wp.element.useEffect(()=>{if(!a.current)return;const o=wt(a.current);a.current.$el=o,l(n),o.tangibleSelect({minimumResultsForSearch:5}),r&&(o.val(n),o.trigger("change")),o.on("change",function(d){if(!r&&!a.current._silentChange){l(d.target.value);return}if(!a.current||a.current._silentChange)return;const c=o.select2("data").map(m=>m.id);l(c)});const s=a.current.select2=o.data("select2");return()=>{s&&s.destroy()}},[]),a.current&&a.current.$el)if(r){const o=a.current.$el.val();n.length!==o.length&&e.length&&setImmediate(function(){!a.current||!a.current.$el||(a.current.$el.val(n),a.current.$el.trigger("change"))})}else a.current.value!==n&&(a.current._silentChange=!0,a.current.$el.val(n),a.current.$el.trigger("change"),setImmediate(function(){a.current._silentChange=!1}));return wp.element.createElement("select",{ref:a,autoComplete:"off",multiple:r,style:yt({display:"none",width:"160px"},i)},t&&wp.element.createElement("option",{value:"",disabled:!0,selected:n==null},t),e.map((o,s)=>wp.element.createElement("option",{key:`option-${s}`,value:o.value,selected:o.value===n},o.label)))},"Select");var Et=Object.defineProperty,$t=u((t,e)=>Et(t,"name",{value:e,configurable:!0}),"a$2");const _t=$t(({getData:t,setData:e,includeOrder:n,includeOrderBy:l})=>{const r=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"order"},"Order"),wp.element.createElement(_,{labelForEmptyValue:"Choose Order",options:[{label:"ASC",value:"asc"},{label:"DESC",value:"desc"}],value:t("order"),style:{width:"100%"},onChange:s=>e("order",s)}))),i=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby"},"Order by"),wp.element.createElement(_,{labelForEmptyValue:"Order by",options:[{label:"Title",value:"title"},{label:"ID",value:"id"},{label:"Author",value:"author"},{label:"Name",value:"name"},{label:"Type",value:"type"},{label:"Date",value:"date"},{label:"Modified",value:"modified"},{label:"Random",value:"random"},{label:"Comment count",value:"comment_count"},{label:"Relevance",value:"relevance"},{label:"Menu",value:"menu"},{label:"Custom value",value:"meta_value"},{label:"Custom value number",value:"meta_value_num"}],value:t("orderby"),style:{width:"100%"},onChange:s=>e("orderby",s)}))),a=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field"},"Order by custom field"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",name:"orderby-field",id:"orderby_field",onChange:s=>e("orderby_field",s.target.value),placeholder:"Enter field key",value:t("orderby_field")}))),o=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field_number"},"Order by custom field with numeric value"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",id:"orderby_field_number",name:"orderby-field-number",onChange:s=>e("orderby_field_number",s.target.value),placeholder:"Enter field key",value:t("orderby_field_number")})));return wp.element.createElement("div",{className:"tangible-logic-rule"},n&&r,l&&i,t("orderby")==="meta_value"&&a,t("orderby")==="meta_value_num"&&o)},"Order");var Nt=Object.defineProperty,Ct=u((t,e)=>Nt(t,"name",{value:e,configurable:!0}),"p$3");const{useState:re,useEffect:ie}=wp.element,Ot=Ct(({initialLoopType:t,initialType:e,setData:n,fields:l})=>{const[r,i]=re(t||"post"),[a,o]=re(e);ie(()=>n("loopType",r),[r]),ie(()=>n("type",a),[a]);const s=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label"},"Content type"),wp.element.createElement(_,{labelForEmptyValue:"Choose a Type",options:[{label:"Post",value:"post"}],value:r,onChange:c=>i(c),style:{width:"100%"}}))),d=r==="post"?wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"post_type"},"Fields"),wp.element.createElement(_,{labelForEmptyValue:"Choose Fields",value:a?a.split(","):["null"],options:l,multiSelect:!0,style:{width:"100%"},onChange:c=>c=="null"?o(""):o(c.toString())}))):"";return wp.element.createElement("div",{className:"tangible-logic-rule"},s,d)},"Type");var ce=Object.defineProperty,xt=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,St=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,me=u((t,e,n)=>e in t?ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"h$1"),ue=u((t,e)=>{for(var n in e||(e={}))St.call(e,n)&&me(t,n,e[n]);if(se)for(var n of se(e))kt.call(e,n)&&me(t,n,e[n]);return t},"u$5"),pe=u((t,e)=>xt(t,jt(e)),"b$1"),k=u((t,e)=>ce(t,"name",{value:e,configurable:!0}),"m$3");const{Tangible:Pt,wp:v}=window,{useState:de,useEffect:Ft}=v.element,{allTaxonomies:be={}}=Pt.postQueryControlData,At=k(({value:t,initialData:e,save:n,showBtn:l,remove:r})=>{const i=t===1,a=Object.keys(be),[o,s]=de(e);Ft(()=>{n(o)},[o]);const d=k(g=>{const E=be[g];if(E==null||E.length===0)return[];let x=[];return E.forEach(Ve=>{x.push({label:Ve.name,value:Ve.slug})}),x},"getTerms"),c=k(g=>o.hasOwnProperty(g)?o[g]===""?null:o[g]:null,"getParam"),m=k(g=>{N(E=>[]),g.length>0&&N(E=>g)},"updateTerms"),p=k((g,E)=>s(x=>pe(ue({},x),{[g]:E})),"updateParam"),[f,N]=de(o.hasOwnProperty("taxonomy")?d(o.taxonomy):[]),O=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Taxonomy ",!i&&t),v.element.createElement(_,{style:{width:"100%"},labelForEmptyValue:`Taxonomy ${i?"":t}`,options:a.map(g=>({label:g,value:g})),value:c("taxonomy"),onChange:g=>{p("terms",""),p("taxonomy",g);const E=d(g);m(E)}}))),C=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Compare ",!i&&t),v.element.createElement(_,{style:{width:"100%"},labelForEmptyValue:`Compare ${i?"":t}`,options:[{label:"In",value:"in"},{label:"Not",value:"not"},{label:"And",value:"and"},{label:"Exists",value:"exists"},{label:"Not exists",value:"not exists"}],value:o.taxonomy_compare,onChange:g=>p("taxonomy_compare",g)}))),b=c("terms"),$=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Term ",!i&&t),v.element.createElement(_,{style:{width:"100%"},labelForEmptyValue:`Terms ${i?"":t}`,multiSelect:!0,options:f,value:b?b.split(","):["null"],onChange:g=>s(E=>{let x="";return g!="null"&&(x=g.toString()),pe(ue({},E),{terms:x})})})));return v.element.createElement("div",{className:"tangible-logic-rule"},O,C,$,l&&v.element.createElement("button",{id:"logic-button-rule",className:"tangible-components-button is-secondary",type:"button",onClick:r},"Remove"))},"QueryGroup");var Tt=Object.defineProperty,T=u((t,e)=>Tt(t,"name",{value:e,configurable:!0}),"s$3");const{wp:y}=window,{useState:ge,useEffect:ve}=y.element,fe=3,ye=T(({initialData:t,save:e})=>{const[n,l]=ge([]),[r,i]=ge("");ve(()=>{if(!t)return;const c=JSON.parse(t),m=[];if(c.taxonomy_relation&&i(c.taxonomy_relation),!c.taxonomy)return;let p="",f=1;for(;c[`taxonomy${p}`]&&f<=fe&&(p=f!==1?`_${f}`:"",!!c[`taxonomy${p}`]);)m.push({taxonomy:c[`taxonomy${p}`],terms:c[`terms${p}`],taxonomy_compare:c[`taxonomy_compare${p}`]}),f++;l(m)},[]),ve(()=>{const c={};r&&(c.taxonomy_relation=r);for(let m=0;m<n.length;m++){const p=m!==0?`_${m+1}`:"";c[`taxonomy${p}`]=n[m].taxonomy,c[`terms${p}`]=n[m].terms,c[`taxonomy_compare${p}`]=n[m].taxonomy_compare}e(c)},[n,r]);const a=y.element.createElement("div",{className:"tangible-logic-rule tangible-logic-clear"},y.element.createElement("div",{className:"tangible-components-control"},y.element.createElement("div",{className:"tangible-components-control__field"},y.element.createElement("label",{className:"tangible-components-control__label"},"Relation"),y.element.createElement(_,{style:{width:"100%"},labelForEmptyValue:"Choose Relation",options:[{label:"And",value:"and"},{label:"Or",value:"or"}],value:r,onChange:c=>i(c)})))),o=T(()=>{l([...n,{taxonomy:"",terms:"",taxonomy_compare:""}])},"addRow"),s=T((c,m)=>{n[c]=m,l([...n])},"saveRow"),d=T(c=>{l([...n.slice(0,c),...n.slice(c+1)])},"removeRow");return y.element.createElement("div",{className:"tangible-logic-rule-group-box-bordered"},n.length>1&&y.element.createElement("div",{className:"tangible-logic-taxonomy-group"},a),y.element.createElement("div",{className:"tangible-logic-taxonomy-group"},n.length>0&&n.map((c,m)=>y.element.createElement(At,{key:m+JSON.stringify(c),value:m+1,initialData:c,showBtn:!0,save:p=>s(m,p),remove:()=>d(m)}))),n.length<fe&&y.element.createElement("div",{className:"tangible-logic-group-actions"},y.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:o},"Add taxonomy filter"),y.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:()=>l([])},"Remove")))},"Taxonomy");var he=Object.defineProperty,Lt=Object.defineProperties,Vt=Object.getOwnPropertyDescriptors,we=Object.getOwnPropertySymbols,Dt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable,Ee=u((t,e,n)=>e in t?he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"g"),$e=u((t,e)=>{for(var n in e||(e={}))Dt.call(e,n)&&Ee(t,n,e[n]);if(we)for(var n of we(e))Bt.call(e,n)&&Ee(t,n,e[n]);return t},"y$2"),_e=u((t,e)=>Lt(t,Vt(e)),"m$2"),L=u((t,e)=>he(t,"name",{value:e,configurable:!0}),"u$4");const{Tangible:It,wp:h}=window,{useState:Mt,useEffect:Ne}=h.element,{allPostTypes:Ce={}}=It.postQueryControlData||{},Jt=L(({initialData:t,save:e,fields:n=[]})=>{const l=n.replace(/\s+/g,"").split(","),r=L(c=>{try{return JSON.parse(c)}catch(m){return{}}},"parseData"),[i,a]=Mt(r(t));Ne(()=>a(r(t)),[t]),Ne(()=>{e(i)},[i]);const o=L(c=>i[c]&&i[c]!==""?i[c]:null,"getData"),s=L((c,m)=>a(p=>c!=="orderby"?_e($e({},p),{[c]:m}):(m!=="meta_value"&&p.orderby_field&&delete p.orderby_field,m!=="meta_value_num"&&p.orderby_field_number&&delete p.orderby_field_number,_e($e({},p),{[c]:m}))),"updateArgs"),d=h.element.createElement(ye,{initialData:i.hasOwnProperty("taxonomies")?JSON.stringify(i.taxonomies):"{}",save:c=>s("taxonomies",c)});return h.element.createElement(h.element.Fragment,null,(l.includes("order")||l.includes("orderby"))&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Order"),h.element.createElement(_t,{getData:o,setData:s,includeOrder:l.includes("order"),includeOrderBy:l.includes("orderby")})),l.includes("type")&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Type"),h.element.createElement(Ot,{initialLoopType:o("loopType")!==null?o("loopType"):"post",initialType:o("type"),setData:s,fields:Object.keys(Ce).map(c=>({label:Ce[c],value:c}))})),l.includes("taxonomy")&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Filter by Taxonomy"),d))},"PostQuery");var Qt=Object.defineProperty,H=u((t,e)=>Qt(t,"name",{value:e,configurable:!0}),"i");const{wp:w}=window,{element:{useEffect:V,useState:D}}=w,{ajax:Rt}=window.Tangible,Ht=H(({handler:t,initialValue:e,fields:n=[]})=>{const[l,r]=D(e?JSON.parse(e):[]),[i,a]=D(""),[o,s]=D([]),[d,c]=D(!1),m="tangible-block-editor-control-ajax-select",p=n.multiple&&n.multiple==="true";V(()=>{p&&!Array.isArray(l)&&r([l])}),V(()=>{const b={search:i,field:n};Rt(n.ajax_action_name,b).then($=>s($)).catch($=>console.error($))},[i]),V(()=>t(JSON.stringify(l)),[l]),V(()=>{d===!1&&a("")},[d]);const f=H(b=>{r(p?[...l,b]:[b])},"saveValue"),N=H(b=>{const $=l.filter(g=>g.value!==b.value);r([...$])},"removeValue"),O=Array.isArray(l)?l.map(b=>b.value):[],C=w.element.createElement("span",{className:"dashicons dashicons-no-alt"});return w.element.createElement("div",{className:d?`${m} is-open`:m},p&&Array.isArray(l)?w.element.createElement("ul",{className:m+"-choice"},l.map(b=>w.element.createElement("li",{id:b.name},w.element.createElement("button",{onClick:()=>N(b)},C)," ",w.element.createElement("span",null,b.label)," "))):"",w.element.createElement("input",{type:"text",className:m+"-input",onFocus:()=>c(!0),onBlur:()=>c(!1),onChange:b=>{a(b.target.value)},placeholder:n.placeholder?n.placeholder:"Select",value:!d&&!p&&l[0]?l[0].label:i}),d&&w.element.createElement("ul",{class:m+"-ul"},o?o.map(b=>p&&O.includes(b.value)?"":w.element.createElement("li",{id:b.name,onMouseDown:()=>f(b)},b.label!==""?b.label:w.element.createElement("i",null,"Untitled"))):""))},"AjaxSelect");var Oe=Object.defineProperty,xe=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,je=u((t,e,n)=>e in t?Oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"a"),Se=u((t,e)=>{for(var n in e||(e={}))Wt.call(e,n)&&je(t,n,e[n]);if(xe)for(var n of xe(e))qt.call(e,n)&&je(t,n,e[n]);return t},"s$1"),Gt=u((t,e)=>Oe(t,"name",{value:e,configurable:!0}),"l$2");const Ut=Gt((t,e,n,l)=>{switch(t.type){case"post_query":return wp.element.createElement(Jt,{save:a=>e(JSON.stringify(a)),initialData:n,fields:l.include_fields?l.include_fields:"type, order, orderby"});case"taxonomy":return wp.element.createElement(ye,Se({save:a=>e(JSON.stringify(a)),initialData:n},l));case"select2":const r=l.multiple&&l.multiple==="true",i=typeof n=="string"&&r?n!==""?n.split(","):[]:n!==""?n:null;return wp.element.createElement(_,{labelForEmptyValue:"Choose...",options:l.options?Object.keys(l.options).map(a=>({value:a,label:l.options[a]})):[],onChange:a=>e(a!==null?Array.isArray(a)?a.join(","):a:""),multiSelect:r,value:i,style:{width:"100%"}});case"ajax_select":return wp.element.createElement(Ht,{handler:e,initialValue:n,fields:l});default:return wp.element.createElement(gt,Se({handler:e,initialValue:n},l))}},"getLegacyControl");var Xt=Object.defineProperty,B=u((t,e)=>Xt(t,"name",{value:e,configurable:!0}),"l$1");const{useState:W,useEffect:ke}=wp.element,zt=B(t=>{const{config:e,field:n,builder:l,initialValue:r}=t,i=e.popup,[a,o]=W(l==="beaver-builder"),[s=r,d]=W(),[c=r,m]=W(),p=B($=>(i||m($),d($)),"save");ke(()=>t.save(c),[c]),ke(()=>{i&&a&&d(c)},[a]);const f={display:"flex",marginBottom:"10px"},N=wp.element.createElement(wp.element.Fragment,null,l==="elementor"&&!i?wp.element.createElement("label",{className:"elementor-control-title",style:f},n.label):"",wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${e.type}`},Ut(e,p,c,n)));if(!i)return N;const O=B(()=>o(!1),"cancel"),C=B(()=>{o(!1),m(s)},"submit"),b=l!=="beaver-builder"?wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${l}`},l==="elementor"?wp.element.createElement("label",{className:"elementor-control-title",style:f},n.label):"",wp.element.createElement("button",{onClick:()=>o(!a),className:"components-button is-secondary tangible-control-btn"},"Open Settings")):"";return a?wp.element.createElement(wp.element.Fragment,null,b,wp.element.createElement(Y,{submit:C,cancel:O,title:n.label},N)):b},"LegacyControl");var Kt=Object.defineProperty,q=u((t,e)=>Kt(t,"name",{value:e,configurable:!0}),"r$1");const Yt=jQuery,Zt=q(t=>{FLBuilder.addHook("didShowLightbox",()=>{const e=window.parent.document.getElementsByClassName(`${t.prefixed_type}-container`);if(e.length!==0)for(let n=0;n<e.length;n++){const l=e[n],r=Yt(l).next(),i=JSON.parse(l.getAttribute("data-field"));if(!t.popup){wp.element.render(Pe(t,r,i),l);continue}const a=document.createElement("div");a.setAttribute("class",`${t.prefixed_type}-popup-container`),document.body.append(a);const o=`tangible-block-control-button ${t.prefixed_type}-popup-container`;wp.element.render(wp.element.createElement("button",{className:o,onClick:q(()=>{wp.element.unmountComponentAtNode(a),wp.element.render(Pe(t,r,i),a)},"onClickAction")},"Open Settings"),l)}}),FLBuilder.addHook("settings-lightbox-closed",()=>{const e=window.parent.document.getElementsByClassName(`tangible-block-control-${t.prefixed_type}-container`);if(e.length===0)return;for(let l=0;l<e.length;l++)wp.element.unmountComponentAtNode(e[l]);if(!t.popup)return;const n=document.getElementsByClassName(`${t.prefixed_type}-popup-container`);for(let l=0;l<n.length;l++)wp.element.unmountComponentAtNode(n[l])})},"initLegacyControl"),Pe=q((t,e,n)=>wp.element.createElement(zt,{config:t,initialValue:e.val(),builder:"beaver-builder",field:n,save:l=>{e.val(l),e.trigger("change")}}),"initComponent");var en=Object.defineProperty,G=u((t,e)=>en(t,"name",{value:e,configurable:!0}),"r");const{blockConfig:{controls:Fe,legacy_controls:Ae}}=Tangible,Te=jQuery;Te(()=>{for(const t in Fe)tn(Fe[t]);for(const t in Ae)Zt(Ae[t])});const tn=G(t=>{FLBuilder.addHook("didShowLightbox",()=>{const e=window.parent.document.getElementsByClassName(`${t.prefixed_type}-container`);if(e.length!==0)for(let n=0;n<e.length;n++){const l=e[n],r=Te(l).next(),i=JSON.parse(l.getAttribute("data-field"));if(!t.popup){wp.element.render(Le(t,r,i),l);continue}const a=document.createElement("div");a.setAttribute("class",`${t.prefixed_type}-popup-container`),document.body.append(a);const o=`tangible-block-control-button ${t.prefixed_type}-popup-container`;wp.element.render(wp.element.createElement("button",{className:o,onClick:G(()=>{wp.element.unmountComponentAtNode(a),wp.element.render(Le(t,r,field),a)},"onClickAction")},"Open Settings"),l)}}),FLBuilder.addHook("settings-lightbox-closed",()=>{const e=window.parent.document.getElementsByClassName(`tangible-block-control-${t.prefixed_type}-container`);if(e.length===0)return;for(let l=0;l<e.length;l++)wp.element.unmountComponentAtNode(e[l]);if(!t.popup)return;const n=document.getElementsByClassName(`${t.prefixed_type}-popup-container`);for(let l=0;l<n.length;l++)wp.element.unmountComponentAtNode(n[l])})},"initControl"),Le=G((t,e,n)=>wp.element.createElement(mt,{config:t,initialValue:e.val(),builder:"beaver-builder",field:n,save:l=>{e.val(l),e.trigger("change")}}),"initComponent")})();
//# sourceMappingURL=beaver-integration.min.js.map
