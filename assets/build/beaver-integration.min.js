var _t=Object.defineProperty;var g=(H,J)=>_t(H,"name",{value:J,configurable:!0});(function(){"use strict";(function(){const e={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,e);return}}catch{}globalThis.process={env:e}})();var H=Object.defineProperty,J=g((e,t)=>H(e,"name",{value:t,configurable:!0}),"l$1");let Q=g(class{constructor(t){this.conditionsMap=t||[],this.getPreviousLevels=this.getPreviousLevels.bind(this),this.getCondition=this.getCondition.bind(this)}evaluateConditions(t,l){let n=!0;if(!t||!Array.isArray(t))return n;for(const o of t){const r=this.getCondition(o);if(!this.evaluateCondition(r,l))return!1}return n}getCondition(t){const l=t.split("-"),n=parseInt(l[0]),o=parseInt(l[1]);return{number:n,level:o,current:this.conditionsMap[n]?.[o],previousLevels:this.getPreviousLevels(n,o)}}getPreviousLevels(t,l){if(l===0)return[];let n=0;const o=[];for(;n<l;)o.push(this.conditionsMap[t][n]),n++;return o}extractComparisons(t){const l=[];for(const n in t)if(!(n==="compare"||n.slice(0,8)==="compare_"||n==="value"||n.slice(0,6)==="value_")){if(n==="control"||n.slice(0,8)==="control_"){const o=t[n],[r,a=0]=n.split("_");l.push({field:o,value:t[`value${a?"_"+a:""}`],compare:t[`compare${a?"_"+a:""}`]});continue}l.push({field:n,value:t[n]})}return l}evaluateCondition(t,l){let n=!0;for(const r of t.previousLevels){const a=this.extractComparisons(r);for(const{field:i,value:c,compare:p}of a){const s=l(i);if(this.compare(s,c,p))return!1}}const o=this.extractComparisons(t.current);for(const{field:r,value:a,compare:i}of o){const c=l(r);if(!this.compare(c,a,i))return!1}return n}compare(t,l,n="is"){let o=!1;switch(n){case"is":case"equal":case"not":default:o=t===l,n==="not"&&(o=!o);break}return o}},"u");J(Q,"ControlVisibility");var fe=Object.defineProperty,F=g((e,t)=>fe(e,"name",{value:t,configurable:!0}),"a$6");const P=jQuery,z=F((e,t)=>{t(),e.find("select").on("change",t),e.find("input").on("change",t),e.find("input[type=text], input[type=number]").on("input",t);const l=e.find(".fl-editor-field");l.each(n=>{const o=K(l[n]);o&&o.on("change",t)})},"onFormChange"),G=F((e,t)=>{const l=e.find("select, input, .fl-editor-field"),n={};return l.each(o=>{const r=ye(l[o]);r&&(r.conditions=t[r.name]||!1,r.element=l[o],n[r.name]=r)}),n},"getFormFields"),ye=F(e=>{switch(e.tagName){case"SELECT":if(e.multiple)return e.name!==""?{name:e.name,value:P(e).val().join(",")}:!1;case"INPUT":return e.name!==""?{name:e.name,value:P(e).val()}:!1;case"DIV":const t=P(e).attr("data-name"),l=K(e);return{name:t,value:l.getContent()}}return!1},"getFormField"),K=F(e=>{const t=P(e).find(".wp-editor-tabs button").attr("data-wp-editor-id");return window.tinyMCE?window.tinyMCE.get(t):!1},"getEditor");var he=Object.defineProperty,S=g((e,t)=>he(e,"name",{value:t,configurable:!0}),"r$3");const Y=jQuery,we=S(e=>{FLBuilder.addHook("settings-form-init",()=>{const t=S((n,o)=>Ee(e,o),"init"),l=S(()=>{FLBuilder.removeHook("didCompleteAJAX",t),FLBuilder.removeHook("didHideLightbox",l)},"clear");FLBuilder.addHook("didCompleteAJAX",t),FLBuilder.addHook("didHideLightbox",l)})},"init"),Ee=S((e,t)=>{if(!t.fl_builder_data)return;const l=t.fl_builder_data.form??"";t.settings;const n=`_tangible_repeater_${e.blockId}_`;if(!l.startsWith(n))return;const o=l.replace(n,""),r=(e.conditions.repeater??{})[o]??!1;if(!r)return;const a=new Q(r),i=Y(`form[data-form-id=${l}]`);i&&z(i,()=>_e(i,e,a,o))},"initVisibility"),_e=S((e,t,l,n)=>{const o=G(e,t.repeaters[n]??{}),r=S(a=>o[a]?o[a].value:void 0,"getValue");for(const a in o){const i=o[a];if(!i.conditions||!i.conditions.length)continue;const c=l.evaluateConditions(i.conditions,r);Y(i.element).closest(".fl-field")[c?"show":"hide"]()}},"setVisibility");var $e=Object.defineProperty,R=g((e,t)=>$e(e,"name",{value:t,configurable:!0}),"l");const I=jQuery,Ce=R(e=>{const t=new Q(e.conditions.general);z(e.form,()=>Ne(e,t)),we(e)},"init"),Ne=R((e,t)=>{const l=e.getTabSettings(),n=e.getSectionSettings(),o=G(e.form,e.fields),r=R(a=>o[a]?o[a].value:void 0,"getFieldValue");for(const a in l){const i=l[a];if(!i.conditions||!i.conditions.length)continue;const c=t.evaluateConditions(i.conditions,r),p=I(i.element);p.hasClass("fl-active")||p[c?"show":"hide"]()}for(const a in n){const i=n[a];if(!i.conditions||!i.conditions.length)continue;const c=t.evaluateConditions(i.conditions,r);I(i.element)[c?"show":"hide"]()}for(const a in o){const i=o[a];if(!i.conditions||!i.conditions.length)continue;const c=t.evaluateConditions(i.conditions,r);I(i.element).closest(".fl-field")[c?"show":"hide"]()}},"setVisibility");var xe=Object.defineProperty,Oe=g((e,t)=>xe(e,"name",{value:t,configurable:!0}),"g$2");const{blockConfig:{slug:Se,visibility:k}}=Tangible,ke=jQuery,je=Oe(e=>{const t=Se+e;FLBuilder.registerModuleHelper(t,{init(){this.bindMethods(),this.form=ke(".fl-builder-settings"),this.blockId=e,this.tabs=k.tabs[e]||{},this.sections=k.sections[e]||{},this.fields=k.fields[e]||{},this.repeaters=k.repeaters[e]||{},this.conditions=k.conditions[e]||{},!(!Object.keys(this.tabs).length&&!Object.keys(this.sections).length&&!Object.keys(this.fields).length)&&Ce(this)},bindMethods(){this.getTabSettings=this.getTabSettings.bind(this),this.getSectionSettings=this.getSectionSettings.bind(this)},getTabSettings(){const l={},n=this.form.find(".fl-builder-settings-tabs a");return n.each(o=>{const r=n[o],a=r.getAttribute("href").replace("#fl-builder-settings-tab-","");if(!a)return;const i={name:a};i.conditions=this.tabs[i.name]||!1,i.element=r,l[i.name]=i}),l},getSectionSettings(){const l={},n=this.form.find(".fl-builder-settings-section");return n.each(o=>{const r=n[o],a=r.getAttribute("id").replace("fl-builder-settings-section-","");if(!a)return;const i={name:a};i.conditions=this.sections[i.name]||!1,i.element=r,l[i.name]=i}),l}})},"initModule"),{blockConfig:Fe}=window.Tangible,{fields:Pe}=Fe.visibility;jQuery(()=>{for(const e in Pe)je(e)});var Te=Object.defineProperty,Ae=g((e,t)=>Te(e,"name",{value:t,configurable:!0}),"i$6");const Z=Ae(e=>wp.element.createElement("div",{id:"tangible-logic-root",className:"tangible-logic-open"},wp.element.createElement("div",{className:"tangible-logic-modal"},wp.element.createElement("div",{className:"tangible-logic-header"},wp.element.createElement("div",{className:"tangible-logic-title"},e.title?e.title:""),wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button has-icon",type:"button","aria-label":"Close dialog",onClick:e.cancel},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),wp.element.createElement("div",{className:"tangible-logic-rule-group"},e.children),wp.element.createElement("div",{className:"tangible-logic-actions tangible-logic-clear"},wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button is-tertiary",type:"button",onClick:e.cancel},"Cancel"),wp.element.createElement("button",{id:"logic-button-add-logic",className:"tangible-components-button is-primary",type:"button",onClick:e.submit},"Save")))),"Modal");var Le=Object.defineProperty,Ve=g((e,t)=>Le(e,"name",{value:t,configurable:!0}),"o$1");const Be=Ve((e,t,l,n)=>tangibleFields.render({context:n==="gutenberg"?"wp":n,onChange:o=>e(Array.isArray(o)||typeof o=="object"?JSON.stringify(o):String(o)),...l,value:t}),"getControl");var De=Object.defineProperty,T=g((e,t)=>De(e,"name",{value:t,configurable:!0}),"e");const Me=T(e=>{const{config:t,field:l,builder:n,initialValue:o}=e,r=t.popup,[a,i]=wp.element.useState(n==="beaver-builder"),[c=o,p]=wp.element.useState(),[s=o,m]=wp.element.useState(),u=T(d=>(r||m(d),p(d)),"save");wp.element.useEffect(()=>e.save(s),[s]),wp.element.useEffect(()=>r&&a&&p(s),[a]);const f=wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${t.type}`},Be(u,s,l,n));if(!r)return f;const C=T(()=>i(!1),"cancel"),x=T(()=>{i(!1),m(c)},"submit"),N=n!=="beaver-builder"&&wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${n}`},n==="elementor"&&wp.element.createElement("label",{className:"elementor-control-title"},l.label),wp.element.createElement("button",{onClick:()=>i(!a),class:"components-button is-secondary tangible-control-btn"},"Open Settings"));return a?wp.element.createElement(wp.element.Fragment,null,N,wp.element.createElement(Z,{submit:x,cancel:C,title:l.label},f)):N},"Control");var He=Object.defineProperty,Je=g((e,t)=>He(e,"name",{value:t,configurable:!0}),"n$2");const{wp:ee}=window,{useState:Qe,useEffect:Re}=ee.element,Ie=Je(e=>{const[t,l]=Qe(e.initialValue);return Re(()=>e.handler(t),[t]),ee.element.createElement("input",{type:"text",value:t,onChange:n=>l(n.target.value)})},"Text");var We=Object.defineProperty,qe=g((e,t)=>We(e,"name",{value:t,configurable:!0}),"i$3");const{jQuery:Ue}=window,$=qe(({labelForEmptyValue:e="",options:t=[],value:l="",onChange:n,multiSelect:o,style:r})=>{const a=wp.element.useRef();if(wp.element.useEffect(()=>{if(!a.current)return;const i=Ue(a.current);a.current.$el=i,n(l),i.tangibleSelect({minimumResultsForSearch:5}),o&&(i.val(l),i.trigger("change")),i.on("change",function(p){if(!o&&!a.current._silentChange){n(p.target.value);return}if(!a.current||a.current._silentChange)return;const s=i.select2("data").map(m=>m.id);n(s)});const c=a.current.select2=i.data("select2");return()=>{c&&c.destroy()}},[]),a.current&&a.current.$el)if(o){const i=a.current.$el.val();l.length!==i.length&&t.length&&setTimeout(function(){!a.current||!a.current.$el||(a.current.$el.val(l),a.current.$el.trigger("change"))},0)}else a.current.value!==l&&(a.current._silentChange=!0,a.current.$el.val(l),a.current.$el.trigger("change"),setTimeout(function(){a.current._silentChange=!1},0));return wp.element.createElement("select",{ref:a,autoComplete:"off",multiple:o,style:{display:"none",width:"160px",...r}},e&&wp.element.createElement("option",{value:"",disabled:!0,selected:l==null},e),t.map((i,c)=>wp.element.createElement("option",{key:`option-${c}`,value:i.value,selected:i.value===l},i.label)))},"Select");var Xe=Object.defineProperty,ze=g((e,t)=>Xe(e,"name",{value:t,configurable:!0}),"a$2");const Ge=ze(({getData:e,setData:t,includeOrder:l,includeOrderBy:n})=>{const o=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"order"},"Order"),wp.element.createElement($,{labelForEmptyValue:"Choose Order",options:[{label:"ASC",value:"asc"},{label:"DESC",value:"desc"}],value:e("order"),style:{width:"100%"},onChange:c=>t("order",c)}))),r=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby"},"Order by"),wp.element.createElement($,{labelForEmptyValue:"Order by",options:[{label:"Title",value:"title"},{label:"ID",value:"id"},{label:"Author",value:"author"},{label:"Name",value:"name"},{label:"Type",value:"type"},{label:"Date",value:"date"},{label:"Modified",value:"modified"},{label:"Random",value:"random"},{label:"Comment count",value:"comment_count"},{label:"Relevance",value:"relevance"},{label:"Menu",value:"menu"},{label:"Custom value",value:"meta_value"},{label:"Custom value number",value:"meta_value_num"}],value:e("orderby"),style:{width:"100%"},onChange:c=>t("orderby",c)}))),a=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field"},"Order by custom field"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",name:"orderby-field",id:"orderby_field",onChange:c=>t("orderby_field",c.target.value),placeholder:"Enter field key",value:e("orderby_field")}))),i=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field_number"},"Order by custom field with numeric value"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",id:"orderby_field_number",name:"orderby-field-number",onChange:c=>t("orderby_field_number",c.target.value),placeholder:"Enter field key",value:e("orderby_field_number")})));return wp.element.createElement("div",{className:"tangible-logic-rule"},l&&o,n&&r,e("orderby")==="meta_value"&&a,e("orderby")==="meta_value_num"&&i)},"Order");var Ke=Object.defineProperty,Ye=g((e,t)=>Ke(e,"name",{value:t,configurable:!0}),"p$3");const{useState:te,useEffect:ne}=wp.element,Ze=Ye(({initialLoopType:e,initialType:t,setData:l,fields:n})=>{const[o,r]=te(e||"post"),[a,i]=te(t);ne(()=>l("loopType",o),[o]),ne(()=>l("type",a),[a]);const c=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label"},"Content type"),wp.element.createElement($,{labelForEmptyValue:"Choose a Type",options:[{label:"Post",value:"post"}],value:o,onChange:s=>r(s),style:{width:"100%"}}))),p=o==="post"?wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"post_type"},"Fields"),wp.element.createElement($,{labelForEmptyValue:"Choose Fields",value:a?a.split(","):["null"],options:n,multiSelect:!0,style:{width:"100%"},onChange:s=>s=="null"?i(""):i(s.toString())}))):"";return wp.element.createElement("div",{className:"tangible-logic-rule"},c,p)},"Type");var et=Object.defineProperty,j=g((e,t)=>et(e,"name",{value:t,configurable:!0}),"r$1");const{Tangible:tt,wp:v}=window,{useState:le,useEffect:nt}=v.element,{allTaxonomies:ae={}}=tt.postQueryControlData,lt=j(({value:e,initialData:t,save:l,showBtn:n,remove:o})=>{const r=e===1,a=Object.keys(ae),[i,c]=le(t);nt(()=>{l(i)},[i]);const p=j(b=>{const E=ae[b];if(E==null||E.length===0)return[];let O=[];return E.forEach(ve=>{O.push({label:ve.name,value:ve.slug})}),O},"getTerms"),s=j(b=>i.hasOwnProperty(b)?i[b]===""?null:i[b]:null,"getParam"),m=j(b=>{C(E=>[]),b.length>0&&C(E=>b)},"updateTerms"),u=j((b,E)=>c(O=>({...O,[b]:E})),"updateParam"),[f,C]=le(i.hasOwnProperty("taxonomy")?p(i.taxonomy):[]),x=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Taxonomy ",!r&&e),v.element.createElement($,{style:{width:"100%"},labelForEmptyValue:`Taxonomy ${r?"":e}`,options:a.map(b=>({label:b,value:b})),value:s("taxonomy"),onChange:b=>{u("terms",""),u("taxonomy",b);const E=p(b);m(E)}}))),N=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Compare ",!r&&e),v.element.createElement($,{style:{width:"100%"},labelForEmptyValue:`Compare ${r?"":e}`,options:[{label:"In",value:"in"},{label:"Not",value:"not"},{label:"And",value:"and"},{label:"Exists",value:"exists"},{label:"Not exists",value:"not exists"}],value:i.taxonomy_compare,onChange:b=>u("taxonomy_compare",b)}))),d=s("terms"),_=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Term ",!r&&e),v.element.createElement($,{style:{width:"100%"},labelForEmptyValue:`Terms ${r?"":e}`,multiSelect:!0,options:f,value:d?d.split(","):["null"],onChange:b=>c(E=>{let O="";return b!="null"&&(O=b.toString()),{...E,terms:O}})})));return v.element.createElement("div",{className:"tangible-logic-rule"},x,N,_,n&&v.element.createElement("button",{id:"logic-button-rule",className:"tangible-components-button is-secondary",type:"button",onClick:o},"Remove"))},"QueryGroup");var at=Object.defineProperty,A=g((e,t)=>at(e,"name",{value:t,configurable:!0}),"s$3");const{wp:y}=window,{useState:oe,useEffect:ie}=y.element,re=3,se=A(({initialData:e,save:t})=>{const[l,n]=oe([]),[o,r]=oe("");ie(()=>{if(!e)return;const s=JSON.parse(e),m=[];if(s.taxonomy_relation&&r(s.taxonomy_relation),!s.taxonomy)return;let u="",f=1;for(;s[`taxonomy${u}`]&&f<=re&&(u=f!==1?`_${f}`:"",!!s[`taxonomy${u}`]);)m.push({taxonomy:s[`taxonomy${u}`],terms:s[`terms${u}`],taxonomy_compare:s[`taxonomy_compare${u}`]}),f++;n(m)},[]),ie(()=>{const s={};o&&(s.taxonomy_relation=o);for(let m=0;m<l.length;m++){const u=m!==0?`_${m+1}`:"";s[`taxonomy${u}`]=l[m].taxonomy,s[`terms${u}`]=l[m].terms,s[`taxonomy_compare${u}`]=l[m].taxonomy_compare}t(s)},[l,o]);const a=y.element.createElement("div",{className:"tangible-logic-rule tangible-logic-clear"},y.element.createElement("div",{className:"tangible-components-control"},y.element.createElement("div",{className:"tangible-components-control__field"},y.element.createElement("label",{className:"tangible-components-control__label"},"Relation"),y.element.createElement($,{style:{width:"100%"},labelForEmptyValue:"Choose Relation",options:[{label:"And",value:"and"},{label:"Or",value:"or"}],value:o,onChange:s=>r(s)})))),i=A(()=>{n([...l,{taxonomy:"",terms:"",taxonomy_compare:""}])},"addRow"),c=A((s,m)=>{l[s]=m,n([...l])},"saveRow"),p=A(s=>{n([...l.slice(0,s),...l.slice(s+1)])},"removeRow");return y.element.createElement("div",{className:"tangible-logic-rule-group-box-bordered"},l.length>1&&y.element.createElement("div",{className:"tangible-logic-taxonomy-group"},a),y.element.createElement("div",{className:"tangible-logic-taxonomy-group"},l.length>0&&l.map((s,m)=>y.element.createElement(lt,{key:m+JSON.stringify(s),value:m+1,initialData:s,showBtn:!0,save:u=>c(m,u),remove:()=>p(m)}))),l.length<re&&y.element.createElement("div",{className:"tangible-logic-group-actions"},y.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:i},"Add taxonomy filter"),y.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:()=>n([])},"Remove")))},"Taxonomy");var ot=Object.defineProperty,L=g((e,t)=>ot(e,"name",{value:t,configurable:!0}),"s$2");const{Tangible:it,wp:h}=window,{useState:rt,useEffect:ce}=h.element,{allPostTypes:me={}}=it.postQueryControlData||{},st=L(({initialData:e,save:t,fields:l=[]})=>{const n=l.replace(/\s+/g,"").split(","),o=L(s=>{try{return JSON.parse(s)}catch{return{}}},"parseData"),[r,a]=rt(o(e));ce(()=>a(o(e)),[e]),ce(()=>{t(r)},[r]);const i=L(s=>r[s]&&r[s]!==""?r[s]:null,"getData"),c=L((s,m)=>a(u=>s!=="orderby"?{...u,[s]:m}:(m!=="meta_value"&&u.orderby_field&&delete u.orderby_field,m!=="meta_value_num"&&u.orderby_field_number&&delete u.orderby_field_number,{...u,[s]:m})),"updateArgs"),p=h.element.createElement(se,{initialData:r.hasOwnProperty("taxonomies")?JSON.stringify(r.taxonomies):"{}",save:s=>c("taxonomies",s)});return h.element.createElement(h.element.Fragment,null,(n.includes("order")||n.includes("orderby"))&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Order"),h.element.createElement(Ge,{getData:i,setData:c,includeOrder:n.includes("order"),includeOrderBy:n.includes("orderby")})),n.includes("type")&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Type"),h.element.createElement(Ze,{initialLoopType:i("loopType")!==null?i("loopType"):"post",initialType:i("type"),setData:c,fields:Object.keys(me).map(s=>({label:me[s],value:s}))})),n.includes("taxonomy")&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Filter by Taxonomy"),p))},"PostQuery");var ct=Object.defineProperty,W=g((e,t)=>ct(e,"name",{value:t,configurable:!0}),"i$1");const{wp:w}=window,{element:{useEffect:V,useState:B}}=w,{ajax:mt}=window.Tangible,ut=W(({handler:e,initialValue:t,fields:l=[]})=>{const[n,o]=B(t?JSON.parse(t):[]),[r,a]=B(""),[i,c]=B([]),[p,s]=B(!1),m="tangible-block-editor-control-ajax-select",u=l.multiple&&l.multiple==="true";V(()=>{u&&!Array.isArray(n)&&o([n])}),V(()=>{const d={search:r,field:l};mt(l.ajax_action_name,d).then(_=>c(_)).catch(_=>console.error(_))},[r]),V(()=>e(JSON.stringify(n)),[n]),V(()=>{p===!1&&a("")},[p]);const f=W(d=>{o(u?[...n,d]:[d])},"saveValue"),C=W(d=>{const _=n.filter(b=>b.value!==d.value);o([..._])},"removeValue"),x=Array.isArray(n)?n.map(d=>d.value):[],N=w.element.createElement("span",{className:"dashicons dashicons-no-alt"});return w.element.createElement("div",{className:p?`${m} is-open`:m},u&&Array.isArray(n)?w.element.createElement("ul",{className:m+"-choice"},n.map(d=>w.element.createElement("li",{id:d.name},w.element.createElement("button",{onClick:()=>C(d)},N)," ",w.element.createElement("span",null,d.label)," "))):"",w.element.createElement("input",{type:"text",className:m+"-input",onFocus:()=>s(!0),onBlur:()=>s(!1),onChange:d=>{a(d.target.value)},placeholder:l.placeholder?l.placeholder:"Select",value:!p&&!u&&n[0]?n[0].label:r}),p&&w.element.createElement("ul",{class:m+"-ul"},i?i.map(d=>u&&x.includes(d.value)?"":w.element.createElement("li",{id:d.name,onMouseDown:()=>f(d)},d.label!==""?d.label:w.element.createElement("i",null,"Untitled"))):""))},"AjaxSelect");var dt=Object.defineProperty,pt=g((e,t)=>dt(e,"name",{value:t,configurable:!0}),"n$1");const bt=pt((e,t,l,n)=>{switch(e.type){case"post_query":return wp.element.createElement(st,{save:a=>t(JSON.stringify(a)),initialData:l,fields:n.include_fields?n.include_fields:"type, order, orderby"});case"taxonomy":return wp.element.createElement(se,{save:a=>t(JSON.stringify(a)),initialData:l,...n});case"select2":const o=n.multiple&&n.multiple==="true",r=typeof l=="string"&&o?l!==""?l.split(","):[]:l!==""?l:null;return wp.element.createElement($,{labelForEmptyValue:"Choose...",options:n.options?Object.keys(n.options).map(a=>({value:a,label:n.options[a]})):[],onChange:a=>t(a!==null?Array.isArray(a)?a.join(","):a:""),multiSelect:o,value:r,style:{width:"100%"}});case"ajax_select":return wp.element.createElement(ut,{handler:t,initialValue:l,fields:n});default:return wp.element.createElement(Ie,{handler:t,initialValue:l,...n})}},"getLegacyControl");var gt=Object.defineProperty,D=g((e,t)=>gt(e,"name",{value:t,configurable:!0}),"n");const{useState:q,useEffect:U}=wp.element,vt=D(e=>{const{config:t,field:l,builder:n,initialValue:o}=e,r=t.popup,[a,i]=q(n==="beaver-builder"),[c=o,p]=q(),[s=o,m]=q(),u=D(_=>(r||m(_),p(_)),"save");U(()=>e.save(s),[s]),U(()=>{r&&a&&p(s)},[a]),U(()=>{!a&&e.onPopupClose&&e.onPopupClose()},[a]);const f={display:"flex",marginBottom:"10px"},C=wp.element.createElement(wp.element.Fragment,null,n==="elementor"&&!r?wp.element.createElement("label",{className:"elementor-control-title",style:f},l.label):"",wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${t.type}`},bt(t,u,s,l)));if(!r)return C;const x=D(()=>i(!1),"cancel"),N=D(()=>{i(!1),m(c)},"submit"),d=n!=="beaver-builder"?wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${n}`},n==="elementor"?wp.element.createElement("label",{className:"elementor-control-title",style:f},l.label):"",wp.element.createElement("button",{onClick:()=>i(!a),className:"components-button is-secondary tangible-control-btn"},"Open Settings")):"";return a?wp.element.createElement(wp.element.Fragment,null,d,wp.element.createElement(Z,{submit:N,cancel:x,title:l.label},C)):d},"LegacyControl");var ft=Object.defineProperty,M=g((e,t)=>ft(e,"name",{value:t,configurable:!0}),"i");const yt=jQuery,ht=M(e=>{FLBuilder.addHook("didShowLightbox",()=>{const t=window.parent.document.getElementsByClassName(`${e.prefixed_type}-container`);if(t.length!==0){document.body.classList.add("tangible-block-legacy-is-edited");for(let l=0;l<t.length;l++){const n=t[l],o=yt(n).next(),r=JSON.parse(n.getAttribute("data-field"));if(!e.popup){wp.element.render(ue(e,o,r),n);continue}const a=document.createElement("div");a.setAttribute("class",`${e.prefixed_type}-popup-container`),document.body.append(a);const i=`tangible-block-control-button ${e.prefixed_type}-popup-container`;wp.element.render(wp.element.createElement("button",{className:i,onClick:M(()=>{wp.element.unmountComponentAtNode(a),document.body.classList.add("tangible-block-legacy-popup-is-open"),wp.element.render(ue(e,o,r,M(()=>document.body.classList.remove("tangible-block-legacy-popup-is-open"),"onClose")),a)},"onClickAction")},"Open Settings"),n)}}}),FLBuilder.addHook("settings-lightbox-closed",()=>{document.body.classList.remove("tangible-block-legacy-is-edited");const t=window.parent.document.getElementsByClassName(`tangible-block-control-${e.prefixed_type}-container`);if(t.length===0)return;for(let n=0;n<t.length;n++)wp.element.unmountComponentAtNode(t[n]);if(!e.popup)return;const l=document.getElementsByClassName(`${e.prefixed_type}-popup-container`);for(let n=0;n<l.length;n++)wp.element.unmountComponentAtNode(l[n])}),FLBuilder.addHook("hideContentPanel",()=>{document.body.classList.remove("tangible-block-legacy-is-edited")})},"initLegacyControl"),ue=M((e,t,l,n=!1)=>wp.element.createElement(vt,{config:e,initialValue:t.val(),builder:"beaver-builder",field:l,save:o=>{t.val(o),t.trigger("change")},onPopupClose:n}),"initComponent");var wt=Object.defineProperty,X=g((e,t)=>wt(e,"name",{value:t,configurable:!0}),"r");const{blockConfig:{controls:de,legacy_controls:pe}}=Tangible,be=jQuery;be(()=>{for(const e in de)Et(de[e]);for(const e in pe)ht(pe[e])});const Et=X(e=>{FLBuilder.addHook("didShowLightbox",()=>{const t=window.parent.document.getElementsByClassName(`${e.prefixed_type}-container`);if(t.length!==0)for(let l=0;l<t.length;l++){const n=t[l],o=be(n).next(),r=JSON.parse(n.getAttribute("data-field"));if(!e.popup){wp.element.render(ge(e,o,r),n);continue}const a=document.createElement("div");a.setAttribute("class",`${e.prefixed_type}-popup-container`),document.body.append(a);const i=`tangible-block-control-button ${e.prefixed_type}-popup-container`;wp.element.render(wp.element.createElement("button",{className:i,onClick:X(()=>{wp.element.unmountComponentAtNode(a),wp.element.render(ge(e,o,field),a)},"onClickAction")},"Open Settings"),n)}}),FLBuilder.addHook("settings-lightbox-closed",()=>{const t=window.parent.document.getElementsByClassName(`tangible-block-control-${e.prefixed_type}-container`);if(t.length===0)return;for(let n=0;n<t.length;n++)wp.element.unmountComponentAtNode(t[n]);if(!e.popup)return;const l=document.getElementsByClassName(`${e.prefixed_type}-popup-container`);for(let n=0;n<l.length;n++)wp.element.unmountComponentAtNode(l[n])})},"initControl"),ge=X((e,t,l)=>wp.element.createElement(Me,{config:e,initialValue:t.val(),builder:"beaver-builder",field:l,save:n=>{t.val(n),t.trigger("change")}}),"initComponent")})();
//# sourceMappingURL=beaver-integration.min.js.map
