var Ct=Object.defineProperty;var g=(J,Q)=>Ct(J,"name",{value:Q,configurable:!0});(function(){"use strict";var F;(function(){const e={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,e);return}}catch{}globalThis.process={env:e}})();var J=Object.defineProperty,Q=g((e,t)=>J(e,"name",{value:t,configurable:!0}),"l$1");const z=(F=class{constructor(t){this.conditionsMap=t||[],this.getPreviousLevels=this.getPreviousLevels.bind(this),this.getCondition=this.getCondition.bind(this)}evaluateConditions(t,l){let n=!0;if(!t||!Array.isArray(t))return n;for(const o of t){const r=this.getCondition(o);if(!this.evaluateCondition(r,l))return!1}return n}getCondition(t){const l=t.split("-"),n=parseInt(l[0]),o=parseInt(l[1]);return{number:n,level:o,current:this.conditionsMap[n]?.[o],previousLevels:this.getPreviousLevels(n,o)}}getPreviousLevels(t,l){if(l===0)return[];let n=0;const o=[];for(;n<l;)o.push(this.conditionsMap[t][n]),n++;return o}extractComparisons(t){const l=[];for(const n in t)if(!(n==="compare"||n.slice(0,8)==="compare_"||n==="value"||n.slice(0,6)==="value_")){if(n==="control"||n.slice(0,8)==="control_"){const o=t[n],[r,a=0]=n.split("_");l.push({field:o,value:t[`value${a?"_"+a:""}`],compare:t[`compare${a?"_"+a:""}`]});continue}l.push({field:n,value:t[n]})}return l}evaluateCondition(t,l){let n=!0;for(const r of t.previousLevels){const a=this.extractComparisons(r);for(const{field:i,value:c,compare:p}of a){const s=l(i);if(this.compare(s,c,p))return!1}}const o=this.extractComparisons(t.current);for(const{field:r,value:a,compare:i}of o){const c=l(r);if(!this.compare(c,a,i))return!1}return n}compare(t,l,n="is"){let o=!1;switch(n){case"is":case"equal":case"not":default:o=t===l,n==="not"&&(o=!o);break}return o}},g(F,"u"),F);Q(z,"ControlVisibility");let G=z;var he=Object.defineProperty,P=g((e,t)=>he(e,"name",{value:t,configurable:!0}),"a$7");const T=jQuery,K=P((e,t)=>{t(),e.find("select").on("change",t),e.find("input").on("change",t),e.find("input[type=text], input[type=number]").on("input",t);const l=e.find(".fl-editor-field");l.each(n=>{const o=Z(l[n]);o&&o.on("change",t)})},"onFormChange"),Y=P((e,t)=>{const l=e.find("select, input, .fl-editor-field"),n={};return l.each(o=>{const r=we(l[o]);r&&(r.conditions=t[r.name]||!1,r.element=l[o],n[r.name]=r)}),n},"getFormFields"),we=P(e=>{switch(e.tagName){case"SELECT":if(e.multiple)return e.name!==""?{name:e.name,value:T(e).val().join(",")}:!1;case"INPUT":return e.name!==""?{name:e.name,value:T(e).val()}:!1;case"DIV":const t=T(e).attr("data-name"),l=Z(e);return{name:t,value:l.getContent()}}return!1},"getFormField"),Z=P(e=>{const t=T(e).find(".wp-editor-tabs button").attr("data-wp-editor-id");return window.tinyMCE?window.tinyMCE.get(t):!1},"getEditor");var Ee=Object.defineProperty,S=g((e,t)=>Ee(e,"name",{value:t,configurable:!0}),"r$4");const ee=jQuery,_e=S(e=>{FLBuilder.addHook("settings-form-init",()=>{const t=S((n,o)=>$e(e,o),"init"),l=S(()=>{FLBuilder.removeHook("didCompleteAJAX",t),FLBuilder.removeHook("didHideLightbox",l)},"clear");FLBuilder.addHook("didCompleteAJAX",t),FLBuilder.addHook("didHideLightbox",l)})},"init"),$e=S((e,t)=>{if(!t.fl_builder_data)return;const l=t.fl_builder_data.form??"";t.settings;const n=`_tangible_repeater_${e.blockId}_`;if(!l.startsWith(n))return;const o=l.replace(n,""),r=(e.conditions.repeater??{})[o]??!1;if(!r)return;const a=new G(r),i=ee(`form[data-form-id=${l}]`);i&&K(i,()=>Ce(i,e,a,o))},"initVisibility"),Ce=S((e,t,l,n)=>{const o=Y(e,t.repeaters[n]??{}),r=S(a=>o[a]?o[a].value:void 0,"getValue");for(const a in o){const i=o[a];if(!i.conditions||!i.conditions.length)continue;const c=l.evaluateConditions(i.conditions,r);ee(i.element).closest(".fl-field")[c?"show":"hide"]()}},"setVisibility");var Ne=Object.defineProperty,R=g((e,t)=>Ne(e,"name",{value:t,configurable:!0}),"l");const I=jQuery,xe=R(e=>{const t=new G(e.conditions.general);K(e.form,()=>Oe(e,t)),_e(e)},"init"),Oe=R((e,t)=>{const l=e.getTabSettings(),n=e.getSectionSettings(),o=Y(e.form,e.fields),r=R(a=>o[a]?o[a].value:void 0,"getFieldValue");for(const a in l){const i=l[a];if(!i.conditions||!i.conditions.length)continue;const c=t.evaluateConditions(i.conditions,r),p=I(i.element);p.hasClass("fl-active")||p[c?"show":"hide"]()}for(const a in n){const i=n[a];if(!i.conditions||!i.conditions.length)continue;const c=t.evaluateConditions(i.conditions,r);I(i.element)[c?"show":"hide"]()}for(const a in o){const i=o[a];if(!i.conditions||!i.conditions.length)continue;const c=t.evaluateConditions(i.conditions,r);I(i.element).closest(".fl-field")[c?"show":"hide"]()}},"setVisibility");var Se=Object.defineProperty,ke=g((e,t)=>Se(e,"name",{value:t,configurable:!0}),"g$3");const{blockConfig:{slug:je,visibility:k}}=Tangible,Fe=jQuery,Pe=ke(e=>{const t=je+e;FLBuilder.registerModuleHelper(t,{init(){this.bindMethods(),this.form=Fe(".fl-builder-settings"),this.blockId=e,this.tabs=k.tabs[e]||{},this.sections=k.sections[e]||{},this.fields=k.fields[e]||{},this.repeaters=k.repeaters[e]||{},this.conditions=k.conditions[e]||{},!(!Object.keys(this.tabs).length&&!Object.keys(this.sections).length&&!Object.keys(this.fields).length)&&xe(this)},bindMethods(){this.getTabSettings=this.getTabSettings.bind(this),this.getSectionSettings=this.getSectionSettings.bind(this)},getTabSettings(){const l={},n=this.form.find(".fl-builder-settings-tabs a");return n.each(o=>{const r=n[o],a=r.getAttribute("href").replace("#fl-builder-settings-tab-","");if(!a)return;const i={name:a};i.conditions=this.tabs[i.name]||!1,i.element=r,l[i.name]=i}),l},getSectionSettings(){const l={},n=this.form.find(".fl-builder-settings-section");return n.each(o=>{const r=n[o],a=r.getAttribute("id").replace("fl-builder-settings-section-","");if(!a)return;const i={name:a};i.conditions=this.sections[i.name]||!1,i.element=r,l[i.name]=i}),l}})},"initModule"),{blockConfig:Te}=window.Tangible,{fields:Ae}=Te.visibility;jQuery(()=>{for(const e in Ae)Pe(e)});var Le=Object.defineProperty,Ve=g((e,t)=>Le(e,"name",{value:t,configurable:!0}),"i$5");const te=Ve(e=>wp.element.createElement("div",{id:"tangible-logic-root",className:"tangible-logic-open"},wp.element.createElement("div",{className:"tangible-logic-modal"},wp.element.createElement("div",{className:"tangible-logic-header"},wp.element.createElement("div",{className:"tangible-logic-title"},e.title?e.title:""),wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button has-icon",type:"button","aria-label":"Close dialog",onClick:e.cancel},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),wp.element.createElement("div",{className:"tangible-logic-rule-group"},e.children),wp.element.createElement("div",{className:"tangible-logic-actions tangible-logic-clear"},wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button is-tertiary",type:"button",onClick:e.cancel},"Cancel"),wp.element.createElement("button",{id:"logic-button-add-logic",className:"tangible-components-button is-primary",type:"button",onClick:e.submit},"Save")))),"Modal");var Be=Object.defineProperty,De=g((e,t)=>Be(e,"name",{value:t,configurable:!0}),"r$2");const Me=De((e,t,l,n)=>tangibleFields.render({context:n==="gutenberg"?"wp":n,onChange:o=>e(Array.isArray(o)||typeof o=="object"?JSON.stringify(o):String(o)),...l,value:t,portalContainer:n==="beaver-builder"?window.parent.document.body:document.body}),"getControl");var He=Object.defineProperty,A=g((e,t)=>He(e,"name",{value:t,configurable:!0}),"e");const Je=A(e=>{const{config:t,field:l,builder:n,initialValue:o}=e,r=t.popup,[a,i]=wp.element.useState(n==="beaver-builder"),[c=o,p]=wp.element.useState(),[s=o,m]=wp.element.useState(),u=A(d=>(r||m(d),p(d)),"save");wp.element.useEffect(()=>e.save(s),[s]),wp.element.useEffect(()=>r&&a&&p(s),[a]);const f=wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${t.type}`},Me(u,s,l,n));if(!r)return f;const C=A(()=>i(!1),"cancel"),x=A(()=>{i(!1),m(c)},"submit"),N=n!=="beaver-builder"&&wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${n}`},n==="elementor"&&wp.element.createElement("label",{className:"elementor-control-title"},l.label),wp.element.createElement("button",{onClick:()=>i(!a),class:"components-button is-secondary tangible-control-btn"},"Open Settings"));return a?wp.element.createElement(wp.element.Fragment,null,N,wp.element.createElement(te,{submit:x,cancel:C,title:l.label},f)):N},"Control");var Qe=Object.defineProperty,Re=g((e,t)=>Qe(e,"name",{value:t,configurable:!0}),"n$2");const{wp:ne}=window,{useState:Ie,useEffect:We}=ne.element,qe=Re(e=>{const[t,l]=Ie(e.initialValue);return We(()=>e.handler(t),[t]),ne.element.createElement("input",{type:"text",value:t,onChange:n=>l(n.target.value)})},"Text");var Ue=Object.defineProperty,Xe=g((e,t)=>Ue(e,"name",{value:t,configurable:!0}),"i$3");const{jQuery:ze}=window,$=Xe(({labelForEmptyValue:e="",options:t=[],value:l="",onChange:n,multiSelect:o,style:r})=>{const a=wp.element.useRef();if(wp.element.useEffect(()=>{if(!a.current)return;const i=ze(a.current);a.current.$el=i,n(l),i.tangibleSelect({minimumResultsForSearch:5}),o&&(i.val(l),i.trigger("change")),i.on("change",function(p){if(!o&&!a.current._silentChange){n(p.target.value);return}if(!a.current||a.current._silentChange)return;const s=i.select2("data").map(m=>m.id);n(s)});const c=a.current.select2=i.data("select2");return()=>{c&&c.destroy()}},[]),a.current&&a.current.$el)if(o){const i=a.current.$el.val();l.length!==i.length&&t.length&&setTimeout(function(){!a.current||!a.current.$el||(a.current.$el.val(l),a.current.$el.trigger("change"))},0)}else a.current.value!==l&&(a.current._silentChange=!0,a.current.$el.val(l),a.current.$el.trigger("change"),setTimeout(function(){a.current._silentChange=!1},0));return wp.element.createElement("select",{ref:a,autoComplete:"off",multiple:o,style:{display:"none",width:"160px",...r}},e&&wp.element.createElement("option",{value:"",disabled:!0,selected:l==null},e),t.map((i,c)=>wp.element.createElement("option",{key:`option-${c}`,value:i.value,selected:i.value===l},i.label)))},"Select");var Ge=Object.defineProperty,Ke=g((e,t)=>Ge(e,"name",{value:t,configurable:!0}),"a$2");const Ye=Ke(({getData:e,setData:t,includeOrder:l,includeOrderBy:n})=>{const o=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"order"},"Order"),wp.element.createElement($,{labelForEmptyValue:"Choose Order",options:[{label:"ASC",value:"asc"},{label:"DESC",value:"desc"}],value:e("order"),style:{width:"100%"},onChange:c=>t("order",c)}))),r=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby"},"Order by"),wp.element.createElement($,{labelForEmptyValue:"Order by",options:[{label:"Title",value:"title"},{label:"ID",value:"id"},{label:"Author",value:"author"},{label:"Name",value:"name"},{label:"Type",value:"type"},{label:"Date",value:"date"},{label:"Modified",value:"modified"},{label:"Random",value:"random"},{label:"Comment count",value:"comment_count"},{label:"Relevance",value:"relevance"},{label:"Menu",value:"menu"},{label:"Custom value",value:"meta_value"},{label:"Custom value number",value:"meta_value_num"}],value:e("orderby"),style:{width:"100%"},onChange:c=>t("orderby",c)}))),a=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field"},"Order by custom field"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",name:"orderby-field",id:"orderby_field",onChange:c=>t("orderby_field",c.target.value),placeholder:"Enter field key",value:e("orderby_field")}))),i=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field_number"},"Order by custom field with numeric value"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",id:"orderby_field_number",name:"orderby-field-number",onChange:c=>t("orderby_field_number",c.target.value),placeholder:"Enter field key",value:e("orderby_field_number")})));return wp.element.createElement("div",{className:"tangible-logic-rule"},l&&o,n&&r,e("orderby")==="meta_value"&&a,e("orderby")==="meta_value_num"&&i)},"Order");var Ze=Object.defineProperty,et=g((e,t)=>Ze(e,"name",{value:t,configurable:!0}),"p$3");const{useState:le,useEffect:ae}=wp.element,tt=et(({initialLoopType:e,initialType:t,setData:l,fields:n})=>{const[o,r]=le(e||"post"),[a,i]=le(t);ae(()=>l("loopType",o),[o]),ae(()=>l("type",a),[a]);const c=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label"},"Content type"),wp.element.createElement($,{labelForEmptyValue:"Choose a Type",options:[{label:"Post",value:"post"}],value:o,onChange:s=>r(s),style:{width:"100%"}}))),p=o==="post"?wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"post_type"},"Fields"),wp.element.createElement($,{labelForEmptyValue:"Choose Fields",value:a?a.split(","):["null"],options:n,multiSelect:!0,style:{width:"100%"},onChange:s=>s=="null"?i(""):i(s.toString())}))):"";return wp.element.createElement("div",{className:"tangible-logic-rule"},c,p)},"Type");var nt=Object.defineProperty,j=g((e,t)=>nt(e,"name",{value:t,configurable:!0}),"r$1");const{Tangible:lt,wp:v}=window,{useState:oe,useEffect:at}=v.element,{allTaxonomies:ie={}}=lt.postQueryControlData,ot=j(({value:e,initialData:t,save:l,showBtn:n,remove:o})=>{const r=e===1,a=Object.keys(ie),[i,c]=oe(t);at(()=>{l(i)},[i]);const p=j(b=>{const E=ie[b];if(E==null||E.length===0)return[];let O=[];return E.forEach(ye=>{O.push({label:ye.name,value:ye.slug})}),O},"getTerms"),s=j(b=>i.hasOwnProperty(b)?i[b]===""?null:i[b]:null,"getParam"),m=j(b=>{C(E=>[]),b.length>0&&C(E=>b)},"updateTerms"),u=j((b,E)=>c(O=>({...O,[b]:E})),"updateParam"),[f,C]=oe(i.hasOwnProperty("taxonomy")?p(i.taxonomy):[]),x=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Taxonomy ",!r&&e),v.element.createElement($,{style:{width:"100%"},labelForEmptyValue:`Taxonomy ${r?"":e}`,options:a.map(b=>({label:b,value:b})),value:s("taxonomy"),onChange:b=>{u("terms",""),u("taxonomy",b);const E=p(b);m(E)}}))),N=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Compare ",!r&&e),v.element.createElement($,{style:{width:"100%"},labelForEmptyValue:`Compare ${r?"":e}`,options:[{label:"In",value:"in"},{label:"Not",value:"not"},{label:"And",value:"and"},{label:"Exists",value:"exists"},{label:"Not exists",value:"not exists"}],value:i.taxonomy_compare,onChange:b=>u("taxonomy_compare",b)}))),d=s("terms"),_=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Term ",!r&&e),v.element.createElement($,{style:{width:"100%"},labelForEmptyValue:`Terms ${r?"":e}`,multiSelect:!0,options:f,value:d?d.split(","):["null"],onChange:b=>c(E=>{let O="";return b!="null"&&(O=b.toString()),{...E,terms:O}})})));return v.element.createElement("div",{className:"tangible-logic-rule"},x,N,_,n&&v.element.createElement("button",{id:"logic-button-rule",className:"tangible-components-button is-secondary",type:"button",onClick:o},"Remove"))},"QueryGroup");var it=Object.defineProperty,L=g((e,t)=>it(e,"name",{value:t,configurable:!0}),"s$3");const{wp:y}=window,{useState:re,useEffect:se}=y.element,ce=3,me=L(({initialData:e,save:t})=>{const[l,n]=re([]),[o,r]=re("");se(()=>{if(!e)return;const s=JSON.parse(e),m=[];if(s.taxonomy_relation&&r(s.taxonomy_relation),!s.taxonomy)return;let u="",f=1;for(;s[`taxonomy${u}`]&&f<=ce&&(u=f!==1?`_${f}`:"",!!s[`taxonomy${u}`]);)m.push({taxonomy:s[`taxonomy${u}`],terms:s[`terms${u}`],taxonomy_compare:s[`taxonomy_compare${u}`]}),f++;n(m)},[]),se(()=>{const s={};o&&(s.taxonomy_relation=o);for(let m=0;m<l.length;m++){const u=m!==0?`_${m+1}`:"";s[`taxonomy${u}`]=l[m].taxonomy,s[`terms${u}`]=l[m].terms,s[`taxonomy_compare${u}`]=l[m].taxonomy_compare}t(s)},[l,o]);const a=y.element.createElement("div",{className:"tangible-logic-rule tangible-logic-clear"},y.element.createElement("div",{className:"tangible-components-control"},y.element.createElement("div",{className:"tangible-components-control__field"},y.element.createElement("label",{className:"tangible-components-control__label"},"Relation"),y.element.createElement($,{style:{width:"100%"},labelForEmptyValue:"Choose Relation",options:[{label:"And",value:"and"},{label:"Or",value:"or"}],value:o,onChange:s=>r(s)})))),i=L(()=>{n([...l,{taxonomy:"",terms:"",taxonomy_compare:""}])},"addRow"),c=L((s,m)=>{l[s]=m,n([...l])},"saveRow"),p=L(s=>{n([...l.slice(0,s),...l.slice(s+1)])},"removeRow");return y.element.createElement("div",{className:"tangible-logic-rule-group-box-bordered"},l.length>1&&y.element.createElement("div",{className:"tangible-logic-taxonomy-group"},a),y.element.createElement("div",{className:"tangible-logic-taxonomy-group"},l.length>0&&l.map((s,m)=>y.element.createElement(ot,{key:m+JSON.stringify(s),value:m+1,initialData:s,showBtn:!0,save:u=>c(m,u),remove:()=>p(m)}))),l.length<ce&&y.element.createElement("div",{className:"tangible-logic-group-actions"},y.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:i},"Add taxonomy filter"),y.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:()=>n([])},"Remove")))},"Taxonomy");var rt=Object.defineProperty,V=g((e,t)=>rt(e,"name",{value:t,configurable:!0}),"s$2");const{Tangible:st,wp:h}=window,{useState:ct,useEffect:ue}=h.element,{allPostTypes:de={}}=st.postQueryControlData||{},mt=V(({initialData:e,save:t,fields:l=[]})=>{const n=l.replace(/\s+/g,"").split(","),o=V(s=>{try{return JSON.parse(s)}catch{return{}}},"parseData"),[r,a]=ct(o(e));ue(()=>a(o(e)),[e]),ue(()=>{t(r)},[r]);const i=V(s=>r[s]&&r[s]!==""?r[s]:null,"getData"),c=V((s,m)=>a(u=>s!=="orderby"?{...u,[s]:m}:(m!=="meta_value"&&u.orderby_field&&delete u.orderby_field,m!=="meta_value_num"&&u.orderby_field_number&&delete u.orderby_field_number,{...u,[s]:m})),"updateArgs"),p=h.element.createElement(me,{initialData:r.hasOwnProperty("taxonomies")?JSON.stringify(r.taxonomies):"{}",save:s=>c("taxonomies",s)});return h.element.createElement(h.element.Fragment,null,(n.includes("order")||n.includes("orderby"))&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Order"),h.element.createElement(Ye,{getData:i,setData:c,includeOrder:n.includes("order"),includeOrderBy:n.includes("orderby")})),n.includes("type")&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Type"),h.element.createElement(tt,{initialLoopType:i("loopType")!==null?i("loopType"):"post",initialType:i("type"),setData:c,fields:Object.keys(de).map(s=>({label:de[s],value:s}))})),n.includes("taxonomy")&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Filter by Taxonomy"),p))},"PostQuery");var ut=Object.defineProperty,W=g((e,t)=>ut(e,"name",{value:t,configurable:!0}),"i$1");const{wp:w}=window,{element:{useEffect:B,useState:D}}=w,{ajax:dt}=window.Tangible,pt=W(({handler:e,initialValue:t,fields:l=[]})=>{const[n,o]=D(t?JSON.parse(t):[]),[r,a]=D(""),[i,c]=D([]),[p,s]=D(!1),m="tangible-block-editor-control-ajax-select",u=l.multiple&&l.multiple==="true";B(()=>{u&&!Array.isArray(n)&&o([n])}),B(()=>{const d={search:r,field:l};dt(l.ajax_action_name,d).then(_=>c(_)).catch(_=>console.error(_))},[r]),B(()=>e(JSON.stringify(n)),[n]),B(()=>{p===!1&&a("")},[p]);const f=W(d=>{o(u?[...n,d]:[d])},"saveValue"),C=W(d=>{const _=n.filter(b=>b.value!==d.value);o([..._])},"removeValue"),x=Array.isArray(n)?n.map(d=>d.value):[],N=w.element.createElement("span",{className:"dashicons dashicons-no-alt"});return w.element.createElement("div",{className:p?`${m} is-open`:m},u&&Array.isArray(n)?w.element.createElement("ul",{className:m+"-choice"},n.map(d=>w.element.createElement("li",{id:d.name},w.element.createElement("button",{onClick:()=>C(d)},N)," ",w.element.createElement("span",null,d.label)," "))):"",w.element.createElement("input",{type:"text",className:m+"-input",onFocus:()=>s(!0),onBlur:()=>s(!1),onChange:d=>{a(d.target.value)},placeholder:l.placeholder?l.placeholder:"Select",value:!p&&!u&&n[0]?n[0].label:r}),p&&w.element.createElement("ul",{class:m+"-ul"},i?i.map(d=>u&&x.includes(d.value)?"":w.element.createElement("li",{id:d.name,onMouseDown:()=>f(d)},d.label!==""?d.label:w.element.createElement("i",null,"Untitled"))):""))},"AjaxSelect");var bt=Object.defineProperty,gt=g((e,t)=>bt(e,"name",{value:t,configurable:!0}),"n$1");const vt=gt((e,t,l,n)=>{switch(e.type){case"post_query":return wp.element.createElement(mt,{save:a=>t(JSON.stringify(a)),initialData:l,fields:n.include_fields?n.include_fields:"type, order, orderby"});case"taxonomy":return wp.element.createElement(me,{save:a=>t(JSON.stringify(a)),initialData:l,...n});case"select2":const o=n.multiple&&n.multiple==="true",r=typeof l=="string"&&o?l!==""?l.split(","):[]:l!==""?l:null;return wp.element.createElement($,{labelForEmptyValue:"Choose...",options:n.options?Object.keys(n.options).map(a=>({value:a,label:n.options[a]})):[],onChange:a=>t(a!==null?Array.isArray(a)?a.join(","):a:""),multiSelect:o,value:r,style:{width:"100%"}});case"ajax_select":return wp.element.createElement(pt,{handler:t,initialValue:l,fields:n});default:return wp.element.createElement(qe,{handler:t,initialValue:l,...n})}},"getLegacyControl");var ft=Object.defineProperty,M=g((e,t)=>ft(e,"name",{value:t,configurable:!0}),"n");const{useState:q,useEffect:U}=wp.element,yt=M(e=>{const{config:t,field:l,builder:n,initialValue:o}=e,r=t.popup,[a,i]=q(n==="beaver-builder"),[c=o,p]=q(),[s=o,m]=q(),u=M(_=>(r||m(_),p(_)),"save");U(()=>e.save(s),[s]),U(()=>{r&&a&&p(s)},[a]),U(()=>{!a&&e.onPopupClose&&e.onPopupClose()},[a]);const f={display:"flex",marginBottom:"10px"},C=wp.element.createElement(wp.element.Fragment,null,n==="elementor"&&!r?wp.element.createElement("label",{className:"elementor-control-title",style:f},l.label):"",wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${t.type}`},vt(t,u,s,l)));if(!r)return C;const x=M(()=>i(!1),"cancel"),N=M(()=>{i(!1),m(c)},"submit"),d=n!=="beaver-builder"?wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${n}`},n==="elementor"?wp.element.createElement("label",{className:"elementor-control-title",style:f},l.label):"",wp.element.createElement("button",{onClick:()=>i(!a),className:"components-button is-secondary tangible-control-btn"},"Open Settings")):"";return a?wp.element.createElement(wp.element.Fragment,null,d,wp.element.createElement(te,{submit:N,cancel:x,title:l.label},C)):d},"LegacyControl");var ht=Object.defineProperty,H=g((e,t)=>ht(e,"name",{value:t,configurable:!0}),"i");const wt=jQuery,Et=H(e=>{FLBuilder.addHook("didShowLightbox",()=>{const t=window.parent.document.getElementsByClassName(`${e.prefixed_type}-container`);if(t.length!==0){document.body.classList.add("tangible-block-legacy-is-edited");for(let l=0;l<t.length;l++){const n=t[l],o=wt(n).next(),r=JSON.parse(n.getAttribute("data-field"));if(!e.popup){wp.element.render(pe(e,o,r),n);continue}const a=document.createElement("div");a.setAttribute("class",`${e.prefixed_type}-popup-container`),document.body.append(a);const i=`tangible-block-control-button ${e.prefixed_type}-popup-container`;wp.element.render(wp.element.createElement("button",{className:i,onClick:H(()=>{wp.element.unmountComponentAtNode(a),document.body.classList.add("tangible-block-legacy-popup-is-open"),wp.element.render(pe(e,o,r,H(()=>document.body.classList.remove("tangible-block-legacy-popup-is-open"),"onClose")),a)},"onClickAction")},"Open Settings"),n)}}}),FLBuilder.addHook("settings-lightbox-closed",()=>{document.body.classList.remove("tangible-block-legacy-is-edited");const t=window.parent.document.getElementsByClassName(`tangible-block-control-${e.prefixed_type}-container`);if(t.length===0)return;for(let n=0;n<t.length;n++)wp.element.unmountComponentAtNode(t[n]);if(!e.popup)return;const l=document.getElementsByClassName(`${e.prefixed_type}-popup-container`);for(let n=0;n<l.length;n++)wp.element.unmountComponentAtNode(l[n])}),FLBuilder.addHook("hideContentPanel",()=>{document.body.classList.remove("tangible-block-legacy-is-edited")})},"initLegacyControl"),pe=H((e,t,l,n=!1)=>wp.element.createElement(yt,{config:e,initialValue:t.val(),builder:"beaver-builder",field:l,save:o=>{t.val(o),t.trigger("change")},onPopupClose:n}),"initComponent");var _t=Object.defineProperty,X=g((e,t)=>_t(e,"name",{value:t,configurable:!0}),"r");const{blockConfig:{controls:be,legacy_controls:ge}}=Tangible,ve=jQuery;ve(()=>{for(const e in be)$t(be[e]);for(const e in ge)Et(ge[e])});const $t=X(e=>{FLBuilder.addHook("didShowLightbox",()=>{const t=window.parent.document.getElementsByClassName(`${e.prefixed_type}-container`);if(t.length!==0)for(let l=0;l<t.length;l++){const n=t[l],o=ve(n).next(),r=JSON.parse(n.getAttribute("data-field"));if(!e.popup){wp.element.render(fe(e,o,r),n);continue}const a=document.createElement("div");a.setAttribute("class",`${e.prefixed_type}-popup-container`),document.body.append(a);const i=`tangible-block-control-button ${e.prefixed_type}-popup-container`;wp.element.render(wp.element.createElement("button",{className:i,onClick:X(()=>{wp.element.unmountComponentAtNode(a),wp.element.render(fe(e,o,field),a)},"onClickAction")},"Open Settings"),n)}}),FLBuilder.addHook("settings-lightbox-closed",()=>{const t=window.parent.document.getElementsByClassName(`tangible-block-control-${e.prefixed_type}-container`);if(t.length===0)return;for(let n=0;n<t.length;n++)wp.element.unmountComponentAtNode(t[n]);if(!e.popup)return;const l=document.getElementsByClassName(`${e.prefixed_type}-popup-container`);for(let n=0;n<l.length;n++)wp.element.unmountComponentAtNode(l[n])})},"initControl"),fe=X((e,t,l)=>wp.element.createElement(Je,{config:e,initialValue:t.val(),builder:"beaver-builder",field:l,save:n=>{t.val(n),t.trigger("change")}}),"initComponent")})();
//# sourceMappingURL=beaver-integration.min.js.map
