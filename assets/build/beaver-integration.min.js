var be=Object.defineProperty;var c=(y,w)=>be(y,"name",{value:w,configurable:!0});(function(){"use strict";(function(){const e={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,e);return}}catch(t){}globalThis.process={env:e}})();var y=Object.defineProperty,w=c((e,t)=>y(e,"name",{value:t,configurable:!0}),"l$1");class g{constructor(t){this.conditionsMap=t||[],this.getPreviousLevels=this.getPreviousLevels.bind(this),this.getCondition=this.getCondition.bind(this)}evaluateConditions(t,i){let n=!0;if(!t||!Array.isArray(t))return n;for(const o of t){const s=this.getCondition(o);if(!this.evaluateCondition(s,i))return!1}return n}getCondition(t){var i;const n=t.split("-"),o=parseInt(n[0]),s=parseInt(n[1]);return{number:o,level:s,current:(i=this.conditionsMap[o])==null?void 0:i[s],previousLevels:this.getPreviousLevels(o,s)}}getPreviousLevels(t,i){if(i===0)return[];let n=0;const o=[];for(;n<i;)o.push(this.conditionsMap[t][n]),n++;return o}extractComparisons(t){const i=[];for(const n in t)if(!(n==="compare"||n.slice(0,8)==="compare_"||n==="value"||n.slice(0,6)==="value_")){if(n==="control"||n.slice(0,8)==="control_"){const o=t[n],[s,a=0]=n.split("_");i.push({field:o,value:t[`value${a?"_"+a:""}`],compare:t[`compare${a?"_"+a:""}`]});continue}i.push({field:n,value:t[n]})}return i}evaluateCondition(t,i){let n=!0;for(const s of t.previousLevels){const a=this.extractComparisons(s);for(const{field:l,value:r,compare:d}of a){const u=i(l);if(this.compare(u,r,d))return!1}}const o=this.extractComparisons(t.current);for(const{field:s,value:a,compare:l}of o){const r=i(s);if(!this.compare(r,a,l))return!1}return n}compare(t,i,n="is"){let o=!1;switch(n){case"is":case"equal":case"not":default:o=t===i,n==="not"&&(o=!o);break}return o}}c(g,"u$1"),w(g,"ControlVisibility");var H=Object.defineProperty,f=c((e,t)=>H(e,"name",{value:t,configurable:!0}),"a$3");const v=jQuery,k=f((e,t)=>{t(),e.find("select").on("change",t),e.find("input").on("change",t),e.find("input[type=text], input[type=number]").on("input",t);const i=e.find(".fl-editor-field");i.each(n=>{const o=j(i[n]);o&&o.on("change",t)})},"onFormChange"),N=f((e,t)=>{const i=e.find("select, input, .fl-editor-field"),n={};return i.each(o=>{const s=T(i[o]);!s||(s.conditions=t[s.name]||!1,s.element=i[o],n[s.name]=s)}),n},"getFormFields"),T=f(e=>{switch(e.tagName){case"SELECT":if(e.multiple)return e.name!==""?{name:e.name,value:v(e).val().join(",")}:!1;case"INPUT":return e.name!==""?{name:e.name,value:v(e).val()}:!1;case"DIV":const t=v(e).attr("data-name"),i=j(e);return{name:t,value:i.getContent()}}return!1},"getFormField"),j=f(e=>{const t=v(e).find(".wp-editor-tabs button").attr("data-wp-editor-id");return window.tinyMCE?window.tinyMCE.get(t):!1},"getEditor");var V=Object.defineProperty,m=c((e,t)=>V(e,"name",{value:t,configurable:!0}),"r$2");const O=jQuery,I=m(e=>{FLBuilder.addHook("settings-form-init",()=>{const t=m((n,o)=>Q(e,o),"init"),i=m(()=>{FLBuilder.removeHook("didCompleteAJAX",t),FLBuilder.removeHook("didHideLightbox",i)},"clear");FLBuilder.addHook("didCompleteAJAX",t),FLBuilder.addHook("didHideLightbox",i)})},"init"),Q=m((e,t)=>{var i,n,o,s;if(!t.fl_builder_data)return;const a=(i=t.fl_builder_data.form)!=null?i:"";(n=t.settings)!=null;const l=`_tangible_repeater_${e.blockId}_`;if(!a.startsWith(l))return;const r=a.replace(l,""),d=(s=((o=e.conditions.repeater)!=null?o:{})[r])!=null?s:!1;if(!d)return;const u=new g(d),p=O(`form[data-form-id=${a}]`);!p||k(p,()=>J(p,e,u,r))},"initVisibility"),J=m((e,t,i,n)=>{var o;const s=N(e,(o=t.repeaters[n])!=null?o:{}),a=m(l=>s[l]?s[l].value:void 0,"getValue");for(const l in s){const r=s[l];if(!r.conditions||!r.conditions.length)continue;const d=i.evaluateConditions(r.conditions,a);O(r.element).closest(".fl-field")[d?"show":"hide"]()}},"setVisibility");var D=Object.defineProperty,C=c((e,t)=>D(e,"name",{value:t,configurable:!0}),"l");const $=jQuery,X=C(e=>{const t=new g(e.conditions.general);k(e.form,()=>q(e,t)),I(e)},"init"),q=C((e,t)=>{const i=e.getTabSettings(),n=e.getSectionSettings(),o=N(e.form,e.fields),s=C(a=>o[a]?o[a].value:void 0,"getFieldValue");for(const a in i){const l=i[a];if(!l.conditions||!l.conditions.length)continue;const r=t.evaluateConditions(l.conditions,s),d=$(l.element);d.hasClass("fl-active")||d[r?"show":"hide"]()}for(const a in n){const l=n[a];if(!l.conditions||!l.conditions.length)continue;const r=t.evaluateConditions(l.conditions,s);$(l.element)[r?"show":"hide"]()}for(const a in o){const l=o[a];if(!l.conditions||!l.conditions.length)continue;const r=t.evaluateConditions(l.conditions,s);$(l.element).closest(".fl-field")[r?"show":"hide"]()}},"setVisibility");var z=Object.defineProperty,U=c((e,t)=>z(e,"name",{value:t,configurable:!0}),"g$2");const{blockConfig:{slug:W,visibility:b}}=Tangible,G=jQuery,K=U(e=>{const t=W+e;FLBuilder.registerModuleHelper(t,{init(){this.bindMethods(),this.form=G(".fl-builder-settings"),this.blockId=e,this.tabs=b.tabs[e]||{},this.sections=b.sections[e]||{},this.fields=b.fields[e]||{},this.repeaters=b.repeaters[e]||{},this.conditions=b.conditions[e]||{},!(!Object.keys(this.tabs).length&&!Object.keys(this.sections).length&&!Object.keys(this.fields).length)&&X(this)},bindMethods(){this.getTabSettings=this.getTabSettings.bind(this),this.getSectionSettings=this.getSectionSettings.bind(this)},getTabSettings(){const i={},n=this.form.find(".fl-builder-settings-tabs a");return n.each(o=>{const s=n[o],a=s.getAttribute("href").replace("#fl-builder-settings-tab-","");if(!a)return;const l={name:a};l.conditions=this.tabs[l.name]||!1,l.element=s,i[l.name]=l}),i},getSectionSettings(){const i={},n=this.form.find(".fl-builder-settings-section");return n.each(o=>{const s=n[o],a=s.getAttribute("id").replace("fl-builder-settings-section-","");if(!a)return;const l={name:a};l.conditions=this.sections[l.name]||!1,l.element=s,i[l.name]=l}),i}})},"initModule"),{blockConfig:R}=window.Tangible,{fields:Y}=R.visibility;jQuery(()=>{for(const e in Y)K(e)});var Z=Object.defineProperty,ee=c((e,t)=>Z(e,"name",{value:t,configurable:!0}),"i$1");const te=ee(e=>wp.element.createElement("div",{id:"tangible-logic-root",className:"tangible-logic-open"},wp.element.createElement("div",{className:"tangible-logic-modal"},wp.element.createElement("div",{className:"tangible-logic-header"},wp.element.createElement("div",{className:"tangible-logic-title"},e.title?e.title:""),wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button has-icon",type:"button","aria-label":"Close dialog",onClick:e.cancel},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),wp.element.createElement("div",{className:"tangible-logic-rule-group"},e.children),wp.element.createElement("div",{className:"tangible-logic-actions tangible-logic-clear"},wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button is-tertiary",type:"button",onClick:e.cancel},"Cancel"),wp.element.createElement("button",{id:"logic-button-add-logic",className:"tangible-components-button is-primary",type:"button",onClick:e.submit},"Save")))),"Modal");var L=Object.defineProperty,S=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,_=c((e,t,i)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,"i"),oe=c((e,t)=>{for(var i in t||(t={}))ne.call(t,i)&&_(e,i,t[i]);if(S)for(var i of S(t))ie.call(t,i)&&_(e,i,t[i]);return e},"s"),le=c((e,t)=>L(e,"name",{value:t,configurable:!0}),"y");const se=le((e,t,i)=>tangibleFields.render(oe({onChange:n=>e(Array.isArray(n)||typeof n=="object"?JSON.stringify(n):n),value:t},i)),"getControl");var ae=Object.defineProperty,h=c((e,t)=>ae(e,"name",{value:t,configurable:!0}),"t");const re=h(e=>{const{config:t,field:i,builder:n,initialValue:o}=e,s=t.popup,[a,l]=wp.element.useState(n==="beaver-builder"),[r=o,d]=wp.element.useState(),[u=o,p]=wp.element.useState(),ue=h(B=>(s||p(B),d(B)),"save");wp.element.useEffect(()=>e.save(u),[u]),wp.element.useEffect(()=>s&&a&&d(u),[a]);const P=wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${t.type}`},se(ue,u,i));if(!s)return P;const me=h(()=>l(!1),"cancel"),pe=h(()=>{l(!1),p(r)},"submit"),M=n!=="beaver-builder"&&wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${n}`},n==="elementor"&&wp.element.createElement("label",{className:"elementor-control-title"},i.label),wp.element.createElement("button",{onClick:()=>l(!a),class:"components-button is-secondary tangible-control-btn"},"Open Settings"));return a?wp.element.createElement(wp.element.Fragment,null,M,wp.element.createElement(te,{submit:pe,cancel:me,title:i.label},P)):M},"Control");var ce=Object.defineProperty,E=c((e,t)=>ce(e,"name",{value:t,configurable:!0}),"r");const{blockConfig:{controls:F}}=Tangible,x=jQuery;x(()=>{for(const e in F)de(F[e])});const de=E(e=>{FLBuilder.addHook("didShowLightbox",()=>{const t=document.getElementsByClassName(`${e.prefixed_type}-container`);if(t.length!==0)for(let i=0;i<t.length;i++){const n=t[i],o=x(n).next(),s=JSON.parse(n.getAttribute("data-field"));if(!e.popup){wp.element.render(A(e,o,s),n);continue}const a=document.createElement("div");a.setAttribute("class",`${e.prefixed_type}-popup-container`),document.body.append(a);const l=`tangible-block-control-button ${e.prefixed_type}-popup-container`;wp.element.render(wp.element.createElement("button",{className:l,onClick:E(()=>{wp.element.unmountComponentAtNode(a),wp.element.render(A(e,o,field),a)},"onClickAction")},"Open Settings"),n)}}),FLBuilder.addHook("settings-lightbox-closed",()=>{const t=document.getElementsByClassName(`tangible-block-control-${e.prefixed_type}-container`);if(t.length===0)return;for(let n=0;n<t.length;n++)wp.element.unmountComponentAtNode(t[n]);if(!e.popup)return;const i=document.getElementsByClassName(`${e.prefixed_type}-popup-container`);for(let n=0;n<i.length;n++)wp.element.unmountComponentAtNode(i[n])})},"initControl"),A=E((e,t,i)=>wp.element.createElement(re,{config:e,initialValue:t.val(),builder:"beaver-builder",field:i,save:n=>{t.val(n),t.trigger("change")}}),"initComponent")})();
//# sourceMappingURL=beaver-integration.min.js.map
