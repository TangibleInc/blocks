var nn=Object.defineProperty;var u=(M,J)=>nn(M,"name",{value:J,configurable:!0});(function(){"use strict";(function(){const t={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,t);return}}catch(e){}globalThis.process={env:t}})();var M=Object.defineProperty,J=u((t,e)=>M(t,"name",{value:e,configurable:!0}),"l$2");let Q=u(class{constructor(e){this.conditionsMap=e||[],this.getPreviousLevels=this.getPreviousLevels.bind(this),this.getCondition=this.getCondition.bind(this)}evaluateConditions(e,n){let l=!0;if(!e||!Array.isArray(e))return l;for(const o of e){const i=this.getCondition(o);if(!this.evaluateCondition(i,n))return!1}return l}getCondition(e){var n;const l=e.split("-"),o=parseInt(l[0]),i=parseInt(l[1]);return{number:o,level:i,current:(n=this.conditionsMap[o])==null?void 0:n[i],previousLevels:this.getPreviousLevels(o,i)}}getPreviousLevels(e,n){if(n===0)return[];let l=0;const o=[];for(;l<n;)o.push(this.conditionsMap[e][l]),l++;return o}extractComparisons(e){const n=[];for(const l in e)if(!(l==="compare"||l.slice(0,8)==="compare_"||l==="value"||l.slice(0,6)==="value_")){if(l==="control"||l.slice(0,8)==="control_"){const o=e[l],[i,a=0]=l.split("_");n.push({field:o,value:e[`value${a?"_"+a:""}`],compare:e[`compare${a?"_"+a:""}`]});continue}n.push({field:l,value:e[l]})}return n}evaluateCondition(e,n){let l=!0;for(const i of e.previousLevels){const a=this.extractComparisons(i);for(const{field:r,value:s,compare:d}of a){const c=n(r);if(this.compare(c,s,d))return!1}}const o=this.extractComparisons(e.current);for(const{field:i,value:a,compare:r}of o){const s=n(i);if(!this.compare(s,a,r))return!1}return l}compare(e,n,l="is"){let o=!1;switch(l){case"is":case"equal":case"not":default:o=e===n,l==="not"&&(o=!o);break}return o}},"u");J(Q,"ControlVisibility");var De=Object.defineProperty,P=u((t,e)=>De(t,"name",{value:e,configurable:!0}),"a$8");const F=jQuery,X=P((t,e)=>{e(),t.find("select").on("change",e),t.find("input").on("change",e),t.find("input[type=text], input[type=number]").on("input",e);const n=t.find(".fl-editor-field");n.each(l=>{const o=K(n[l]);o&&o.on("change",e)})},"onFormChange"),z=P((t,e)=>{const n=t.find("select, input, .fl-editor-field"),l={};return n.each(o=>{const i=Be(n[o]);i&&(i.conditions=e[i.name]||!1,i.element=n[o],l[i.name]=i)}),l},"getFormFields"),Be=P(t=>{switch(t.tagName){case"SELECT":if(t.multiple)return t.name!==""?{name:t.name,value:F(t).val().join(",")}:!1;case"INPUT":return t.name!==""?{name:t.name,value:F(t).val()}:!1;case"DIV":const e=F(t).attr("data-name"),n=K(t);return{name:e,value:n.getContent()}}return!1},"getFormField"),K=P(t=>{const e=F(t).find(".wp-editor-tabs button").attr("data-wp-editor-id");return window.tinyMCE?window.tinyMCE.get(e):!1},"getEditor");var Ie=Object.defineProperty,j=u((t,e)=>Ie(t,"name",{value:e,configurable:!0}),"r$2");const Y=jQuery,Me=j(t=>{FLBuilder.addHook("settings-form-init",()=>{const e=j((l,o)=>Je(t,o),"init"),n=j(()=>{FLBuilder.removeHook("didCompleteAJAX",e),FLBuilder.removeHook("didHideLightbox",n)},"clear");FLBuilder.addHook("didCompleteAJAX",e),FLBuilder.addHook("didHideLightbox",n)})},"init"),Je=j((t,e)=>{var n,l,o,i;if(!e.fl_builder_data)return;const a=(n=e.fl_builder_data.form)!=null?n:"";(l=e.settings)!=null;const r=`_tangible_repeater_${t.blockId}_`;if(!a.startsWith(r))return;const s=a.replace(r,""),d=(i=((o=t.conditions.repeater)!=null?o:{})[s])!=null?i:!1;if(!d)return;const c=new Q(d),m=Y(`form[data-form-id=${a}]`);m&&X(m,()=>Qe(m,t,c,s))},"initVisibility"),Qe=j((t,e,n,l)=>{var o;const i=z(t,(o=e.repeaters[l])!=null?o:{}),a=j(r=>i[r]?i[r].value:void 0,"getValue");for(const r in i){const s=i[r];if(!s.conditions||!s.conditions.length)continue;const d=n.evaluateConditions(s.conditions,a);Y(s.element).closest(".fl-field")[d?"show":"hide"]()}},"setVisibility");var He=Object.defineProperty,H=u((t,e)=>He(t,"name",{value:e,configurable:!0}),"l$1");const R=jQuery,Re=H(t=>{const e=new Q(t.conditions.general);X(t.form,()=>We(t,e)),Me(t)},"init"),We=H((t,e)=>{const n=t.getTabSettings(),l=t.getSectionSettings(),o=z(t.form,t.fields),i=H(a=>o[a]?o[a].value:void 0,"getFieldValue");for(const a in n){const r=n[a];if(!r.conditions||!r.conditions.length)continue;const s=e.evaluateConditions(r.conditions,i),d=R(r.element);d.hasClass("fl-active")||d[s?"show":"hide"]()}for(const a in l){const r=l[a];if(!r.conditions||!r.conditions.length)continue;const s=e.evaluateConditions(r.conditions,i);R(r.element)[s?"show":"hide"]()}for(const a in o){const r=o[a];if(!r.conditions||!r.conditions.length)continue;const s=e.evaluateConditions(r.conditions,i);R(r.element).closest(".fl-field")[s?"show":"hide"]()}},"setVisibility");var qe=Object.defineProperty,Ge=u((t,e)=>qe(t,"name",{value:e,configurable:!0}),"g$4");const{blockConfig:{slug:Ue,visibility:S}}=Tangible,Xe=jQuery,ze=Ge(t=>{const e=Ue+t;FLBuilder.registerModuleHelper(e,{init(){this.bindMethods(),this.form=Xe(".fl-builder-settings"),this.blockId=t,this.tabs=S.tabs[t]||{},this.sections=S.sections[t]||{},this.fields=S.fields[t]||{},this.repeaters=S.repeaters[t]||{},this.conditions=S.conditions[t]||{},!(!Object.keys(this.tabs).length&&!Object.keys(this.sections).length&&!Object.keys(this.fields).length)&&Re(this)},bindMethods(){this.getTabSettings=this.getTabSettings.bind(this),this.getSectionSettings=this.getSectionSettings.bind(this)},getTabSettings(){const n={},l=this.form.find(".fl-builder-settings-tabs a");return l.each(o=>{const i=l[o],a=i.getAttribute("href").replace("#fl-builder-settings-tab-","");if(!a)return;const r={name:a};r.conditions=this.tabs[r.name]||!1,r.element=i,n[r.name]=r}),n},getSectionSettings(){const n={},l=this.form.find(".fl-builder-settings-section");return l.each(o=>{const i=l[o],a=i.getAttribute("id").replace("fl-builder-settings-section-","");if(!a)return;const r={name:a};r.conditions=this.sections[r.name]||!1,r.element=i,n[r.name]=r}),n}})},"initModule"),{blockConfig:Ke}=window.Tangible,{fields:Ye}=Ke.visibility;jQuery(()=>{for(const t in Ye)ze(t)});var Ze=Object.defineProperty,et=u((t,e)=>Ze(t,"name",{value:e,configurable:!0}),"i$6");const Z=et(t=>wp.element.createElement("div",{id:"tangible-logic-root",className:"tangible-logic-open"},wp.element.createElement("div",{className:"tangible-logic-modal"},wp.element.createElement("div",{className:"tangible-logic-header"},wp.element.createElement("div",{className:"tangible-logic-title"},t.title?t.title:""),wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button has-icon",type:"button","aria-label":"Close dialog",onClick:t.cancel},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})))),wp.element.createElement("div",{className:"tangible-logic-rule-group"},t.children),wp.element.createElement("div",{className:"tangible-logic-actions tangible-logic-clear"},wp.element.createElement("button",{id:"logic-button-cancel",className:"tangible-components-button is-tertiary",type:"button",onClick:t.cancel},"Cancel"),wp.element.createElement("button",{id:"logic-button-add-logic",className:"tangible-components-button is-primary",type:"button",onClick:t.submit},"Save")))),"Modal");var ee=Object.defineProperty,tt=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,ne=u((t,e,n)=>e in t?ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"i$5"),ot=u((t,e)=>{for(var n in e||(e={}))lt.call(e,n)&&ne(t,n,e[n]);if(te)for(var n of te(e))at.call(e,n)&&ne(t,n,e[n]);return t},"s$6"),rt=u((t,e)=>tt(t,nt(e)),"y$4"),it=u((t,e)=>ee(t,"name",{value:e,configurable:!0}),"c$3");const ct=it((t,e,n,l)=>tangibleFields.render(rt(ot({context:l==="gutenberg"?"wp":l,onChange:o=>t(Array.isArray(o)||typeof o=="object"?JSON.stringify(o):String(o))},n),{value:e})),"getControl");var st=Object.defineProperty,A=u((t,e)=>st(t,"name",{value:e,configurable:!0}),"e");const mt=A(t=>{const{config:e,field:n,builder:l,initialValue:o}=t,i=e.popup,[a,r]=wp.element.useState(l==="beaver-builder"),[s=o,d]=wp.element.useState(),[c=o,m]=wp.element.useState(),p=A(b=>(i||m(b),d(b)),"save");wp.element.useEffect(()=>t.save(c),[c]),wp.element.useEffect(()=>i&&a&&d(c),[a]);const f=wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${e.type}`},ct(p,c,n,l));if(!i)return f;const C=A(()=>r(!1),"cancel"),O=A(()=>{r(!1),m(s)},"submit"),N=l!=="beaver-builder"&&wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${l}`},l==="elementor"&&wp.element.createElement("label",{className:"elementor-control-title"},n.label),wp.element.createElement("button",{onClick:()=>r(!a),class:"components-button is-secondary tangible-control-btn"},"Open Settings"));return a?wp.element.createElement(wp.element.Fragment,null,N,wp.element.createElement(Z,{submit:O,cancel:C,title:n.label},f)):N},"Control");var ut=Object.defineProperty,pt=u((t,e)=>ut(t,"name",{value:e,configurable:!0}),"n$3");const{wp:le}=window,{useState:dt,useEffect:bt}=le.element,gt=pt(t=>{const[e,n]=dt(t.initialValue);return bt(()=>t.handler(e),[e]),le.element.createElement("input",{type:"text",value:e,onChange:l=>n(l.target.value)})},"Text");var ae=Object.defineProperty,oe=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,re=u((t,e,n)=>e in t?ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"a$3"),yt=u((t,e)=>{for(var n in e||(e={}))vt.call(e,n)&&re(t,n,e[n]);if(oe)for(var n of oe(e))ft.call(e,n)&&re(t,n,e[n]);return t},"f$2"),ht=u((t,e)=>ae(t,"name",{value:e,configurable:!0}),"g$2");const{jQuery:wt}=window,_=ht(({labelForEmptyValue:t="",options:e=[],value:n="",onChange:l,multiSelect:o,style:i})=>{const a=wp.element.useRef();if(wp.element.useEffect(()=>{if(!a.current)return;const r=wt(a.current);a.current.$el=r,l(n),r.tangibleSelect({minimumResultsForSearch:5}),o&&(r.val(n),r.trigger("change")),r.on("change",function(d){if(!o&&!a.current._silentChange){l(d.target.value);return}if(!a.current||a.current._silentChange)return;const c=r.select2("data").map(m=>m.id);l(c)});const s=a.current.select2=r.data("select2");return()=>{s&&s.destroy()}},[]),a.current&&a.current.$el)if(o){const r=a.current.$el.val();n.length!==r.length&&e.length&&setImmediate(function(){!a.current||!a.current.$el||(a.current.$el.val(n),a.current.$el.trigger("change"))})}else a.current.value!==n&&(a.current._silentChange=!0,a.current.$el.val(n),a.current.$el.trigger("change"),setImmediate(function(){a.current._silentChange=!1}));return wp.element.createElement("select",{ref:a,autoComplete:"off",multiple:o,style:yt({display:"none",width:"160px"},i)},t&&wp.element.createElement("option",{value:"",disabled:!0,selected:n==null},t),e.map((r,s)=>wp.element.createElement("option",{key:`option-${s}`,value:r.value,selected:r.value===n},r.label)))},"Select");var Et=Object.defineProperty,$t=u((t,e)=>Et(t,"name",{value:e,configurable:!0}),"a$2");const _t=$t(({getData:t,setData:e,includeOrder:n,includeOrderBy:l})=>{const o=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"order"},"Order"),wp.element.createElement(_,{labelForEmptyValue:"Choose Order",options:[{label:"ASC",value:"asc"},{label:"DESC",value:"desc"}],value:t("order"),style:{width:"100%"},onChange:s=>e("order",s)}))),i=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby"},"Order by"),wp.element.createElement(_,{labelForEmptyValue:"Order by",options:[{label:"Title",value:"title"},{label:"ID",value:"id"},{label:"Author",value:"author"},{label:"Name",value:"name"},{label:"Type",value:"type"},{label:"Date",value:"date"},{label:"Modified",value:"modified"},{label:"Random",value:"random"},{label:"Comment count",value:"comment_count"},{label:"Relevance",value:"relevance"},{label:"Menu",value:"menu"},{label:"Custom value",value:"meta_value"},{label:"Custom value number",value:"meta_value_num"}],value:t("orderby"),style:{width:"100%"},onChange:s=>e("orderby",s)}))),a=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field"},"Order by custom field"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",name:"orderby-field",id:"orderby_field",onChange:s=>e("orderby_field",s.target.value),placeholder:"Enter field key",value:t("orderby_field")}))),r=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"orderby_field_number"},"Order by custom field with numeric value"),wp.element.createElement("input",{className:"tangible-components-text-control__input",type:"text",id:"orderby_field_number",name:"orderby-field-number",onChange:s=>e("orderby_field_number",s.target.value),placeholder:"Enter field key",value:t("orderby_field_number")})));return wp.element.createElement("div",{className:"tangible-logic-rule"},n&&o,l&&i,t("orderby")==="meta_value"&&a,t("orderby")==="meta_value_num"&&r)},"Order");var Ct=Object.defineProperty,Nt=u((t,e)=>Ct(t,"name",{value:e,configurable:!0}),"p$4");const{useState:ie,useEffect:ce}=wp.element,Ot=Nt(({initialLoopType:t,initialType:e,setData:n,fields:l})=>{const[o,i]=ie(t||"post"),[a,r]=ie(e);ce(()=>n("loopType",o),[o]),ce(()=>n("type",a),[a]);const s=wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label"},"Content type"),wp.element.createElement(_,{labelForEmptyValue:"Choose a Type",options:[{label:"Post",value:"post"}],value:o,onChange:c=>i(c),style:{width:"100%"}}))),d=o==="post"?wp.element.createElement("div",{className:"tangible-components-control"},wp.element.createElement("div",{className:"tangible-components-control__field"},wp.element.createElement("label",{className:"tangible-components-control__label",htmlFor:"post_type"},"Fields"),wp.element.createElement(_,{labelForEmptyValue:"Choose Fields",value:a?a.split(","):["null"],options:l,multiSelect:!0,style:{width:"100%"},onChange:c=>c=="null"?r(""):r(c.toString())}))):"";return wp.element.createElement("div",{className:"tangible-logic-rule"},s,d)},"Type");var se=Object.defineProperty,xt=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,me=Object.getOwnPropertySymbols,St=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,ue=u((t,e,n)=>e in t?se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"h$1"),pe=u((t,e)=>{for(var n in e||(e={}))St.call(e,n)&&ue(t,n,e[n]);if(me)for(var n of me(e))kt.call(e,n)&&ue(t,n,e[n]);return t},"u$5"),de=u((t,e)=>xt(t,jt(e)),"b$1"),k=u((t,e)=>se(t,"name",{value:e,configurable:!0}),"m$4");const{Tangible:Pt,wp:v}=window,{useState:be,useEffect:Ft}=v.element,{allTaxonomies:ge={}}=Pt.postQueryControlData,At=k(({value:t,initialData:e,save:n,showBtn:l,remove:o})=>{const i=t===1,a=Object.keys(ge),[r,s]=be(e);Ft(()=>{n(r)},[r]);const d=k(g=>{const E=ge[g];if(E==null||E.length===0)return[];let x=[];return E.forEach(Ve=>{x.push({label:Ve.name,value:Ve.slug})}),x},"getTerms"),c=k(g=>r.hasOwnProperty(g)?r[g]===""?null:r[g]:null,"getParam"),m=k(g=>{C(E=>[]),g.length>0&&C(E=>g)},"updateTerms"),p=k((g,E)=>s(x=>de(pe({},x),{[g]:E})),"updateParam"),[f,C]=be(r.hasOwnProperty("taxonomy")?d(r.taxonomy):[]),O=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Taxonomy ",!i&&t),v.element.createElement(_,{style:{width:"100%"},labelForEmptyValue:`Taxonomy ${i?"":t}`,options:a.map(g=>({label:g,value:g})),value:c("taxonomy"),onChange:g=>{p("terms",""),p("taxonomy",g);const E=d(g);m(E)}}))),N=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Compare ",!i&&t),v.element.createElement(_,{style:{width:"100%"},labelForEmptyValue:`Compare ${i?"":t}`,options:[{label:"In",value:"in"},{label:"Not",value:"not"},{label:"And",value:"and"},{label:"Exists",value:"exists"},{label:"Not exists",value:"not exists"}],value:r.taxonomy_compare,onChange:g=>p("taxonomy_compare",g)}))),b=c("terms"),$=v.element.createElement("div",{className:"tangible-components-control"},v.element.createElement("div",{className:"tangible-components-control__field"},v.element.createElement("label",{className:"tangible-components-control__label"},"Term ",!i&&t),v.element.createElement(_,{style:{width:"100%"},labelForEmptyValue:`Terms ${i?"":t}`,multiSelect:!0,options:f,value:b?b.split(","):["null"],onChange:g=>s(E=>{let x="";return g!="null"&&(x=g.toString()),de(pe({},E),{terms:x})})})));return v.element.createElement("div",{className:"tangible-logic-rule"},O,N,$,l&&v.element.createElement("button",{id:"logic-button-rule",className:"tangible-components-button is-secondary",type:"button",onClick:o},"Remove"))},"QueryGroup");var Lt=Object.defineProperty,L=u((t,e)=>Lt(t,"name",{value:e,configurable:!0}),"s$3");const{wp:y}=window,{useState:ve,useEffect:fe}=y.element,ye=3,he=L(({initialData:t,save:e})=>{const[n,l]=ve([]),[o,i]=ve("");fe(()=>{if(!t)return;const c=JSON.parse(t),m=[];if(c.taxonomy_relation&&i(c.taxonomy_relation),!c.taxonomy)return;let p="",f=1;for(;c[`taxonomy${p}`]&&f<=ye&&(p=f!==1?`_${f}`:"",!!c[`taxonomy${p}`]);)m.push({taxonomy:c[`taxonomy${p}`],terms:c[`terms${p}`],taxonomy_compare:c[`taxonomy_compare${p}`]}),f++;l(m)},[]),fe(()=>{const c={};o&&(c.taxonomy_relation=o);for(let m=0;m<n.length;m++){const p=m!==0?`_${m+1}`:"";c[`taxonomy${p}`]=n[m].taxonomy,c[`terms${p}`]=n[m].terms,c[`taxonomy_compare${p}`]=n[m].taxonomy_compare}e(c)},[n,o]);const a=y.element.createElement("div",{className:"tangible-logic-rule tangible-logic-clear"},y.element.createElement("div",{className:"tangible-components-control"},y.element.createElement("div",{className:"tangible-components-control__field"},y.element.createElement("label",{className:"tangible-components-control__label"},"Relation"),y.element.createElement(_,{style:{width:"100%"},labelForEmptyValue:"Choose Relation",options:[{label:"And",value:"and"},{label:"Or",value:"or"}],value:o,onChange:c=>i(c)})))),r=L(()=>{l([...n,{taxonomy:"",terms:"",taxonomy_compare:""}])},"addRow"),s=L((c,m)=>{n[c]=m,l([...n])},"saveRow"),d=L(c=>{l([...n.slice(0,c),...n.slice(c+1)])},"removeRow");return y.element.createElement("div",{className:"tangible-logic-rule-group-box-bordered"},n.length>1&&y.element.createElement("div",{className:"tangible-logic-taxonomy-group"},a),y.element.createElement("div",{className:"tangible-logic-taxonomy-group"},n.length>0&&n.map((c,m)=>y.element.createElement(At,{key:m+JSON.stringify(c),value:m+1,initialData:c,showBtn:!0,save:p=>s(m,p),remove:()=>d(m)}))),n.length<ye&&y.element.createElement("div",{className:"tangible-logic-group-actions"},y.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:r},"Add taxonomy filter"),y.element.createElement("button",{className:"tangible-components-button is-secondary",type:"button",onClick:()=>l([])},"Remove")))},"Taxonomy");var we=Object.defineProperty,Tt=Object.defineProperties,Vt=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,Dt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable,$e=u((t,e,n)=>e in t?we(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"g$1"),_e=u((t,e)=>{for(var n in e||(e={}))Dt.call(e,n)&&$e(t,n,e[n]);if(Ee)for(var n of Ee(e))Bt.call(e,n)&&$e(t,n,e[n]);return t},"y$2"),Ce=u((t,e)=>Tt(t,Vt(e)),"m$3"),T=u((t,e)=>we(t,"name",{value:e,configurable:!0}),"u$4");const{Tangible:It,wp:h}=window,{useState:Mt,useEffect:Ne}=h.element,{allPostTypes:Oe={}}=It.postQueryControlData||{},Jt=T(({initialData:t,save:e,fields:n=[]})=>{const l=n.replace(/\s+/g,"").split(","),o=T(c=>{try{return JSON.parse(c)}catch(m){return{}}},"parseData"),[i,a]=Mt(o(t));Ne(()=>a(o(t)),[t]),Ne(()=>{e(i)},[i]);const r=T(c=>i[c]&&i[c]!==""?i[c]:null,"getData"),s=T((c,m)=>a(p=>c!=="orderby"?Ce(_e({},p),{[c]:m}):(m!=="meta_value"&&p.orderby_field&&delete p.orderby_field,m!=="meta_value_num"&&p.orderby_field_number&&delete p.orderby_field_number,Ce(_e({},p),{[c]:m}))),"updateArgs"),d=h.element.createElement(he,{initialData:i.hasOwnProperty("taxonomies")?JSON.stringify(i.taxonomies):"{}",save:c=>s("taxonomies",c)});return h.element.createElement(h.element.Fragment,null,(l.includes("order")||l.includes("orderby"))&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Order"),h.element.createElement(_t,{getData:r,setData:s,includeOrder:l.includes("order"),includeOrderBy:l.includes("orderby")})),l.includes("type")&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Type"),h.element.createElement(Ot,{initialLoopType:r("loopType")!==null?r("loopType"):"post",initialType:r("type"),setData:s,fields:Object.keys(Oe).map(c=>({label:Oe[c],value:c}))})),l.includes("taxonomy")&&h.element.createElement("div",{className:"tangible-logic-rule-group-box"},h.element.createElement("h4",{style:{fontWeight:"600"}},"Filter by Taxonomy"),d))},"PostQuery");var Qt=Object.defineProperty,W=u((t,e)=>Qt(t,"name",{value:e,configurable:!0}),"i$1");const{wp:w}=window,{element:{useEffect:V,useState:D}}=w,{ajax:Ht}=window.Tangible,Rt=W(({handler:t,initialValue:e,fields:n=[]})=>{const[l,o]=D(e?JSON.parse(e):[]),[i,a]=D(""),[r,s]=D([]),[d,c]=D(!1),m="tangible-block-editor-control-ajax-select",p=n.multiple&&n.multiple==="true";V(()=>{p&&!Array.isArray(l)&&o([l])}),V(()=>{const b={search:i,field:n};Ht(n.ajax_action_name,b).then($=>s($)).catch($=>console.error($))},[i]),V(()=>t(JSON.stringify(l)),[l]),V(()=>{d===!1&&a("")},[d]);const f=W(b=>{o(p?[...l,b]:[b])},"saveValue"),C=W(b=>{const $=l.filter(g=>g.value!==b.value);o([...$])},"removeValue"),O=Array.isArray(l)?l.map(b=>b.value):[],N=w.element.createElement("span",{className:"dashicons dashicons-no-alt"});return w.element.createElement("div",{className:d?`${m} is-open`:m},p&&Array.isArray(l)?w.element.createElement("ul",{className:m+"-choice"},l.map(b=>w.element.createElement("li",{id:b.name},w.element.createElement("button",{onClick:()=>C(b)},N)," ",w.element.createElement("span",null,b.label)," "))):"",w.element.createElement("input",{type:"text",className:m+"-input",onFocus:()=>c(!0),onBlur:()=>c(!1),onChange:b=>{a(b.target.value)},placeholder:n.placeholder?n.placeholder:"Select",value:!d&&!p&&l[0]?l[0].label:i}),d&&w.element.createElement("ul",{class:m+"-ul"},r?r.map(b=>p&&O.includes(b.value)?"":w.element.createElement("li",{id:b.name,onMouseDown:()=>f(b)},b.label!==""?b.label:w.element.createElement("i",null,"Untitled"))):""))},"AjaxSelect");var xe=Object.defineProperty,je=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,Se=u((t,e,n)=>e in t?xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"a"),ke=u((t,e)=>{for(var n in e||(e={}))Wt.call(e,n)&&Se(t,n,e[n]);if(je)for(var n of je(e))qt.call(e,n)&&Se(t,n,e[n]);return t},"s$1"),Gt=u((t,e)=>xe(t,"name",{value:e,configurable:!0}),"l");const Ut=Gt((t,e,n,l)=>{switch(t.type){case"post_query":return wp.element.createElement(Jt,{save:a=>e(JSON.stringify(a)),initialData:n,fields:l.include_fields?l.include_fields:"type, order, orderby"});case"taxonomy":return wp.element.createElement(he,ke({save:a=>e(JSON.stringify(a)),initialData:n},l));case"select2":const o=l.multiple&&l.multiple==="true",i=typeof n=="string"&&o?n!==""?n.split(","):[]:n!==""?n:null;return wp.element.createElement(_,{labelForEmptyValue:"Choose...",options:l.options?Object.keys(l.options).map(a=>({value:a,label:l.options[a]})):[],onChange:a=>e(a!==null?Array.isArray(a)?a.join(","):a:""),multiSelect:o,value:i,style:{width:"100%"}});case"ajax_select":return wp.element.createElement(Rt,{handler:e,initialValue:n,fields:l});default:return wp.element.createElement(gt,ke({handler:e,initialValue:n},l))}},"getLegacyControl");var Xt=Object.defineProperty,B=u((t,e)=>Xt(t,"name",{value:e,configurable:!0}),"n");const{useState:q,useEffect:G}=wp.element,zt=B(t=>{const{config:e,field:n,builder:l,initialValue:o}=t,i=e.popup,[a,r]=q(l==="beaver-builder"),[s=o,d]=q(),[c=o,m]=q(),p=B($=>(i||m($),d($)),"save");G(()=>t.save(c),[c]),G(()=>{i&&a&&d(c)},[a]),G(()=>{!a&&t.onPopupClose&&t.onPopupClose()},[a]);const f={display:"flex",marginBottom:"10px"},C=wp.element.createElement(wp.element.Fragment,null,l==="elementor"&&!i?wp.element.createElement("label",{className:"elementor-control-title",style:f},n.label):"",wp.element.createElement("div",{className:`tangible-block-control tangible-block-control-${e.type}`},Ut(e,p,c,n)));if(!i)return C;const O=B(()=>r(!1),"cancel"),N=B(()=>{r(!1),m(s)},"submit"),b=l!=="beaver-builder"?wp.element.createElement("div",{className:`tangible-control-modal-button-container tangible-control-modal-button-container-${l}`},l==="elementor"?wp.element.createElement("label",{className:"elementor-control-title",style:f},n.label):"",wp.element.createElement("button",{onClick:()=>r(!a),className:"components-button is-secondary tangible-control-btn"},"Open Settings")):"";return a?wp.element.createElement(wp.element.Fragment,null,b,wp.element.createElement(Z,{submit:N,cancel:O,title:n.label},C)):b},"LegacyControl");var Kt=Object.defineProperty,I=u((t,e)=>Kt(t,"name",{value:e,configurable:!0}),"i");const Yt=jQuery,Zt=I(t=>{FLBuilder.addHook("didShowLightbox",()=>{const e=window.parent.document.getElementsByClassName(`${t.prefixed_type}-container`);if(e.length!==0){document.body.classList.add("tangible-block-legacy-is-edited");for(let n=0;n<e.length;n++){const l=e[n],o=Yt(l).next(),i=JSON.parse(l.getAttribute("data-field"));if(!t.popup){wp.element.render(Pe(t,o,i),l);continue}const a=document.createElement("div");a.setAttribute("class",`${t.prefixed_type}-popup-container`),document.body.append(a);const r=`tangible-block-control-button ${t.prefixed_type}-popup-container`;wp.element.render(wp.element.createElement("button",{className:r,onClick:I(()=>{wp.element.unmountComponentAtNode(a),document.body.classList.add("tangible-block-legacy-popup-is-open"),wp.element.render(Pe(t,o,i,I(()=>document.body.classList.remove("tangible-block-legacy-popup-is-open"),"onClose")),a)},"onClickAction")},"Open Settings"),l)}}}),FLBuilder.addHook("settings-lightbox-closed",()=>{document.body.classList.remove("tangible-block-legacy-is-edited");const e=window.parent.document.getElementsByClassName(`tangible-block-control-${t.prefixed_type}-container`);if(e.length===0)return;for(let l=0;l<e.length;l++)wp.element.unmountComponentAtNode(e[l]);if(!t.popup)return;const n=document.getElementsByClassName(`${t.prefixed_type}-popup-container`);for(let l=0;l<n.length;l++)wp.element.unmountComponentAtNode(n[l])}),FLBuilder.addHook("hideContentPanel",()=>{document.body.classList.remove("tangible-block-legacy-is-edited")})},"initLegacyControl"),Pe=I((t,e,n,l=!1)=>wp.element.createElement(zt,{config:t,initialValue:e.val(),builder:"beaver-builder",field:n,save:o=>{e.val(o),e.trigger("change")},onPopupClose:l}),"initComponent");var en=Object.defineProperty,U=u((t,e)=>en(t,"name",{value:e,configurable:!0}),"r");const{blockConfig:{controls:Fe,legacy_controls:Ae}}=Tangible,Le=jQuery;Le(()=>{for(const t in Fe)tn(Fe[t]);for(const t in Ae)Zt(Ae[t])});const tn=U(t=>{FLBuilder.addHook("didShowLightbox",()=>{const e=window.parent.document.getElementsByClassName(`${t.prefixed_type}-container`);if(e.length!==0)for(let n=0;n<e.length;n++){const l=e[n],o=Le(l).next(),i=JSON.parse(l.getAttribute("data-field"));if(!t.popup){wp.element.render(Te(t,o,i),l);continue}const a=document.createElement("div");a.setAttribute("class",`${t.prefixed_type}-popup-container`),document.body.append(a);const r=`tangible-block-control-button ${t.prefixed_type}-popup-container`;wp.element.render(wp.element.createElement("button",{className:r,onClick:U(()=>{wp.element.unmountComponentAtNode(a),wp.element.render(Te(t,o,field),a)},"onClickAction")},"Open Settings"),l)}}),FLBuilder.addHook("settings-lightbox-closed",()=>{const e=window.parent.document.getElementsByClassName(`tangible-block-control-${t.prefixed_type}-container`);if(e.length===0)return;for(let l=0;l<e.length;l++)wp.element.unmountComponentAtNode(e[l]);if(!t.popup)return;const n=document.getElementsByClassName(`${t.prefixed_type}-popup-container`);for(let l=0;l<n.length;l++)wp.element.unmountComponentAtNode(n[l])})},"initControl"),Te=U((t,e,n)=>wp.element.createElement(mt,{config:t,initialValue:e.val(),builder:"beaver-builder",field:n,save:l=>{e.val(l),e.trigger("change")}}),"initComponent")})();
//# sourceMappingURL=beaver-integration.min.js.map
